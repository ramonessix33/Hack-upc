define("metaserver/static/js/modules/clean/deprecated_pyxl/controllers/tooltip",["require","exports","tslib","lodash","metaserver/static/js/modules/clean/deprecated_pyxl/controller_helpers","metaserver/static/js/modules/clean/analytics"],(function(t,e,o,r,i,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InfoTooltip=e.DBTooltip=void 0,r=o.__importStar(r),i=o.__importStar(i);const a=[];class s{constructor(t,e,o,n,a){this.$wrapper=t,this.prompt=this.$wrapper.find(".tooltip-prompt"),this.tooltip=this.$wrapper.find(".tooltip-tooltip"),this.hover_target=this.find_hover_target(),this.hover_log_event_name=a,this.position_global=e,this.tooltip_location=o,this.listen();const s=i.clone_element(this.tooltip).appendTo("body");s.css({position:"static",display:"inline-block"});const l=n||500;let u=s.width()+1;if(u>l&&(u=l),this.tooltip.css({width:u,position:"absolute",display:"none"}),s.remove(),this.position_global&&this.tooltip.remove().appendTo("body"),this.is_focusable()){const t=r.uniqueId("tooltip-tooltip-");this.tooltip.attr({role:"tooltip",id:t}),this.hover_target.attr({tabindex:0,"aria-describedby":t})}}static initClass(){this.prototype.tooltip_shown=!1,this.prototype.position_global=!1}listen(){return(()=>{const t=[];for(const e of[this.hover_target,this.tooltip])e.mouseenter(()=>(clearTimeout(this.tooltip.data("timeout_id")),this.show_tooltip())),e.mouseleave(()=>{const t=setTimeout(()=>this.hide_tooltip(),200);return this.tooltip.data("timeout_id",t)}),this.is_focusable()?(e.focusin(()=>(clearTimeout(this.tooltip.data("timeout_id")),this.show_tooltip())),t.push(e.focusout(()=>{const t=setTimeout(()=>this.hide_tooltip(),200);return this.tooltip.data("timeout_id",t)}))):t.push(void 0);return t})()}find_hover_target(){return this.prompt}is_focusable(){return!1}show_tooltip(t){let e,o,r,i;if(!this.tooltip_shown){r=this.position_global?this.hover_target.offset():this.hover_target.position();for(const t of Array.from(a))t.hide_tooltip();return a.push(this),"top"===this.tooltip_location?(i=r.top-this.tooltip.outerHeight()-this.hover_target.height()/2,o=r.left-this.tooltip.outerWidth()/2,e={top:"-=7"}):"left"===this.tooltip_location?(i=r.top-this.tooltip.outerHeight()/2+this.hover_target.outerHeight()/2,o=r.left-this.tooltip.outerWidth()-2,e={left:"-=7"}):"bottom"===this.tooltip_location?(i=r.top+this.hover_target.outerHeight(),o=r.left-this.tooltip.outerWidth()/2+this.hover_target.outerWidth()/2,e={top:"+=7"}):(i=r.top-this.tooltip.outerHeight()/2+this.hover_target.outerHeight()/2,o=r.left+this.hover_target.width()+2,e={left:"+=7"}),this.tooltip.css({top:i,left:o}).show().animate(e,50),this.hover_log_event_name&&n.TeamsWebActionsLogger.log(this.hover_log_event_name),this.tooltip_shown=!0}}hide_tooltip(){if(!this.tooltip_shown)return;clearTimeout(this.tooltip.data("timeout_id")),this.tooltip.hide(),this.tooltip_shown=!1;const t=a.indexOf(this);return-1!==t?a.splice(t,1):void 0}}e.DBTooltip=s,s.initClass();e.InfoTooltip=class extends s{find_hover_target(){return this.prompt.find(".sprite")}is_focusable(){return!0}}})),define("metaserver/static/js/modules/clean/legacy_ui_button",["require","exports","tslib","jquery"],(function(t,e,o,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),r=o.__importDefault(r);e.default=function(){const t=r.default(document);return r.default(document).on("mouseover.ui-button",".ui-button",(function(){return r.default(this).addClass("over")})).on("mouseout.ui-button",".ui-button",(function(){return r.default(this).removeClass("over")})).on("mousedown.ui-button",".ui-button",(function(){return r.default(this).addClass("down")})).on("click.ui-button",".ui-button",(function(){const e=r.default(this);return e.hasClass("ui-button-dropdown")&&(e.hasClass("active")?t.trigger("dropdownClosed",[1]):t.trigger("dropdownOpened",[1])),e.toggleClass("active")})),t.on("click.ui-button",(function(e){const o=r.default(e.target).closest(".ui-button.active");let i=0;r.default(".ui-button.active").not(o).each((function(){const t=r.default(this);t.hasClass("active")&&t.hasClass("ui-button-dropdown")&&(i+=1),t.removeClass("active")})),t.trigger("dropdownClosed",[i])})).on("mouseup.ui-button",()=>r.default(".ui-button.down").removeClass("down"))}})),define("metaserver/static/js/modules/clean/photos/legacy_thumb_loader",["require","exports","tslib","jquery","metaserver/static/js/modules/clean/photos/batch_thumb_loader","metaserver/static/js/modules/clean/sprite"],(function(t,e,o,r,i,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LegacyBatchThumbLoader=void 0,r=o.__importDefault(r),n=o.__importDefault(n),e.LegacyBatchThumbLoader={MAX_THUMB_BATCH_REQUESTS:24,batch_load_thumbs(t,e,o,a){const s=t.filter(t=>r.default(t).data("src")),l={};for(const t of s){const e=String(r.default(t).data("src"));l[e]||(l[e]=[]),l[e].push(t)}this.instance?this.instance.reset({batch_size:e,batch_logger:a}):this.instance=new i.BatchThumbLoader({batch_size:e,max_parallel_requests:this.MAX_THUMB_BATCH_REQUESTS,on_batch:t=>{for(const e of t){const t=[],o=r.default(l[e]);o.data("src",null),t.push(o.data("loading-src",e))}},batch_logger:a});for(const t of s){const e=r.default(t),i=e.data("src");this.instance.queue_thumb(i,function(t,e,r,i){if(i||e.data("loading-src")){if(e.data("loading-src",null),0===r.indexOf("data:image"))return e.attr("src",r),"function"==typeof o?o(e[0]):void 0;e.error(()=>e.attr("src",e.data("fail-src")||n.default.SPACER)),e.load(()=>"function"==typeof o?o(e[0]):void 0),e.attr("src",r)}}.bind(this,i,e))}return this.instance.flush(),s.length},clear_all_pending_batches(){this.instance&&this.instance.clear()}}})),define("metaserver/static/js/modules/clean/marketing_tracker",["require","exports","tslib","metaserver/static/js/modules/core/assert","metaserver/static/js/modules/core/exception","metaserver/static/js/proto_utils/unpack","metaserver/static/js/dropbox/proto/js_init_data/marketing_tracker/marketing_tracker","metaserver/static/js/modules/clean/marketing_tracker_base","metaserver/static/js/modules/clean/marketing_tracker_base"],(function(t,e,o,r,i,n,a,s,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.moduleInit=e.getGAViewData=e.getGAEventData=e.MarketingTracker=e.MARKETING_REGISTER_EVENT=e.MARKETING_LOGIN_EVENT=e.DataLayer=e.EventTypeEnum=e.PushOptions=e.MARKETING_URI=void 0,i=o.__importStar(i),e.MARKETING_URI="https://marketing.dropbox.com",Object.defineProperty(e,"PushOptions",{enumerable:!0,get:function(){return l.PushOptions}}),Object.defineProperty(e,"EventTypeEnum",{enumerable:!0,get:function(){return l.EventTypeEnum}}),Object.defineProperty(e,"DataLayer",{enumerable:!0,get:function(){return l.DataLayer}}),Object.defineProperty(e,"MARKETING_LOGIN_EVENT",{enumerable:!0,get:function(){return l.MARKETING_LOGIN_EVENT}}),Object.defineProperty(e,"MARKETING_REGISTER_EVENT",{enumerable:!0,get:function(){return l.MARKETING_REGISTER_EVENT}}),e.MarketingTracker=new s.MarketingTrackerSingleton({marketingUri:e.MARKETING_URI,onException:i.reportException,onReportStack:i.reportStack}),e.getGAEventData=function(t,e,o,r){const i={ga_eventaction:e,ga_eventCategory:t};return o&&(i.ga_eventLabel=o),r&&(i.ga_eventValue=r),i},e.getGAViewData=function(t,e,o){const i={};return r.assert(!o||o.startsWith("/virtual"),"virtual pageview page should start with virtual"),t&&(i.title=t),e&&(i.ga_pageview_location=e),o&&(i.ga_pageview_page=o),i};const u=t=>{const e={},{fields:o}=t;for(const t of Object.keys(o)){const r=o[t];e[t]=r[r.kind]}return e};e.moduleInit=function(t){const o=n.unpackProto(t,a.marketing_tracker.MarketingTrackerData),{src:r}=o,i={tealium_enabled:o.config.tealiumEnabled,tealium_env:o.config.tealiumEnv,tealium_profile:o.config.tealiumProfile,default_marketing_data:u(o.config.defaultMarketingData),privacy_consent_enabled:o.config.privacyConsentEnabled},s=u(o.dataLayer);e.MarketingTracker.push({src:r,config:i,dataLayer:s})}})),define("metaserver/static/js/modules/clean/marketing_tracker_base",["require","exports","metaserver/static/js/modules/core/assert","metaserver/static/js/modules/clean/lazy_marketing_tracker"],(function(t,e,o,r){"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),e.MarketingTrackerSingleton=e.EventTypeEnum=e.MARKETING_REGISTER_EVENT=e.MARKETING_LOGIN_EVENT=void 0,e.MARKETING_LOGIN_EVENT="user_login",e.MARKETING_REGISTER_EVENT="user_register",(function(t){t.Link="link",t.View="view"})(i=e.EventTypeEnum||(e.EventTypeEnum={}));class n{constructor(t){if(this.el=null,this.ready=!1,this.readyTimeout=null,this.resetForTesting=()=>{this.el=null,this.ready=!1,this.readyTimeout=null},this.push=({src:t,dataLayer:e,config:n,eventType:a})=>{const s=Object.assign(Object.assign({},e),{_config:n||{},_eventType:a||i.Link});o.assert(!!t,"MarketingTracker.push requires src"),this.ready?this.el&&this.el.contentWindow&&this.el.contentWindow.postMessage(s,this.args.marketingUri):(this.el||(this.el=this.load(t),this.src=t,n&&(this.config=n),this.readyTimeout=setTimeout(()=>{this.args.onException({err:new Error("Timed-out while waiting for marketing_tracker iframe load event"),severity:"non-critical"})},3e4)),this.el.addEventListener("load",()=>{null!==this.readyTimeout&&(clearTimeout(this.readyTimeout),this.readyTimeout=null),this.el&&this.el.contentWindow?(this.ready=!0,this.el.contentWindow.postMessage(s,this.args.marketingUri),r.registerLogToMarketingTrackerFunction((t=>{this.pushWithDefaults(t,i.Link)}).bind(this))):this.args.onException({err:new Error("Could not find contentWindow on marketing_tracker iframe element"),severity:"non-critical"})}))},this.load=t=>{const e=document.createElement("iframe");return e.style.display="none",e.hidden=!0,e.src=t,e.setAttribute("sandbox","allow-scripts allow-same-origin"),document.body.appendChild(e),e},this.pushWithDefaults=(t,e)=>{const{config:o,src:r}=this;if(o){const i={config:o,dataLayer:Object.assign(Object.assign({},this.config.default_marketing_data),t),src:r,eventType:e};this.push(i)}else this.args.onReportStack("MarketingTracker.pushWithDefaults requires config, which is undefined. This probably           means there is no MarketingTracker instance on the page.")},this.pushEvent=(t,e,o)=>{const r=Object.assign({event:t,tealium_event:t},o);this.pushWithDefaults(r,e)},this.tryPushEvent=(t,e,o)=>{const{config:r,src:n}=this,a={event:t,tealium_event:t};if(o=o||{},r){const t={config:r,dataLayer:Object.assign(Object.assign(Object.assign({},this.config.default_marketing_data),a),o),src:n,eventType:e||i.Link};this.push(t)}},n.instance)return n.instance;this.args=t,n.instance=this}}e.MarketingTrackerSingleton=n})),define("metaserver/static/js/dropbox/proto/js_init_data/marketing_tracker/marketing_tracker",["require","exports","tslib","protobufjs/minimal","metaserver/static/js/google/protobuf/struct"],(function(t,e,o,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.marketing_tracker=void 0;const i=(r=o.__importStar(r)).Reader,n=r.Writer,a=(r.util,r.roots.default||(r.roots.default={}));var s;e.default=a,e.marketing_tracker=a.marketing_tracker=((s=a.marketing_tracker||{}).Config=(function(t){function t(t){if(t)for(let e=Object.keys(t),o=0;o<e.length;++o)null!=t[e[o]]&&(this[e[o]]=t[e[o]])}return t.prototype.tealiumEnabled=!1,t.prototype.tealiumEnv="",t.prototype.tealiumProfile="",t.prototype.defaultMarketingData=null,t.prototype.privacyConsentEnabled=!1,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=n.create()),null!=t.tealiumEnabled&&Object.hasOwnProperty.call(t,"tealiumEnabled")&&e.uint32(24).bool(t.tealiumEnabled),null!=t.tealiumEnv&&Object.hasOwnProperty.call(t,"tealiumEnv")&&e.uint32(34).string(t.tealiumEnv),null!=t.tealiumProfile&&Object.hasOwnProperty.call(t,"tealiumProfile")&&e.uint32(42).string(t.tealiumProfile),null!=t.defaultMarketingData&&Object.hasOwnProperty.call(t,"defaultMarketingData")&&a.google.protobuf.Struct.encode(t.defaultMarketingData,e.uint32(50).fork()).ldelim(),null!=t.privacyConsentEnabled&&Object.hasOwnProperty.call(t,"privacyConsentEnabled")&&e.uint32(56).bool(t.privacyConsentEnabled),e},t.decode=function(t,e){t instanceof i||(t=i.create(t));let o=void 0===e?t.len:t.pos+e,r=new a.marketing_tracker.Config;for(;t.pos<o;){let e=t.uint32();switch(e>>>3){case 3:r.tealiumEnabled=t.bool();break;case 4:r.tealiumEnv=t.string();break;case 5:r.tealiumProfile=t.string();break;case 6:r.defaultMarketingData=a.google.protobuf.Struct.decode(t,t.uint32());break;case 7:r.privacyConsentEnabled=t.bool();break;default:t.skipType(7&e)}}return r},t.getTypeUrl=function(){return"type.googleapis.com/marketing_tracker.Config"},t})(s.Config||{}),s.MarketingTrackerData=(function(t){function t(t){if(t)for(let e=Object.keys(t),o=0;o<e.length;++o)null!=t[e[o]]&&(this[e[o]]=t[e[o]])}return t.prototype.src="",t.prototype.config=null,t.prototype.dataLayer=null,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=n.create()),null!=t.src&&Object.hasOwnProperty.call(t,"src")&&e.uint32(10).string(t.src),null!=t.config&&Object.hasOwnProperty.call(t,"config")&&a.marketing_tracker.Config.encode(t.config,e.uint32(18).fork()).ldelim(),null!=t.dataLayer&&Object.hasOwnProperty.call(t,"dataLayer")&&a.google.protobuf.Struct.encode(t.dataLayer,e.uint32(26).fork()).ldelim(),e},t.decode=function(t,e){t instanceof i||(t=i.create(t));let o=void 0===e?t.len:t.pos+e,r=new a.marketing_tracker.MarketingTrackerData;for(;t.pos<o;){let e=t.uint32();switch(e>>>3){case 1:r.src=t.string();break;case 2:r.config=a.marketing_tracker.Config.decode(t,t.uint32());break;case 3:r.dataLayer=a.google.protobuf.Struct.decode(t,t.uint32());break;default:t.skipType(7&e)}}return r},t.getTypeUrl=function(){return"type.googleapis.com/marketing_tracker.MarketingTrackerData"},t})(s.MarketingTrackerData||{}),s)})),define("metaserver/static/js/google/protobuf/struct",["require","exports","tslib","protobufjs/minimal"],(function(t,e,o,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.google=void 0;const i=(r=o.__importStar(r)).Reader,n=r.Writer,a=r.util,s=r.roots.default||(r.roots.default={});var l,u;e.default=s,e.google=s.google=((l=s.google||{}).protobuf=((u=l.protobuf||{}).Struct=(function(t){function t(t){if(this.fields={},t)for(let e=Object.keys(t),o=0;o<e.length;++o)null!=t[e[o]]&&(this[e[o]]=t[e[o]])}return t.prototype.fields=a.emptyObject,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=n.create()),null!=t.fields&&Object.hasOwnProperty.call(t,"fields"))for(let o=Object.keys(t.fields),r=0;r<o.length;++r)e.uint32(10).fork().uint32(10).string(o[r]),s.google.protobuf.Value.encode(t.fields[o[r]],e.uint32(18).fork()).ldelim().ldelim();return e},t.decode=function(t,e){t instanceof i||(t=i.create(t));let o,r,n=void 0===e?t.len:t.pos+e,l=new s.google.protobuf.Struct;for(;t.pos<n;){let e=t.uint32();switch(e>>>3){case 1:{l.fields===a.emptyObject&&(l.fields={});let e=t.uint32()+t.pos;for(o="",r=null;t.pos<e;){let e=t.uint32();switch(e>>>3){case 1:o=t.string();break;case 2:r=s.google.protobuf.Value.decode(t,t.uint32());break;default:t.skipType(7&e)}}l.fields[o]=r;break}default:t.skipType(7&e)}}return l},t.getTypeUrl=function(){return"type.googleapis.com/google.protobuf.Struct"},t})(u.Struct||{}),u.Value=(function(t){function t(t){if(t)for(let e=Object.keys(t),o=0;o<e.length;++o)null!=t[e[o]]&&(this[e[o]]=t[e[o]])}let e;return t.prototype.nullValue=0,t.prototype.numberValue=0,t.prototype.stringValue="",t.prototype.boolValue=!1,t.prototype.structValue=null,t.prototype.listValue=null,Object.defineProperty(t.prototype,"kind",{get:a.oneOfGetter(e=["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]),set:a.oneOfSetter(e)}),t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=n.create()),null!=t.nullValue&&Object.hasOwnProperty.call(t,"nullValue")&&e.uint32(8).int32(t.nullValue),null!=t.numberValue&&Object.hasOwnProperty.call(t,"numberValue")&&e.uint32(17).double(t.numberValue),null!=t.stringValue&&Object.hasOwnProperty.call(t,"stringValue")&&e.uint32(26).string(t.stringValue),null!=t.boolValue&&Object.hasOwnProperty.call(t,"boolValue")&&e.uint32(32).bool(t.boolValue),null!=t.structValue&&Object.hasOwnProperty.call(t,"structValue")&&s.google.protobuf.Struct.encode(t.structValue,e.uint32(42).fork()).ldelim(),null!=t.listValue&&Object.hasOwnProperty.call(t,"listValue")&&s.google.protobuf.ListValue.encode(t.listValue,e.uint32(50).fork()).ldelim(),e},t.decode=function(t,e){t instanceof i||(t=i.create(t));let o=void 0===e?t.len:t.pos+e,r=new s.google.protobuf.Value;for(;t.pos<o;){let e=t.uint32();switch(e>>>3){case 1:r.nullValue=t.int32();break;case 2:r.numberValue=t.double();break;case 3:r.stringValue=t.string();break;case 4:r.boolValue=t.bool();break;case 5:r.structValue=s.google.protobuf.Struct.decode(t,t.uint32());break;case 6:r.listValue=s.google.protobuf.ListValue.decode(t,t.uint32());break;default:t.skipType(7&e)}}return r},t.getTypeUrl=function(){return"type.googleapis.com/google.protobuf.Value"},t})(u.Value||{}),u.NullValue=(function(){const t={},e=Object.create(t);return e[t[0]="NULL_VALUE"]=0,e})(),u.ListValue=(function(t){function t(t){if(this.values=[],t)for(let e=Object.keys(t),o=0;o<e.length;++o)null!=t[e[o]]&&(this[e[o]]=t[e[o]])}return t.prototype.values=a.emptyArray,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=n.create()),null!=t.values&&t.values.length)for(let o=0;o<t.values.length;++o)s.google.protobuf.Value.encode(t.values[o],e.uint32(10).fork()).ldelim();return e},t.decode=function(t,e){t instanceof i||(t=i.create(t));let o=void 0===e?t.len:t.pos+e,r=new s.google.protobuf.ListValue;for(;t.pos<o;){let e=t.uint32();switch(e>>>3){case 1:r.values&&r.values.length||(r.values=[]),r.values.push(s.google.protobuf.Value.decode(t,t.uint32()));break;default:t.skipType(7&e)}}return r},t.getTypeUrl=function(){return"type.googleapis.com/google.protobuf.ListValue"},t})(u.ListValue||{}),u),l)}));
//# sourceMappingURL=pkg-legacy-ab.min.js-vfl8ES2s2.map