define("metaserver/static/js/modules/core/assert",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assert=void 0,t.assert=function(e,t,n={}){if(e)return;const r=new Error(`Assertion Error: ${t}`),{tags:o=[],exc_extra:s=null}=n;throw r.assertOptions={tags:o.concat("module:exception","assert"),exc_extra:s},r.isAssertion=!0,r}})),define("metaserver/static/js/modules/core/exception_tag_registry",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clear_all_tags=t.unregister_tag=t.register_tag=t.get_registered_tags=void 0;let n=new Set;if(window.ensemble){const e=window;e.REGISTERED_EXCEPTION_TAGS||(e.REGISTERED_EXCEPTION_TAGS=new Set),n=e.REGISTERED_EXCEPTION_TAGS}t.get_registered_tags=function(){const e=[];return n.forEach(t=>e.push(t)),e},t.register_tag=function(e){n.add(e)},t.unregister_tag=function(e){n.delete(e)},t.clear_all_tags=function(){n.clear()}})),define("metaserver/static/js/modules/core/exception",["require","exports","tslib","metaserver/static/js/modules/shims/tracekit","metaserver/static/js/modules/constants/page_load","metaserver/static/js/modules/constants/request","metaserver/static/js/modules/core/exception_tag_registry","metaserver/static/js/modules/core/xhr"],(function(e,t,n,r,o,s,i,c){"use strict";var a;Object.defineProperty(t,"__esModule",{value:!0}),t.reportStack=t.cleanup_stack_trace=t._reportException=t.reportException=t.unregisterOnFailedAssert=t.registerOnFailedAssert=t.SEVERITY=void 0,r=n.__importDefault(r),o=n.__importStar(o),s=n.__importStar(s);let l=0;const u=[];let f=void 0;const p=null===(a=window.edisonExceptionContext)||void 0===a?void 0:a.exceptionExtras;function d(e,t){const n=e=>{if(!e)return!1;for(const n of t)if(-1!==e.search(n))return!0;return!1};for(;e.length>0&&n(e[0].func);)e=e.slice(1);return e}t.SEVERITY={CRITICAL:"critical",NONCRITICAL:"non-critical",USER_ERROR:"user-error",UNCAUGHT:"uncaught",OPERATIONAL:"operational"},t.registerOnFailedAssert=function(e){u.push(e)},t.unregisterOnFailedAssert=function(e){const t=u.indexOf(e);t>=0&&u.splice(t,1)},t.reportException=function(e){let{err:n,force:o,tags:s,severity:i,exc_extra:c}=e;if(n.reported)return;const a=r.default.computeStackTrace(n),l=null!=(a&&a.stack)?a.stack:[];if(n.isAssertion){const e=n;e.assertOptions&&e.assertOptions.tags&&(s=(s||[]).concat(e.assertOptions.tags)),e.assertOptions&&e.assertOptions.exc_extra&&(c=Object.assign(Object.assign({},null!=c?c:{}),e.assertOptions.exc_extra)),u.forEach(e=>e(a))}const f=n;f.excExtra&&(c=Object.assign(Object.assign({},null!=c?c:{}),f.excExtra)),f.tags&&(s=(null!=s?s:[]).concat(f.tags)),t._reportException({msg:n.message,stack:l,force:o,tags:s,severity:i,exc_extra:c}),n.reported=!0},t._reportException=function(e){var n;let{msg:a,stack:u,force:m,tags:g,severity:x,exc_extra:h}=e;if(!f||m){const e=["\\b_reportException\\b","\\breportException\\b","\\bassert\\b","\\breportStack\\b"];let m=[];u=d(u,e);try{throw new Error}catch(t){const n=r.default.computeStackTrace(t);null!=n&&null!=n.stack&&(m=n.stack),m=d(m,e)}let _=u.length-m.length;_<=0&&(_=1);const v=u.slice(0,_),E=u.slice(_);g||(g=[]),g=g.concat(i.get_registered_tags()),(null===(n=window.edisonExceptionContext)||void 0===n?void 0:n.tags)&&(g=g.concat(window.edisonExceptionContext.tags));let w="";w=p&&"sessionId"in p?p.sessionId:o.SESSION_ID,g.push(`session-id:${w}`),h=h?Object.assign({},h):{},window.DB_FRAME_BUST&&(h.DB_FRAME_BUST=!0,x=t.SEVERITY.USER_ERROR),h.client_time=(new Date).toString(),h.client_utc_time=(new Date).toUTCString(),l+=1,h.exception_number=l,p?(h=Object.assign(Object.assign({},h),p),delete h.sessionId):h=Object.assign(Object.assign({},h),{page_repo_rev:o.REPO_REV,page_load_timestamp:s.PAGE_LOAD_TIME,page_load_hostname:o.HOSTNAME,yaps_project:o.YAPS_PROJECT,yaps_deployment:o.YAPS_DEPLOYMENT,user_locale:o.USER_LOCALE});const k={};for(const e in window.requireContexts)if(window.requireContexts.hasOwnProperty(e)){const t={},n=window.requireContexts[e].firstUndefinedModule;n&&(t.first_undefined_module=n),k[e]=t}h.page_alameda_failures=k;const b=window.ensemble;null!=b&&(null!=b.getExceptionInfo&&(h.dws_page_info=b.getExceptionInfo()),null!=b.getPageletInfoForExceptionReporting&&(h.pagelet_info=b.getPageletInfoForExceptionReporting()));const O={e:a,loc:window.location.href,ref:document.referrer,stack:JSON.stringify(v.reverse()),context_tb:JSON.stringify(E.reverse()),tags:JSON.stringify(g),sev:x||"",exc_extra:JSON.stringify(h||{})};c.sendXhr("/jse",O),f=a}},t.cleanup_stack_trace=d,t.reportStack=function(e,n={}){n={severity:n.severity||t.SEVERITY.NONCRITICAL,tags:n.tags||[],exc_extra:n.exc_extra||{},silent:!!n.silent};const r=new Error(e);t.reportException({err:r,force:!0,tags:(n.tags||[]).concat("module:exception","reportStack"),severity:n.severity,exc_extra:n.exc_extra})}})),define("metaserver/static/js/modules/shims/tracekit",["require","exports","tslib","tracekit"],(function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(r=n.__importDefault(r)).default.linesOfContext=1,r.default.remoteFetching=!1,r.default.noConflict(),t.default=r.default})),define("metaserver/static/js/modules/core/cookies",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Cookies=t._setCookie=void 0;const assert=function(e,t){if(!e)throw new Error(t)},n=/^([0-9]{1,3}\.){3}[0-9]{1,3}$/,r=function(e){if(e.match(n))return[e];const t=e.split("."),r=[];for(let e=0;e<t.length;e++)r.push(t.slice(e).join("."));return r},o=function(e){const t=e.split("/"),n=[];for(let e=0;e<t.length;e++){const r=t.slice(0,t.length-e).join("/");""!==r&&n.push(r),n.push(r+"/")}return n},s=["=",";"],i=function(e,t,n=!1){assert("string"==typeof e,`${t} must be a string, but was ${typeof e}`),assert(n||e.length>0,`${t} must not be empty`),assert(!(function(e){if(null==e)return!1;for(const t of s)if(-1!==e.indexOf(t))return!0;return!1})(e),`${t} contains illegal characters`)},c=e=>i(e,"Cookie name",!1);t._setCookie=function(e,t,n={}){var r,o,s;c(e),(e=>{i(e,"Cookie value",!0)})(t),n.expires&&(r=n.expires,i(r,"Cookie expiration date",!1)),n.domain&&(o=n.domain,i(o,"Cookie domain",!1)),n.path&&(s=n.path,i(s,"Cookie path",!1));const a=[`${e}=${t}`];n.expires&&a.push(`expires=${n.expires}`),n.domain&&a.push(`domain=${n.domain}`),n.path&&a.push(`path=${n.path}`),n.samesite&&a.push(`samesite=${n.samesite}`),a.push("secure"),document.cookie=a.join("; ")};const a=new Date(1).toUTCString();t.Cookies={create(e,n,r,o,s="/",i="lax"){let c;if(null!=r){assert("number"==typeof r,"Cookie expiration must be a number");const e=new Date;e.setTime(e.getTime()+24*r*60*60*1e3),c=e.toUTCString()}t._setCookie(e,n,{expires:c,path:s,domain:o,samesite:i})},read(e){c(e);const n=[];for(const t of document.cookie.split(";")){const r=t.split("=",1)[0];r.trim()===e&&n.push(t.substring(r.length+1,t.length).trim())}let r=!1;const o=[];for(const e of n)""===e?r=!0:o.push(e);return 1===o.length?o[0]:o.length>1?(t.Cookies.delete(e),null):r?"":null},delete(e){const n=[null,...r(window.location.hostname)],s=[null,...o(window.location.pathname)];for(const r of n)for(const n of s)t._setCookie(e,"",{expires:a,domain:r,path:n,samesite:"lax"})},are_enabled:()=>navigator.cookieEnabled?navigator.cookieEnabled:(document.cookie="this_is_a_test_cookie",-1!==document.cookie.indexOf("this_is_a_test_cookie"))}})),define("metaserver/static/js/modules/core/xhr",["require","exports","metaserver/static/js/modules/clean/csrf"],(function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendXhr=void 0;const r=function(e){};t.sendXhr=function(e,t,o=r){n.assertDropboxDomain(e),(function(e){const t=n.readCsrfToken();e.is_xhr=!0,e.t=t})(t);const s=(function(e){const t=[];for(const n in e)e.hasOwnProperty(n)&&void 0!==e[n]&&t.push(`${encodeURIComponent(n)}=${encodeURIComponent(String(e[n]))}`);return t.join("&")})(t),i=new XMLHttpRequest;return i.onreadystatechange=function(){i.readyState===XMLHttpRequest.DONE&&o(i.status)},i.open("POST",e),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.send(s),i}})),define("metaserver/static/js/modules/clean/csrf",["require","exports","metaserver/static/js/modules/core/cookies"],(function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assertDropboxDomain=t.readCsrfToken=void 0,t.readCsrfToken=function(){return n.Cookies.read("__Host-js_csrf")},t.assertDropboxDomain=function(e){const t=document.createElement("a");t.href=e;const n=t.hostname||window.location.hostname;if(-1===n.indexOf(".dropbox.com",n.length-".dropbox.com".length))throw new Error("Cannot send the CSRF token to "+n)}})),define("metaserver/static/js/prod_assets_web_modules/tracekit",["./common/_commonjsHelpers"],(function(e){"use strict";var t,n={exports:{}};return t=n,(function(e,n){if(e){var r={},o=e.TraceKit,s=[].slice,i="?";r.noConflict=function(){return e.TraceKit=o,r},r.wrap=function(e){return function(){try{return e.apply(this,arguments)}catch(e){throw r.report(e),e}}},r.report=(function(){var t,n,o=[],i=null,a=null,l=null;function u(e,t){var n=null;if(!t||r.collectWindowErrors){for(var i in o)if(c(o,i))try{o[i].apply(null,[e].concat(s.call(arguments,2)))}catch(e){n=e}if(n)throw n}}function f(e,n,o,s,i){if(l)r.computeStackTrace.augmentStackTraceWithInitialElement(l,n,o,e),p();else if(i)u(r.computeStackTrace(i),!0);else{var c={url:n,line:o,column:s};c.func=r.computeStackTrace.guessFunctionName(c.url,c.line),c.context=r.computeStackTrace.gatherContext(c.url,c.line),u({mode:"onerror",message:e,stack:[c]},!0)}return!!t&&t.apply(this,arguments)}function p(){var e=l,t=i;i=null,l=null,a=null,u.apply(null,[e,!1].concat(t))}function d(t){if(l){if(a===t)return;p()}var n=r.computeStackTrace(t);throw l=n,a=t,i=s.call(arguments,1),e.setTimeout((function(){a===t&&p()}),n.incomplete?2e3:0),t}return d.subscribe=function(r){!0!==n&&(t=e.onerror,e.onerror=f,n=!0),o.push(r)},d.unsubscribe=function(e){for(var t=o.length-1;t>=0;--t)o[t]===e&&o.splice(t,1)},d})(),r.computeStackTrace=(function(){var t={};function n(n){if("string"!=typeof n)return[];if(!c(t,n)){var o="",s="";try{s=e.document.domain}catch(e){}var i=/(.*)\:\/\/([^:\/]+)([:\d]*)\/{0,1}([\s\S]*)/.exec(n);i&&i[2]===s&&(o=(function(t){if(!r.remoteFetching)return"";try{var n=(function(){try{return new e.XMLHttpRequest}catch(t){return new e.ActiveXObject("Microsoft.XMLHTTP")}})();return n.open("GET",t,!1),n.send(""),n.responseText}catch(e){return""}})(n)),t[n]=o?o.split("\n"):[]}return t[n]}function o(e,t){var r,o=/function ([^(]*)\(([^)]*)\)/,s=/['"]?([0-9A-Za-z$_]+)['"]?\s*[:=]\s*(function|eval|new Function)/,c="",l=n(e);if(!l.length)return i;for(var u=0;u<10;++u)if(!a(c=l[t-u]+c)){if(r=s.exec(c))return r[1];if(r=o.exec(c))return r[1]}return i}function s(e,t){var o=n(e);if(!o.length)return null;var s=[],i=Math.floor(r.linesOfContext/2),c=i+r.linesOfContext%2,l=Math.max(0,t-i-1),u=Math.min(o.length,t+c-1);t-=1;for(var f=l;f<u;++f)a(o[f])||s.push(o[f]);return s.length>0?s:null}function l(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#]/g,"\\$&")}function u(e){return l(e).replace("<","(?:<|&lt;)").replace(">","(?:>|&gt;)").replace("&","(?:&|&amp;)").replace('"','(?:"|&quot;)').replace(/\s+/g,"\\s+")}function f(e,t){for(var r,o,s=0,i=t.length;s<i;++s)if((r=n(t[s])).length&&(r=r.join("\n"),o=e.exec(r)))return{url:t[s],line:r.substring(0,o.index).split("\n").length,column:o.index-r.lastIndexOf("\n",o.index)-1};return null}function p(e,t,r){var o,s=n(t),i=new RegExp("\\b"+l(e)+"\\b");return r-=1,s&&s.length>r&&(o=i.exec(s[r]))?o.index:null}function d(t){if(!a(e&&e.document)){for(var n,r,o,s,i=[e.location.href],c=e.document.getElementsByTagName("script"),p=""+t,d=0;d<c.length;++d){var m=c[d];m.src&&i.push(m.src)}if(o=/^function(?:\s+([\w$]+))?\s*\(([\w\s,]*)\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/.exec(p)){var g=o[1]?"\\s+"+o[1]:"",x=o[2].split(",").join("\\s*,\\s*");n=l(o[3]).replace(/;$/,";?"),r=new RegExp("function"+g+"\\s*\\(\\s*"+x+"\\s*\\)\\s*{\\s*"+n+"\\s*}")}else r=new RegExp(l(p).replace(/\s+/g,"\\s+"));if(s=f(r,i))return s;if(o=/^function on([\w$]+)\s*\(event\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/.exec(p)){var h=o[1];if(n=u(o[2]),s=f(r=new RegExp("on"+h+"=[\\'\"]\\s*"+n+"\\s*[\\'\"]","i"),i[0]))return s;if(s=f(r=new RegExp(n),i))return s}return null}}function m(e,t,n,r){var i={url:t,line:n};if(i.url&&i.line){e.incomplete=!1,i.func||(i.func=o(i.url,i.line)),i.context||(i.context=s(i.url,i.line));var c=/ '([^']+)' /.exec(r);if(c&&(i.column=p(c[1],i.url,i.line)),e.stack.length>0&&e.stack[0].url===i.url){if(e.stack[0].line===i.line)return!1;if(!e.stack[0].line&&e.stack[0].func===i.func)return e.stack[0].line=i.line,e.stack[0].context=i.context,!1}return e.stack.unshift(i),e.partial=!0,!0}return e.incomplete=!0,!1}function g(e,t){for(var n,s,c,a=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,l=[],u={},f=!1,h=g.caller;h&&!f;h=h.caller)if(h!==x&&h!==r.report){if(s={url:null,func:i,args:[],line:null,column:null},h.name?s.func=h.name:(n=a.exec(h.toString()))&&(s.func=n[1]),void 0===s.func)try{s.func=n.input.substring(0,n.input.indexOf("{"))}catch(e){}if(c=d(h)){s.url=c.url,s.line=c.line,s.func===i&&(s.func=o(s.url,s.line));var _=/ '([^']+)' /.exec(e.message||e.description);_&&(s.column=p(_[1],c.url,c.line))}u[""+h]?f=!0:u[""+h]=!0,l.push(s)}t&&l.splice(0,t);var v={mode:"callers",name:e.name,message:e.message,stack:l};return m(v,e.sourceURL||e.fileName,e.line||e.lineNumber,e.message||e.description),v}function x(t,r){var l=null;r=null==r?0:+r;try{if(l=(function(e){var t=e.stacktrace;if(t){for(var n,r=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,i=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^\)]+))\((.*)\))? in (.*):\s*$/i,c=t.split("\n"),a=[],l=0;l<c.length;l+=2){var u=null;if((n=r.exec(c[l]))?u={url:n[2],line:+n[1],column:null,func:n[3],args:[]}:(n=i.exec(c[l]))&&(u={url:n[6],line:+n[1],column:+n[2],func:n[3]||n[4],args:n[5]?n[5].split(","):[]}),u){if(!u.func&&u.line&&(u.func=o(u.url,u.line)),u.line)try{u.context=s(u.url,u.line)}catch(e){}u.context||(u.context=[c[l+1]]),a.push(u)}}return a.length?{mode:"stacktrace",name:e.name,message:e.message,stack:a}:null}})(t))return l}catch(e){}try{if(l=(function(e){if(!e.stack)return null;for(var t,n,r=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|webpack|eval).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,c=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|\[native).*?)(?::(\d+))?(?::(\d+))?\s*$/i,l=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,u=e.stack.split("\n"),f=[],d=/^(.*) is undefined$/.exec(e.message),m=0,g=u.length;m<g;++m){if(t=r.exec(u[m])){var x=t[2]&&-1!==t[2].indexOf("native");n={url:x?null:t[2],func:t[1]||i,args:x?[t[2]]:[],line:t[3]?+t[3]:null,column:t[4]?+t[4]:null}}else if(t=l.exec(u[m]))n={url:t[2],func:t[1]||i,args:[],line:+t[3],column:t[4]?+t[4]:null};else{if(!(t=c.exec(u[m])))continue;n={url:t[3],func:t[1]||i,args:t[2]?t[2].split(","):[],line:t[4]?+t[4]:null,column:t[5]?+t[5]:null}}!n.func&&n.line&&(n.func=o(n.url,n.line)),n.line&&(n.context=s(n.url,n.line)),f.push(n)}return f.length?(f[0]&&f[0].line&&!f[0].column&&d?f[0].column=p(d[1],f[0].url,f[0].line):f[0].column||a(e.columnNumber)||(f[0].column=e.columnNumber+1),{mode:"stack",name:e.name,message:e.message,stack:f}):null})(t))return l}catch(e){}try{if(l=(function(t){var r=t.message.split("\n");if(r.length<4)return null;var i,a=/^\s*Line (\d+) of linked script ((?:file|https?|blob)\S+)(?:: in function (\S+))?\s*$/i,l=/^\s*Line (\d+) of inline#(\d+) script in ((?:file|https?|blob)\S+)(?:: in function (\S+))?\s*$/i,p=/^\s*Line (\d+) of function script\s*$/i,d=[],m=e&&e.document&&e.document.getElementsByTagName("script"),g=[];for(var x in m)c(m,x)&&!m[x].src&&g.push(m[x]);for(var h=2;h<r.length;h+=2){var _=null;if(i=a.exec(r[h]))_={url:i[2],func:i[3],args:[],line:+i[1],column:null};else if(i=l.exec(r[h])){_={url:i[3],func:i[4],args:[],line:+i[1],column:null};var v=+i[1],E=g[i[2]-1];if(E){var w=n(_.url);if(w){var k=(w=w.join("\n")).indexOf(E.innerText);k>=0&&(_.line=v+w.substring(0,k).split("\n").length)}}}else if(i=p.exec(r[h])){var b=e.location.href.replace(/#.*$/,""),O=f(new RegExp(u(r[h+1])),[b]);_={url:b,func:"",args:[],line:O?O.line:i[1],column:null}}if(_){_.func||(_.func=o(_.url,_.line));var S=s(_.url,_.line),y=S?S[Math.floor(S.length/2)]:null;S&&y.replace(/^\s*/,"")===r[h+1].replace(/^\s*/,"")?_.context=S:_.context=[r[h+1]],d.push(_)}}return d.length?{mode:"multiline",name:t.name,message:r[0],stack:d}:null})(t))return l}catch(e){}try{if(l=g(t,r+1))return l}catch(e){}return{mode:"failed"}}return x.augmentStackTraceWithInitialElement=m,x.guessFunctionName=o,x.gatherContext=s,x.ofCaller=function(e){e=1+(null==e?0:+e);try{throw new Error}catch(t){return x(t,e+1)}},x.getSource=n,x})(),r.extendToAsynchronousCallbacks=function(){var t=function(t){var n=e[t];e[t]=function(){var e=s.call(arguments),t=e[0];return"function"==typeof t&&(e[0]=r.wrap(t)),n.apply?n.apply(this,e):n(e[0],e[1])}};t("setTimeout"),t("setInterval")},r.remoteFetching||(r.remoteFetching=!0),r.collectWindowErrors||(r.collectWindowErrors=!0),(!r.linesOfContext||r.linesOfContext<1)&&(r.linesOfContext=11),t.exports&&e.module!==t?t.exports=r:e.TraceKit=r}function c(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function a(e){return void 0===e}})("undefined"!=typeof window?window:e.commonjsGlobal),n.exports}));
//# sourceMappingURL=pkg-exception-reporting.min.js-vflc8p7xs.map