define("metaserver/static/js/modules/clean/react/action_bar/action_bar_upload_menu",["require","exports","tslib","react","dig-components/icons","dig-components/icons/src","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","metaserver/static/js/modules/core/browser_detection","metaserver/static/js/modules/core/i18n","metaserver/static/js/modules/clean/file_imports/components/file_imports_icon","metaserver/static/js/modules/core/exception"],(function(e,t,o,i,s,n,a,r,c,l,d){"use strict";var A;function _(e){if(!r.is_input_webkitdirectory_supported())return;const t=[];t.push({value:{type:a.ActionBarActionTypes.UPLOAD,menuItem:A.UPLOAD_FILES},description:(null==e?void 0:e.isInConsolidatedMenu)?c.intl.formatMessage({id:"qERWX+",defaultMessage:"Upload files"}):c.intl.formatMessage({id:"LNFEFg",defaultMessage:"Files"}),icon:i.default.createElement(s.UIIcon,{src:n.UploadFileLine})},{value:{type:a.ActionBarActionTypes.UPLOAD,menuItem:A.UPLOAD_FOLDER},description:(null==e?void 0:e.isInConsolidatedMenu)?c.intl.formatMessage({id:"ZYcSxL",defaultMessage:"Upload folder"}):c.intl.formatMessage({id:"kMDxiK",defaultMessage:"Folder"}),icon:i.default.createElement(s.UIIcon,{src:n.UploadFolderLine})});return"V1"!==(null==e?void 0:e.fileImportsEntryPoints)&&"V2"!==(null==e?void 0:e.fileImportsEntryPoints)||t.push({value:{type:a.ActionBarActionTypes.UPLOAD,menuItem:A.UPLOAD_FROM_GOOGLE_DRIVE},description:c.intl.formatMessage({id:"bkJiHu",defaultMessage:"From Google Drive"}),icon:i.default.createElement(s.UIIcon,{src:l.GoogleDriveIcon})}),{menuItems:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.getUploadMenu=t.getUploadMenuSection=t.isUploadAction=t.UploadAction=void 0,i=o.__importDefault(i),r=o.__importStar(r),(function(e){e.UPLOAD_FILES="upload-files",e.UPLOAD_FOLDER="upload-folder",e.UPLOAD_FROM_GOOGLE_DRIVE="upload_from_google_drive"})(A=t.UploadAction||(t.UploadAction={})),t.isUploadAction=e=>Boolean(e)&&Object.values(A).includes(e),t.getUploadMenuSection=_,t.getUploadMenu=function(e){const t=_(e);if(t)return{type:a.ActionBarMenuType.DROPDOWN,menuSections:[t]}}})),define("metaserver/static/js/modules/clean/react/action_bar/action_bar_create_menu",["require","exports","tslib","classnames","react","dig-components/icons/src","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","metaserver/static/js/modules/clean/cloud_docs/constants","metaserver/static/js/modules/clean/react/new_file_menu/new_file_icon","metaserver/static/js/modules/clean/react/new_file_menu/new_file_util","metaserver/static/js/modules/clean/react/onboarding_survey/lib/oa_pulsar_campaigns","metaserver/static/js/modules/core/i18n","metaserver/static/js/modules/clean/react/flows/browse_actions/create_automated_folder_action"],(function(e,t,o,i,s,n,a,r,c,l,d,A,_){"use strict";var p;Object.defineProperty(t,"__esModule",{value:!0}),t.getCreateMenu=t.getCreateSectionWithSubmenus=void 0,i=o.__importDefault(i),s=o.__importDefault(s),(function(e){e[e.FOLDER=0]="FOLDER",e[e.SHARED_FOLDER=1]="SHARED_FOLDER",e[e.TEAM_FOLDER=2]="TEAM_FOLDER",e[e.AUTOMATED_FOLDER=3]="AUTOMATED_FOLDER",e[e.PAPER=4]="PAPER",e[e.PAPER_TEMPLATE=5]="PAPER_TEMPLATE",e[e.PAPER_BINDER=6]="PAPER_BINDER",e[e.SIMPLE_POINTER=7]="SIMPLE_POINTER",e[e.MICROSOFT_WORD=8]="MICROSOFT_WORD",e[e.MICROSOFT_EXCEL=9]="MICROSOFT_EXCEL",e[e.MICROSOFT_POWERPOINT=10]="MICROSOFT_POWERPOINT",e[e.GOOGLE_DOC=11]="GOOGLE_DOC",e[e.GOOGLE_SHEET=12]="GOOGLE_SHEET",e[e.GOOGLE_SLIDE=13]="GOOGLE_SLIDE",e[e.CREATE_PORTAL=14]="CREATE_PORTAL"})(p||(p={}));const T={[p.FOLDER]:{menuItem:{value:{type:a.ActionBarActionTypes.CREATE,menuItem:a.FolderCreationAction.FOLDER},description:A.intl.formatMessage({id:"RW4ijB",defaultMessage:"Folder"}),icon:n.FolderLine}},[p.SHARED_FOLDER]:{condition:({showSharedFolderCreate:e})=>e,menuItem:{value:{type:a.ActionBarActionTypes.CREATE,menuItem:a.FolderCreationAction.SHARED_FOLDER},className:i.default(d.OA_PULSAR_CLASS,d.OAPulsarAction.SHARED_FOLDER),description:A.intl.formatMessage({id:"7nnCz9",defaultMessage:"Shared folder"}),icon:n.AddFolderLine}},[p.TEAM_FOLDER]:{condition:({showTeamFolderCreate:e})=>e,menuItem:{value:{type:a.ActionBarActionTypes.CREATE,menuItem:a.FolderCreationAction.TEAM_FOLDER},description:A.intl.formatMessage({id:"mfWC8r",defaultMessage:"New team folder"}),icon:n.TeamLine}},[p.AUTOMATED_FOLDER]:{condition:({showAutomatedFolderCreate:e})=>e,menuItem:{value:{type:a.ActionBarActionTypes.CREATE,menuItem:a.FolderCreationAction.AUTOMATED_FOLDER},description:A.intl.formatMessage(_.CREATE_AUTOMATED_FOLDER_STRING),icon:n.AutomationLine,menuItem:s.default.createElement(_.CreateAutomatedFolderAction,null)}},[p.PAPER]:{condition:({showPaperCreate:e})=>e,menuItem:{value:{type:a.ActionBarActionTypes.CREATE,menuItem:r.PaperNewFileTypes.PAPER},description:l.NewPaperDocLabel,icon:s.default.createElement(c.NewFileIcon,{displayName:l.NewPaperDocLabel,iconName:"dropbox_paper"})}},[p.PAPER_TEMPLATE]:{condition:({showPaperCreate:e})=>e,menuItem:{value:{type:a.ActionBarActionTypes.CREATE,menuItem:r.PaperNewFileTypes.PAPER_TEMPLATE},description:l.NewPaperTemplateLabel,icon:s.default.createElement(c.NewFileIcon,{displayName:l.NewPaperTemplateLabel,iconName:"dropbox_paper_template"})}},[p.PAPER_BINDER]:{condition:({showBinderCreate:e})=>e,menuItem:{value:{type:a.ActionBarActionTypes.CREATE,menuItem:r.PaperNewFileTypes.PAPER_BINDER},description:l.NewPaperBinderDocLabel,icon:s.default.createElement(c.NewFileIcon,{displayName:l.NewPaperBinderDocLabel,iconName:"dropbox_paper_binder"})}},[p.SIMPLE_POINTER]:{menuItem:{value:{type:a.ActionBarActionTypes.CREATE,menuItem:r.PointerFileTypes.SIMPLE_POINTER},description:l.NewSimplePointerLabel,icon:s.default.createElement(c.NewFileIcon,{displayName:l.NewSimplePointerLabel,iconName:"shortcut"})}},[p.MICROSOFT_WORD]:{menuItem:{value:{type:a.ActionBarActionTypes.CREATE,menuItem:r.MicrosoftFileTypes.WORD},description:l.NewMicrosoftWordDocLabel,icon:s.default.createElement(c.NewFileIcon,{displayName:l.NewMicrosoftWordDocLabel,iconName:"microsoft_docx"})}},[p.MICROSOFT_EXCEL]:{menuItem:{value:{type:a.ActionBarActionTypes.CREATE,menuItem:r.MicrosoftFileTypes.EXCEL},description:l.NewMicrosoftExcelWorkbookLabel,icon:s.default.createElement(c.NewFileIcon,{displayName:l.NewMicrosoftExcelWorkbookLabel,iconName:"microsoft_xlsx"})}},[p.MICROSOFT_POWERPOINT]:{menuItem:{value:{type:a.ActionBarActionTypes.CREATE,menuItem:r.MicrosoftFileTypes.POWERPOINT},description:l.NewMicrosoftPowerPointPresentationLabel,icon:s.default.createElement(c.NewFileIcon,{displayName:l.NewMicrosoftPowerPointPresentationLabel,iconName:"microsoft_pptx"})}},[p.GOOGLE_DOC]:{condition:({showGoogleCreate:e})=>e,menuItem:{value:{type:a.ActionBarActionTypes.CREATE,menuItem:r.GoogleFileTypes.GOOGLE_DSS_DOC},description:l.NewGoogleDocsLabel,icon:s.default.createElement(c.NewFileIcon,{displayName:l.NewGoogleDocsLabel,iconName:"google_gdoc"})}},[p.GOOGLE_SHEET]:{condition:({showGoogleCreate:e})=>e,menuItem:{value:{type:a.ActionBarActionTypes.CREATE,menuItem:r.GoogleFileTypes.GOOGLE_DSS_SHEET},description:l.NewGoogleSheetsLabel,icon:s.default.createElement(c.NewFileIcon,{displayName:l.NewGoogleSheetsLabel,iconName:"google_gsheet"})}},[p.GOOGLE_SLIDE]:{condition:({showGoogleCreate:e})=>e,menuItem:{value:{type:a.ActionBarActionTypes.CREATE,menuItem:r.GoogleFileTypes.GOOGLE_DSS_SLIDES},description:l.NewGoogleSlidesLabel,icon:s.default.createElement(c.NewFileIcon,{displayName:l.NewGoogleSlidesLabel,iconName:"google_gslides"})}},[p.CREATE_PORTAL]:{condition:({showCreateClientPortal:e})=>!!e,menuItem:{value:{type:a.ActionBarActionTypes.CREATE_PORTAL,menuItem:a.FolderCreationAction.CREATE_PORTAL},description:A.intl.formatMessage({id:"O8AD3z",defaultMessage:"Client portal"}),icon:n.AddLine}}},S=(e,t)=>e.map(e=>{const t=T[e],{menuItem:o}=t,i=o.description;return Object.assign(Object.assign({},t),{menuItem:Object.assign(Object.assign({},o),{description:i})})}).filter(({condition:e})=>!e||e(t)).map(({menuItem:e})=>e);t.getCreateSectionWithSubmenus=e=>{const{showOnlyFolderCreation:t}=e,o=(e=>({menuItems:S([p.FOLDER,p.SHARED_FOLDER,p.TEAM_FOLDER,p.AUTOMATED_FOLDER,p.CREATE_PORTAL],e)}))(e).menuItems;return t||(o.push({description:A.intl.formatMessage({id:"oKv5aq",defaultMessage:"Document"}),submenuSections:[{menuItems:S([p.PAPER,p.MICROSOFT_WORD,p.GOOGLE_DOC],e)}]},{description:A.intl.formatMessage({id:"/JpyiR",defaultMessage:"Presentation"}),submenuSections:[{menuItems:S([p.MICROSOFT_POWERPOINT,p.GOOGLE_SLIDE],e)}]},{description:A.intl.formatMessage({id:"9xjlyh",defaultMessage:"Spreadsheet"}),submenuSections:[{menuItems:S([p.MICROSOFT_EXCEL,p.GOOGLE_SHEET],e)}]}),o.push({description:A.intl.formatMessage({id:"rSeA97",defaultMessage:"More"}),submenuSections:[{menuItems:S([p.PAPER_TEMPLATE,p.PAPER_BINDER,p.SIMPLE_POINTER],e)}]})),{label:void 0,menuItems:o}},t.getCreateMenu=function(e){const o=[t.getCreateSectionWithSubmenus(e)];return{type:a.ActionBarMenuType.DROPDOWN,menuSections:o}}})),define("metaserver/static/js/modules/clean/react/action_bar/file_actions/archive_action",["require","exports","reselect","dig-components/icons/src","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","metaserver/static/js/modules/clean/react/action_bar/file_actions/file_actions_selectors","metaserver/static/js/modules/clean/react/browse/file_actions/action_handlers","metaserver/static/js/modules/clean/react/action_bar/action_bar_strings"],(function(e,t,o,i,s,n,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createArchiveActionSelector=t.archiveActionHandler=void 0,t.archiveActionHandler=(e,t)=>{a.handleArchive(n.getActionHandlerArgs(e,t))};const c={actionType:s.ActionBarActionTypes.ARCHIVE,isEnabled:!0,text:r.ARCHIVE_ACTION_STRING,icon:i.ArchiveLine},l=(e,t)=>n.hasContentManagerAndSuperAdmin(e,t)&&n.isSingleSelectionFolder(e,t)&&n.isLiveFilesOnly(e,t)&&n.isTeamSharedFolderSelected(e,t);t.createArchiveActionSelector=()=>o.createSelector(l,e=>e?c:void 0)})),define("metaserver/static/js/modules/clean/react/action_bar/file_actions/comment_action",["require","exports","reselect","dig-components/icons/src","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","metaserver/static/js/modules/clean/react/action_bar/file_actions/file_actions_selectors","metaserver/static/js/modules/clean/react/browse/file_actions/action_handlers","metaserver/static/js/modules/clean/react/action_bar/action_bar_strings"],(function(e,t,o,i,s,n,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createCommentActionSelector=t.commentActionHandler=void 0,t.commentActionHandler=(e,t)=>{a.handleComment(n.getActionHandlerArgs(e,t))};const c=(e,t)=>n.isSingleSelectionFile(e,t)&&n.isLiveFilesOnly(e,t)&&!n.isCloudDocSelected(e,t)&&!n.isPnmLinkNodeSelected(e,t);t.createCommentActionSelector=()=>o.createSelector(c,e=>e?{actionType:s.ActionBarActionTypes.COMMENT,isEnabled:!0,text:r.COMMENT_ACTION_STRING,icon:i.CommentLine}:void 0)})),define("metaserver/static/js/modules/clean/react/action_bar/file_actions/copy_action",["require","exports","reselect","dig-components/icons/src","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","metaserver/static/js/modules/clean/react/action_bar/action_bar_strings","metaserver/static/js/modules/clean/react/action_bar/file_actions/file_actions_selectors","metaserver/static/js/modules/clean/react/action_bar/file_actions/copy","metaserver/static/js/modules/clean/react/browse/models"],(function(e,t,o,i,s,n,a,r,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createCopyActionSelector=t.copyActionHandler=void 0,t.copyActionHandler=(e,t)=>{const o=a.context(e,t),{isOverFreeQuota:i,hasExcludedNsIds:s}=a.overQuotaData(e,t);r.handleCopy(a.getActionHandlerArgs(e,t),o,{isOverFreeQuota:i,hasExcludedNsIds:s})};const l=(e,t)=>a.isLiveFilesOnly(e,t)&&!a.isFileSharedWithMeSelected(e,t)&&!a.isTeamSharedFolderSelected(e,t)&&!a.isTeamMemberFolderSelected(e,t)&&!a.isPnmLinkNodeSelected(e,t)&&!a.isFamilySharedFolderSelected(e,t)&&!a.isVaultFolderSelected(e,t);t.createCopyActionSelector=()=>o.createSelector(a.selectedFiles,l,(e,t)=>t?{actionType:s.ActionBarActionTypes.COPY,isEnabled:e.some(e=>!c.File.isNoAccessSharedFolder(e)),text:n.COPY_ACTION_STRING,icon:i.CopyLine}:void 0)})),define("metaserver/static/js/modules/clean/react/action_bar/file_actions/delete_action",["require","exports","reselect","dig-components/icons/src","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","metaserver/static/js/modules/clean/pnm/constants","metaserver/static/js/modules/clean/pnm/utils","metaserver/static/js/modules/clean/react/action_bar/action_bar_strings","metaserver/static/js/modules/clean/react/action_bar/file_actions/file_actions_selectors","metaserver/static/js/modules/clean/react/browse/file_actions/action_handlers"],(function(e,t,o,i,s,n,a,r,c,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createRemoveActionSelector=t.createDeleteActionSelector=t.deleteActionHandler=void 0,t.deleteActionHandler=(e,t)=>{const o=c.context(e,t);l.handleDelete(c.getActionHandlerArgs(e,t),o)};const d=(e,t)=>{const o=t.selectedFilesSelector(e);return 1===o.count()&&a.getLinkNodeAction(o.first().per_node_metadata)===n.PASSWORDS_POST_SETUP_ACTION},A=(e,t)=>!d(e,t)&&c.isLiveFilesOnly(e,t)&&!c.isFileSharedWithMeSelected(e,t)&&!c.isTeamSharedFolderSelected(e,t)&&!c.isTeamMemberFolderSelected(e,t)&&!c.isPnmSuppressDeleteSelected(e,t)&&!c.isVaultFolderSelected(e,t)&&!(c.isInsideBackupFolder(e,t)&&!c.selectedFiles(e,t).count());t.createDeleteActionSelector=()=>o.createSelector(c.context,c.selectedFiles,A,(e,t,o)=>o?{actionType:s.ActionBarActionTypes.DELETE,isEnabled:e.isCurrentPathWriteable()&&!t.some(e=>e.read_only),text:r.DELETE_ACTION_STRING,icon:i.DeleteLine}:void 0),t.createRemoveActionSelector=()=>o.createSelector(c.context,c.selectedFiles,d,(e,t,o)=>o?{actionType:s.ActionBarActionTypes.REMOVE,isEnabled:e.isCurrentPathWriteable()&&!t.some(e=>e.read_only),text:r.REMOVE_ACTIION_STRING,icon:i.DeleteLine}:void 0)})),define("metaserver/static/js/modules/clean/react/action_bar/file_actions/download_action",["require","exports","tslib","reselect","dig-components/icons/src","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","metaserver/static/js/modules/clean/react/action_bar/action_bar_strings","metaserver/static/js/modules/clean/react/action_bar/file_actions/file_actions_selectors","metaserver/static/js/modules/clean/react/browse/file_actions/action_handlers","metaserver/static/js/modules/clean/react/browse/models"],(function(e,t,o,i,s,n,a,r,c,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createDownloadActionSelector=t.downloadActionHandler=void 0,c=o.__importStar(c),t.downloadActionHandler=(e,t)=>{const o=r.context(e,t);c.handleDownload(r.getActionHandlerArgs(e,t),o)};const d=(e,t)=>r.isLiveFilesOnly(e,t)&&!r.isPnmLinkNodeSelected(e,t)&&(r.isSingleSelection(e,t)?!r.isCloudDocSelected(e,t):!r.isFileSharedWithMeSelected(e,t)&&!r.isCloudDocFileSharedWithMeSelected(e,t));t.createDownloadActionSelector=()=>i.createSelector(r.selectedFiles,d,(e,t)=>t?{actionType:n.ActionBarActionTypes.DOWNLOAD,isEnabled:e.some(e=>!l.File.isNoAccessSharedFolder(e)),text:a.DOWNLOAD_ACTION_STRING,icon:s.DownloadLine}:void 0)})),define("metaserver/static/js/modules/clean/react/action_bar/file_actions/events_action",["require","exports","tslib","reselect","dig-components/icons/src","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","metaserver/static/js/modules/clean/filetypes","metaserver/static/js/modules/clean/react/action_bar/action_bar_strings","metaserver/static/js/modules/clean/react/action_bar/file_actions/file_actions_selectors","metaserver/static/js/modules/clean/react/browse/file_actions/action_handlers","metaserver/static/js/modules/clean/react/browse/models"],(function(e,t,o,i,s,n,a,r,c,l,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createEventsActionSelector=t.eventsActionHandler=void 0,l=o.__importStar(l),t.eventsActionHandler=(e,t)=>{l.handleEvents(c.getActionHandlerArgs(e,t))};const A=(e,t)=>{const o=c.selectedFiles(e,t).first();return c.isSingleSelection(e,t)&&c.isLiveFilesOnly(e,t)&&(o.type===a.FileTypes.SHARED_FOLDER||o.type===a.FileTypes.TEAM_SHARED_FOLDER)};t.createEventsActionSelector=()=>i.createSelector(c.context,c.selectedFiles,A,(e,t,o)=>o?{actionType:n.ActionBarActionTypes.EVENTS,isEnabled:t.every(t=>d.File.canViewFileMembers(t,e)),text:r.EVENTS_ACTION_STRING,icon:s.ActivityLine}:void 0)})),define("metaserver/static/js/modules/clean/react/action_bar/file_actions/file_actions",["require","exports","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","metaserver/static/js/modules/clean/memoize","metaserver/static/js/modules/clean/react/action_bar/file_actions/archive_action","metaserver/static/js/modules/clean/react/action_bar/file_actions/automated_folder_action","metaserver/static/js/modules/clean/react/action_bar/file_actions/comment_action","metaserver/static/js/modules/clean/react/action_bar/file_actions/copy_action","metaserver/static/js/modules/clean/react/action_bar/file_actions/delete_action","metaserver/static/js/modules/clean/react/action_bar/file_actions/download_action","metaserver/static/js/modules/clean/react/action_bar/file_actions/events_action","metaserver/static/js/modules/clean/react/action_bar/file_actions/file_conversion_action","metaserver/static/js/modules/clean/react/action_bar/file_actions/go_to_folder_action","metaserver/static/js/modules/clean/react/action_bar/file_actions/manage_as_admin_action","metaserver/static/js/modules/clean/react/action_bar/file_actions/move_action","metaserver/static/js/modules/clean/react/action_bar/file_actions/open_action","metaserver/static/js/modules/clean/react/action_bar/file_actions/convert_to_archive_action","metaserver/static/js/modules/clean/react/action_bar/file_actions/open_desktop_action","metaserver/static/js/modules/clean/react/action_bar/file_actions/permanent_delete_action","metaserver/static/js/modules/clean/react/action_bar/file_actions/rename_action","metaserver/static/js/modules/clean/react/action_bar/file_actions/request_files_action","metaserver/static/js/modules/clean/react/action_bar/file_actions/restore_action","metaserver/static/js/modules/clean/react/action_bar/file_actions/share_action","metaserver/static/js/modules/clean/react/action_bar/file_actions/share_copy_link_action","metaserver/static/js/modules/clean/react/action_bar/file_actions/share_modal_action","metaserver/static/js/modules/clean/react/action_bar/file_actions/star_action","metaserver/static/js/modules/clean/react/action_bar/file_actions/unstar_action","metaserver/static/js/modules/clean/react/action_bar/file_actions/version_history_action","metaserver/static/js/modules/clean/react/action_bar/file_actions/send_for_signature_action","metaserver/static/js/modules/clean/react/action_bar/file_actions/activity_action","metaserver/static/js/modules/clean/react/browse/browse_actions/browse_spaces_dropdown_action","metaserver/static/js/modules/clean/shallow_equal","metaserver/static/js/modules/clean/web_user_action_events","metaserver/static/js/modules/clean/react/action_bar/file_actions/request_approval_action","metaserver/static/js/modules/clean/react/action_bar/file_actions/add_to_collection_action","metaserver/static/js/modules/clean/react/action_bar/file_actions/save_new_version_action"],(function(e,t,o,i,s,n,a,r,c,l,d,A,_,p,T,S,u,E,m,O,I,N,R,f,y,v,g,M,F,b,C,L,D,h,B,w){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createActionBarActionSelector=t.actionMenuToggleHandler=t.actionHandler=t.ActionMenuToggleHandlersMap=t.FileActionsHandlersMap=t.getTabletSidebarFileActionSelectors=t.getSidebarFileActionSelectors=t.getMobileFileActionsSelectors=t.getTabletFileActionsSelectors=t.getInlineFileActionsSelectors=t.getFileActionsSelectorsMap=void 0,t.getFileActionsSelectorsMap=()=>({[o.ActionBarActionTypes.RENAME]:O.createRenameActionSelector(),[o.ActionBarActionTypes.DOWNLOAD]:l.createDownloadActionSelector(),[o.ActionBarActionTypes.COMMENT]:a.createCommentActionSelector(),[o.ActionBarActionTypes.EVENTS]:d.createEventsActionSelector(),[o.ActionBarActionTypes.VERSION_HISTORY]:M.createVersionHistoryActionSelector(),[o.ActionBarActionTypes.COPY]:r.createCopyActionSelector(),[o.ActionBarActionTypes.MOVE]:T.createMoveActionSelector(),[o.ActionBarActionTypes.DELETE]:c.createDeleteActionSelector(),[o.ActionBarActionTypes.REMOVE]:c.createRemoveActionSelector(),[o.ActionBarActionTypes.RESTORE]:N.createRestoreActionSelector(),[o.ActionBarActionTypes.PERMANENT_DELETE]:m.createPermanentDeleteActionSelector(),[o.ActionBarActionTypes.STAR]:v.createStarActionSelector(),[o.ActionBarActionTypes.UNSTAR]:g.createUnstarActionSelector(),[o.ActionBarActionTypes.OPEN]:S.createOpenActionSelector(),[o.ActionBarActionTypes.ARCHIVE]:s.createArchiveActionSelector(),[o.ActionBarActionTypes.GO_TO_FOLDER]:_.createGoToFolderActionSelector(),[o.ActionBarActionTypes.MANAGE_AS_ADMIN]:p.createManageAsAdminActionSelector(),[o.ActionBarActionTypes.REQUEST_FILES]:I.createRequestFilesActionSelector(),[o.ActionBarActionTypes.OPEN_MAC_DESKTOP]:E.createOpenMacDesktopActionSelector(),[o.ActionBarActionTypes.OPEN_WINDOWS_DESKTOP]:E.createOpenWindowsDesktopActionSelector(),[o.ActionBarActionTypes.SAVE_AS]:A.createFileConversionActionSelector(),[o.ActionBarActionTypes.EDIT_FOLDER_AUTOMATION]:n.createAutomationFolderActionSelector("edit"),[o.ActionBarActionTypes.ADD_FOLDER_AUTOMATION]:n.createAutomationFolderActionSelector("add"),[o.ActionBarActionTypes.CONVERT_TO_ARCHIVE]:u.createConvertToArchiveActionSelector(),[o.ActionBarActionTypes.SHARE]:R.createShareActionSelector(!0,!1),[o.ActionBarActionTypes.SHARE_COPY_LINK]:f.createShareCopyLinkActionSelector(!1),[o.ActionBarActionTypes.REQUEST_APPROVAL]:h.createRequestApprovalActionSelector(),[o.ActionBarActionTypes.SAVE_NEW_VERSION]:w.createSaveNewVersionActionSelector(),[o.ActionBarActionTypes.ACTIVITY]:b.createActivityActionSelector()}),t.getInlineFileActionsSelectors=()=>Object.assign(Object.assign({},t.getFileActionsSelectorsMap()),{[o.ActionBarActionTypes.SHARE_MODAL]:y.createShareModalActionSelector(),[o.ActionBarActionTypes.SHARE_COPY_LINK]:f.createShareCopyLinkActionSelector(),[o.ActionBarActionTypes.SEND_FOR_SIGNATURE]:F.createSendForSignatureActionSelector()}),t.getTabletFileActionsSelectors=()=>Object.assign(Object.assign({},t.getFileActionsSelectorsMap()),{[o.ActionBarActionTypes.SHARE_MODAL]:y.createShareModalActionSelectorForTabletView()}),t.getMobileFileActionsSelectors=()=>Object.assign(Object.assign({},t.getFileActionsSelectorsMap()),{[o.ActionBarActionTypes.SHARE_MODAL]:y.createShareModalActionSelector()}),t.getSidebarFileActionSelectors=()=>({[o.ActionBarActionTypes.SHARE]:R.createShareActionSelector()}),t.getTabletSidebarFileActionSelectors=()=>({[o.ActionBarActionTypes.SHARE_MODAL]:y.createShareModalActionSelector()}),t.FileActionsHandlersMap={[o.ActionBarActionTypes.RENAME]:O.renameActionHandler,[o.ActionBarActionTypes.DOWNLOAD]:l.downloadActionHandler,[o.ActionBarActionTypes.COMMENT]:a.commentActionHandler,[o.ActionBarActionTypes.EVENTS]:d.eventsActionHandler,[o.ActionBarActionTypes.VERSION_HISTORY]:M.versionHistoryActionHandler,[o.ActionBarActionTypes.COPY]:r.copyActionHandler,[o.ActionBarActionTypes.MOVE]:T.moveActionHandler,[o.ActionBarActionTypes.DELETE]:c.deleteActionHandler,[o.ActionBarActionTypes.REMOVE]:c.deleteActionHandler,[o.ActionBarActionTypes.RESTORE]:N.restoreActionHandler,[o.ActionBarActionTypes.PERMANENT_DELETE]:m.permanentDeleteActionHandler,[o.ActionBarActionTypes.STAR]:v.starActionHandler,[o.ActionBarActionTypes.UNSTAR]:g.unstarActionHandler,[o.ActionBarActionTypes.OPEN]:S.openActionHandler,[o.ActionBarActionTypes.SHARE_MODAL]:y.shareModalActionHandler,[o.ActionBarActionTypes.ARCHIVE]:s.archiveActionHandler,[o.ActionBarActionTypes.GO_TO_FOLDER]:_.goToFolderActionHandler,[o.ActionBarActionTypes.MANAGE_AS_ADMIN]:p.manageAsAdminActionHandler,[o.ActionBarActionTypes.REQUEST_FILES]:I.requestFilesActionHandler,[o.ActionBarActionTypes.OPEN_MAC_DESKTOP]:E.openDesktopActionHandler,[o.ActionBarActionTypes.OPEN_WINDOWS_DESKTOP]:E.openDesktopActionHandler,[o.ActionBarActionTypes.SHARE_COPY_LINK]:f.shareCopyLinkActionHandler,[o.ActionBarActionTypes.SAVE_AS]:A.fileConversionActionHandler,[o.ActionBarActionTypes.EDIT_FOLDER_AUTOMATION]:n.editAutomationFolderActionHandler,[o.ActionBarActionTypes.ADD_FOLDER_AUTOMATION]:n.addAutomationFolderActionHandler,[o.ActionBarActionTypes.CONVERT_TO_ARCHIVE]:u.convertToArchiveActionHandler,[o.ActionBarActionTypes.SEND_FOR_SIGNATURE]:F.sendForSignatureActionHandler,[o.ActionBarActionTypes.REQUEST_APPROVAL]:h.requestApprovalActionHandler,[o.ActionBarActionTypes.SAVE_NEW_VERSION]:w.saveNewVersionActionHandler,[o.ActionBarActionTypes.ADD_TO_COLLECTION]:B.addToCollectionActionHandler},t.ActionMenuToggleHandlersMap={[o.ActionBarActionTypes.OPEN]:S.openActionMenuToggleHandler,[o.ActionBarActionTypes.SPACES_DROPDOWN]:C.spacesDropdownActionMenuToggleHandler,[o.ActionBarActionTypes.ACTIVITY]:b.openActivityMenuToggleHandler};const P={[o.ActionBarActionEventSource.BUTTON]:D.ActionSourceValue.BUTTON,[o.ActionBarActionEventSource.BUTTON_MENU]:D.ActionSourceValue.BUTTON_MENU,[o.ActionBarActionEventSource.OVERFLOW_MENU]:D.ActionSourceValue.OVERFLOW_MENU};t.actionHandler=(e,t,o,i)=>(s,n)=>{const a=o[e.type];if(a){a(n(),Object.assign(Object.assign({},t),{actionSource:P[e.source]}),{menuValue:e.menuItem,anchorRef:e.anchorRef,onHoverLocked:null==i?void 0:i.onHoverLocked,onActionFlowComplete:e.onActionFlowComplete})}},t.actionMenuToggleHandler=({type:e,isOpen:t},o,i)=>(s,n)=>{const a=i[e];if(a){a(n(),o,t)}},t.createActionBarActionSelector=()=>i.dedupe(G,(e,t,o,i)=>{const s={},{alwaysAtTopLevel:n,atTopLevelIfSpace:a,alwaysInOverflow:r}=i(e,t);return s.alwaysAtTopLevel=n?H(e,t,o,n):[],s.atTopLevelIfSpace=a?H(e,t,o,a):[],s.alwaysInOverflow=r?r.map(i=>H(e,t,o,i)):[[]],s});const G=(e,t)=>{var o;return L.shallowEqualArray(e.alwaysAtTopLevel,t.alwaysAtTopLevel)&&L.shallowEqualArray(e.atTopLevelIfSpace,t.atTopLevelIfSpace)&&!!(null===(o=e.alwaysInOverflow)||void 0===o?void 0:o.every((e,o)=>L.shallowEqualArray(e,t.alwaysInOverflow?t.alwaysInOverflow[o]:[])))},H=(e,t,o,i)=>{const s=[];return i.forEach(i=>{const n=o[i],a=n&&n(e,t);a&&s.push(a)}),s}})),define("metaserver/static/js/modules/clean/react/action_bar/file_actions/file_actions_selectors",["require","exports","tslib","reselect","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","metaserver/static/js/modules/clean/filepath/filepath","metaserver/static/js/modules/clean/filetypes","metaserver/static/js/modules/clean/react/action_bar/file_actions/file_actions_types","metaserver/static/js/modules/clean/react/browse/constants","metaserver/static/js/modules/clean/react/browse/models","metaserver/static/js/modules/clean/react/files_view/data/selectors/instance_selectors","metaserver/static/js/modules/clean/react/files_view/util","metaserver/static/js/modules/clean/search/constants","metaserver/static/js/modules/clean/sharing/gating_util","metaserver/static/js/modules/clean/unity/check_file_cache","metaserver/static/js/modules/clean/unity/features","metaserver/static/js/modules/clean/react/browse/data/selectors"],(function(e,t,o,i,s,n,a,r,c,l,d,A,_,p,T,S,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.businessSpaceXgid=t.isBusinessSpaceFound=t.getAutoFolderEligibility=t.swapFollowAndTidy=t.isFolderTidyable=t.showTransferInShareDropdown=t.searchSidebarActionsMap=t.expSearchActionsMap=t.searchActionsMap=t.createSearchActionBarAccessibilityConfigSelector=t.copyActionBarActions=t.getSearchSidebarScenarioActions=t.getSearchInlineOverflowMenuActions=t.getSearchInlineScenarioActions=t.getInlineScenarioActions=t.getSearchScenarioActions=t.getActionHandlerArgs=t.expMultiObjectSharingRedesignIsOn=t.expActionBarRedesignIsOn=t.isRightRailCollapsed=t.accessibilityConfig=t.hasLinkedMobile=t.browsePostTTIData=t.isSameDirectory=t.isCdmRoot=t.getFlowsFolderRule=t.flowsFolderRule=t.isVaultFolderSelected=t.isUnityOpenAvailable=t.isTeamSharedFolderSelected=t.isTeamMemberFolderSelected=t.isSingleSelectionFolder=t.isSingleSelectionFile=t.isSingleSelection=t.isSelectionWritable=t.isSelectionFoldersOnly=t.isSelectionFilesOnly=t.isSelectionFetchFolderSizeStatusOnly=t.isRestrictedPathSelected=t.isPnmSuppressShareSelected=t.isPnmSuppressMoveSelected=t.isPnmSuppressDeleteSelected=t.isPnmLinkNodeSelected=t.isPermanentDeleteDisabled=t.isNothingSelected=t.isLiveFilesOnly=t.isFileSharedWithMeSelected=t.isFamilySharedFolderSelected=t.isDeletedFilesOnly=t.isCloudDocSelected=t.isCloudDocFileSharedWithMeSelected=t.isAppFolderSelected=t.isNoAccessSharedFolderSelected=t.hasUnmountedOrMultipleNamespaces=t.hasNewOwnershipModel=t.hasContentManagerAndSuperAdmin=t.actionBarSelectionType=t.isSelectedBackupFolder=t.isInsideBackupFolder=t.isCreatingSharedLink=t.experiments=t.overQuotaData=t.isGridView=t.viewType=t.currentFolderInfo=t.context=t.selectedFiles=t.user=t.actionSource=t.actionSurface=t.isSearchMode=t.defaultExperiments=t.defaultOverQuotaData=void 0,T=o.__importDefault(T),t.defaultOverQuotaData={isOverFreeQuota:!1,hasExcludedNsIds:!1},t.defaultExperiments={expVaultEnableViewOnlySharing:!1,expSpacesFssDropdown:!1,expShowTransferInShare:!1,expTidyUpBrowse:!1,expTidyUpSmartPocEnabled:!1,expTidyUpIATester:!1,expFlowsAutomatedFolderUI:!1,expFlowsFileConversionUI:!1,expActionBarRedesign:"OFF",expFlowsManualArchive:!1,expFlowsManualVideoRemuxUi:!1,expFlowsManualVideoGifUi:!1,expFssEntryPointForSpaces:!1,expPgEsignDiscoveryFileHover:!1,expFlowsApprovalFlowVariant:"OFF",expFlowsVersioningFlowVariant:"OFF",expEnableSharingNSF:!1,expIsTransferEnabled:!1,expMultiObjectSharingRedesign:"OFF",expFlowsAudioConversionUi:!1,expFlowsBatchSaveAsUi:!1,expCollectionsInBrowse:!1},t.isSearchMode=(e,t)=>t.isSearchMode,t.actionSurface=(e,t)=>t.actionSurface,t.actionSource=(e,t)=>t.actionSource,t.user=(e,t)=>t.userSelector(e),t.selectedFiles=(e,t)=>t.selectedFilesSelector(e),t.context=(e,t)=>t.contextSelector(e),t.currentFolderInfo=(e,t)=>t.currentFolderInfo(e),t.viewType=(e,t)=>d.selectViewType(e,{instanceId:t.isSearchMode?_.SEARCH_FILES_VIEW_ID:c.BROWSE_FILES_VIEW_ID}),t.isGridView=(e,t)=>{const o=t.isSearchMode?_.SEARCH_FILES_VIEW_ID:c.BROWSE_FILES_VIEW_ID;return d.selectIsGridView(e,{instanceId:o})},t.overQuotaData=(e,t)=>t.overQuotaDataSelector(e),t.experiments=(e,t)=>t.experimentSelector(e),t.isCreatingSharedLink=(e,t)=>Boolean(t.isCreatingSharedLinkSelector),t.isInsideBackupFolder=(e,t)=>t.isInsideBackupFolder(e),t.isSelectedBackupFolder=(e,t)=>t.isSelectedBackupFolder(e),t.actionBarSelectionType=i.createSelector(t.selectedFiles,t.isInsideBackupFolder,t.isSelectedBackupFolder,(e,t,o)=>o?r.ActionBarSelectionType.BACKUP_FOLDER:t?r.ActionBarSelectionType.BACKUP_CONTENT:0===e.count()?r.ActionBarSelectionType.NONE:e.some(e=>e.type===a.FileTypes.VAULT_FOLDER)?r.ActionBarSelectionType.VAULT:1===e.count()?e.first().is_dir?r.ActionBarSelectionType.FOLDER:r.ActionBarSelectionType.FILE:r.ActionBarSelectionType.MULTIPLE),t.hasContentManagerAndSuperAdmin=i.createSelector(t.user,e=>p.GoldenGate.hasContentManagerAndSuperAdmin(e.id)),t.hasNewOwnershipModel=i.createSelector(t.user,e=>p.GoldenGate.hasNewOwnershipModel(e.id)),t.hasUnmountedOrMultipleNamespaces=i.createSelector(t.selectedFiles,e=>{const t=e.first();return e.some(e=>e.is_unmounted||e.ns_id!==t.ns_id)}),t.isNoAccessSharedFolderSelected=i.createSelector(t.selectedFiles,e=>e.some(e=>l.File.isNoAccessSharedFolder(e))),t.isAppFolderSelected=i.createSelector(t.selectedFiles,e=>e.some(e=>e.type===a.FileTypes.SANDBOX)),t.isCloudDocFileSharedWithMeSelected=i.createSelector(t.selectedFiles,e=>e.some(e=>e.is_cloud_doc&&e instanceof l.FileSharedWithMe)),t.isCloudDocSelected=i.createSelector(t.selectedFiles,e=>e.some(e=>e.is_cloud_doc)),t.isDeletedFilesOnly=i.createSelector(t.selectedFiles,t.isInsideBackupFolder,(e,t)=>t?!!e.count()&&e.every(e=>e.isDeleted):e.every(e=>e.isDeleted||e.is_unmounted)),t.isFamilySharedFolderSelected=i.createSelector(t.selectedFiles,e=>e.some(e=>e.type===a.FileTypes.FAMILY_SHARED_FOLDER)),t.isFileSharedWithMeSelected=i.createSelector(t.selectedFiles,e=>e.some(e=>e instanceof l.FileSharedWithMe)),t.isLiveFilesOnly=i.createSelector(t.selectedFiles,e=>e.every(e=>!e.isDeleted&&!e.is_unmounted)),t.isNothingSelected=i.createSelector(t.selectedFiles,e=>0===e.count()),t.isPermanentDeleteDisabled=i.createSelector(t.selectedFiles,t.context,(e,t)=>t.permanentDeletionDisabledStateByNSID[t.currentNSID]||!1),t.isPnmLinkNodeSelected=i.createSelector(t.selectedFiles,e=>e.some(e=>{var t;return!!(null===(t=e.per_node_metadata)||void 0===t?void 0:t.link_node)})),t.isPnmSuppressDeleteSelected=i.createSelector(t.selectedFiles,e=>e.some(e=>{var t;return!!(null===(t=e.per_node_metadata)||void 0===t?void 0:t.suppress_delete)})),t.isPnmSuppressMoveSelected=i.createSelector(t.selectedFiles,e=>e.some(e=>{var t;return!!(null===(t=e.per_node_metadata)||void 0===t?void 0:t.suppress_move)})),t.isPnmSuppressShareSelected=i.createSelector(t.selectedFiles,e=>e.some(e=>{var t,o;return!!(null===(t=e.per_node_metadata)||void 0===t?void 0:t.suppress_ns_partition)||!!(null===(o=e.per_node_metadata)||void 0===o?void 0:o.suppress_shared_link)})),t.isRestrictedPathSelected=i.createSelector(t.selectedFiles,t.context,(e,t)=>e.some(e=>!l.File.canViewFileMembers(e,t))),t.isSelectionFetchFolderSizeStatusOnly=i.createSelector(t.selectedFiles,e=>e.every(e=>null==e.fetchFolderSizesStatus)),t.isSelectionFilesOnly=i.createSelector(t.selectedFiles,e=>e.every(e=>e.type===a.FileTypes.FILE)),t.isSelectionFoldersOnly=i.createSelector(t.selectedFiles,e=>e.every(e=>e.is_dir)),t.isSelectionWritable=i.createSelector(t.selectedFiles,t.context,(e,t)=>t.isCurrentPathWriteable()&&!e.some(e=>e.read_only)),t.isSingleSelection=i.createSelector(t.selectedFiles,e=>1===e.count()),t.isSingleSelectionFile=i.createSelector(t.selectedFiles,e=>1===e.count()&&!e.first().is_dir),t.isSingleSelectionFolder=i.createSelector(t.selectedFiles,e=>1===e.count()&&e.first().is_dir),t.isTeamMemberFolderSelected=i.createSelector(t.selectedFiles,e=>e.some(e=>e.type===a.FileTypes.TEAM_MEMBER_FOLDER)),t.isTeamSharedFolderSelected=i.createSelector(t.selectedFiles,e=>e.some(e=>e.type===a.FileTypes.TEAM_SHARED_FOLDER)),t.isUnityOpenAvailable=(e,o)=>{const i=t.selectedFiles(e,o).first();return t.isSingleSelection(e,o)&&!t.isFileSharedWithMeSelected(e,o)&&S.UnityFeatures.isUnitySupported()&&(null===T.default||void 0===T.default?void 0:T.default.is_cached_and_locally_available(i.ns_id,i.ns_path))},t.isVaultFolderSelected=i.createSelector(t.selectedFiles,e=>e.some(e=>e.type===a.FileTypes.VAULT_FOLDER)),t.flowsFolderRule=(e,t,o)=>t.flowsFolderRule(e,o),t.getFlowsFolderRule=(e,o)=>{const i=t.selectedFiles(e,o).first(),s=t.currentFolderInfo(e,o);return i&&t.flowsFolderRule(e,o,i.fq_path)||!i&&s&&t.flowsFolderRule(e,o,s.fq_path)||void 0},t.isCdmRoot=i.createSelector(t.user,t.context,(e,t)=>e.is_cdm_member&&"/"===t.currentFQPath),t.isSameDirectory=i.createSelector(t.selectedFiles,e=>{const t=e.toArray().map(e=>e.fq_path);return n.inSameDirectory(t)}),t.browsePostTTIData=(e,t)=>{if(t.browsePostTTIData)return t.browsePostTTIData(e)},t.hasLinkedMobile=(e,t)=>{if(t.hasLinkedMobile)return t.hasLinkedMobile(e)},t.accessibilityConfig=(e,t)=>{if(t.accessibilityConfig)return t.accessibilityConfig(e)},t.isRightRailCollapsed=(e,t)=>t.rightRailCollapsedState(e),t.expActionBarRedesignIsOn=i.createSelector(t.experiments,e=>"OFF"!==e.expActionBarRedesign&&"CONTROL"!==e.expActionBarRedesign),t.expMultiObjectSharingRedesignIsOn=i.createSelector(t.experiments,e=>"ON"===e.expMultiObjectSharingRedesign),t.getActionHandlerArgs=i.createSelector(t.user,t.selectedFiles,t.viewType,t.isSearchMode,t.actionSurface,t.actionSource,t.context,t.isRightRailCollapsed,(e,t,o,i,s,n,a,r)=>({user:e,files:t,isSearchMode:i,viewType:o,actionSurface:s,actionSource:n,context:a,rightRailState:r?"collapsed":"opened"})),t.getSearchScenarioActions=i.createSelector(t.actionBarSelectionType,t.expActionBarRedesignIsOn,(e,o)=>o?t.expSearchActionsMap[e]:t.searchActionsMap[e]),t.getInlineScenarioActions=(e,t,o=!1,i=!1)=>{const n={};if(i)n.alwaysInOverflow=e.alwaysInOverflow;else{const t=(e.alwaysAtTopLevel||[]).concat(e.atTopLevelIfSpace||[]).concat([].concat.apply([],e.alwaysInOverflow)).filter(e=>e!==s.ActionBarActionTypes.CREATE);n.alwaysInOverflow=[t]}if(!t){const e=[];o?e.push(s.ActionBarActionTypes.SHARE_COPY_LINK,s.ActionBarActionTypes.SHARE_MODAL):e.push(s.ActionBarActionTypes.SHARE_MODAL,s.ActionBarActionTypes.SHARE_COPY_LINK,s.ActionBarActionTypes.ADD_TO_COLLECTION),n.alwaysAtTopLevel=e}return n},t.getSearchInlineScenarioActions=i.createSelector(t.actionBarSelectionType,t.expActionBarRedesignIsOn,t.isSelectedBackupFolder,(e,o,i)=>t.getInlineScenarioActions(o?t.expSearchActionsMap[e]:t.searchActionsMap[e],i,!1,o)),t.getSearchInlineOverflowMenuActions=i.createSelector(t.actionBarSelectionType,t.expActionBarRedesignIsOn,(e,o)=>t.getInlineScenarioActions(o?t.expSearchActionsMap[e]:t.searchActionsMap[e],!0,!1,o)),t.getSearchSidebarScenarioActions=i.createSelector(t.actionBarSelectionType,e=>t.searchSidebarActionsMap[e]),t.copyActionBarActions=e=>{const{alwaysAtTopLevel:t,atTopLevelIfSpace:o,alwaysInOverflow:i}=e,s={};return s.alwaysAtTopLevel=null==t?void 0:t.slice(),s.atTopLevelIfSpace=null==o?void 0:o.slice(),s.alwaysInOverflow=null==i?void 0:i.map(e=>e.slice()),s},t.createSearchActionBarAccessibilityConfigSelector=()=>i.createSelector(t.selectedFiles,e=>{if(0!==e.size)return{primaryActionContext:void 0,secondaryActionsContext:{firstEntryAccessibilityHint:A.getFilename(e.first()),noOfEntries:e.size}}}),t.searchActionsMap={[r.ActionBarSelectionType.NONE]:{},[r.ActionBarSelectionType.FILE]:{atTopLevelIfSpace:[s.ActionBarActionTypes.SHARE,s.ActionBarActionTypes.SHARE_MODAL,s.ActionBarActionTypes.SHARE_COPY_LINK,s.ActionBarActionTypes.OPEN,s.ActionBarActionTypes.SEND_FOR_SIGNATURE,s.ActionBarActionTypes.DOWNLOAD,s.ActionBarActionTypes.GO_TO_FOLDER,s.ActionBarActionTypes.MOVE,s.ActionBarActionTypes.COPY,s.ActionBarActionTypes.RENAME,s.ActionBarActionTypes.RESTORE,s.ActionBarActionTypes.PERMANENT_DELETE],alwaysInOverflow:[[s.ActionBarActionTypes.DELETE,s.ActionBarActionTypes.REMOVE,s.ActionBarActionTypes.COMMENT,s.ActionBarActionTypes.ADD_TO_COLLECTION,s.ActionBarActionTypes.STAR,s.ActionBarActionTypes.UNSTAR,s.ActionBarActionTypes.SAVE_NEW_VERSION,s.ActionBarActionTypes.REQUEST_APPROVAL,s.ActionBarActionTypes.VERSION_HISTORY,s.ActionBarActionTypes.OPEN_MAC_DESKTOP,s.ActionBarActionTypes.OPEN_WINDOWS_DESKTOP,s.ActionBarActionTypes.MANAGE_AS_ADMIN]]},[r.ActionBarSelectionType.FOLDER]:{atTopLevelIfSpace:[s.ActionBarActionTypes.SHARE,s.ActionBarActionTypes.SHARE_MODAL,s.ActionBarActionTypes.SHARE_COPY_LINK,s.ActionBarActionTypes.DOWNLOAD,s.ActionBarActionTypes.GO_TO_FOLDER,s.ActionBarActionTypes.MOVE,s.ActionBarActionTypes.COPY,s.ActionBarActionTypes.RENAME,s.ActionBarActionTypes.RESTORE,s.ActionBarActionTypes.PERMANENT_DELETE],alwaysInOverflow:[[s.ActionBarActionTypes.DELETE,s.ActionBarActionTypes.REQUEST_FILES,s.ActionBarActionTypes.STAR,s.ActionBarActionTypes.UNSTAR,s.ActionBarActionTypes.EVENTS,s.ActionBarActionTypes.OPEN_MAC_DESKTOP,s.ActionBarActionTypes.OPEN_WINDOWS_DESKTOP,s.ActionBarActionTypes.MANAGE_AS_ADMIN]]},[r.ActionBarSelectionType.MULTIPLE]:{atTopLevelIfSpace:[s.ActionBarActionTypes.DOWNLOAD,s.ActionBarActionTypes.GO_TO_FOLDER,s.ActionBarActionTypes.MOVE,s.ActionBarActionTypes.COPY,s.ActionBarActionTypes.DELETE,s.ActionBarActionTypes.RESTORE,s.ActionBarActionTypes.PERMANENT_DELETE],alwaysInOverflow:[[s.ActionBarActionTypes.MANAGE_AS_ADMIN]]},[r.ActionBarSelectionType.VAULT]:{},[r.ActionBarSelectionType.BACKUP_CONTENT]:{alwaysAtTopLevel:[s.ActionBarActionTypes.DOWNLOAD],atTopLevelIfSpace:[s.ActionBarActionTypes.REWIND,s.ActionBarActionTypes.VERSION_HISTORY]},[r.ActionBarSelectionType.BACKUP_FOLDER]:{alwaysAtTopLevel:[s.ActionBarActionTypes.DOWNLOAD],atTopLevelIfSpace:[s.ActionBarActionTypes.REWIND,s.ActionBarActionTypes.DELETE]}},t.expSearchActionsMap={[r.ActionBarSelectionType.NONE]:{},[r.ActionBarSelectionType.FILE]:{atTopLevelIfSpace:[s.ActionBarActionTypes.DOWNLOAD,s.ActionBarActionTypes.OPEN,s.ActionBarActionTypes.DELETE,s.ActionBarActionTypes.ADD_TO_COLLECTION,s.ActionBarActionTypes.RESTORE,s.ActionBarActionTypes.PERMANENT_DELETE,s.ActionBarActionTypes.VAULT_LOCK,s.ActionBarActionTypes.VAULT_UNLOCK,s.ActionBarActionTypes.CONVERT_TO_ARCHIVE],alwaysInOverflow:[[s.ActionBarActionTypes.SHARE,s.ActionBarActionTypes.SHARE_COPY_LINK,s.ActionBarActionTypes.OPEN,s.ActionBarActionTypes.DOWNLOAD,s.ActionBarActionTypes.REQUEST_APPROVAL,s.ActionBarActionTypes.SAVE_AS],[s.ActionBarActionTypes.DELETE,s.ActionBarActionTypes.RESTORE,s.ActionBarActionTypes.PERMANENT_DELETE,s.ActionBarActionTypes.REMOVE,s.ActionBarActionTypes.RENAME,s.ActionBarActionTypes.MOVE,s.ActionBarActionTypes.COPY],[s.ActionBarActionTypes.ADD_TO_COLLECTION,s.ActionBarActionTypes.STAR,s.ActionBarActionTypes.UNSTAR,s.ActionBarActionTypes.PIN_TO,s.ActionBarActionTypes.PIN_TO_ROOT,s.ActionBarActionTypes.UNPIN],[s.ActionBarActionTypes.VERSION_HISTORY,s.ActionBarActionTypes.FILE_LOCK,s.ActionBarActionTypes.FILE_UNLOCK,s.ActionBarActionTypes.FILE_REQUEST_UNLOCK]]},[r.ActionBarSelectionType.FOLDER]:{atTopLevelIfSpace:[s.ActionBarActionTypes.DOWNLOAD,s.ActionBarActionTypes.OPEN,s.ActionBarActionTypes.DELETE,s.ActionBarActionTypes.RESTORE,s.ActionBarActionTypes.PERMANENT_DELETE,s.ActionBarActionTypes.CONVERT_TO_ARCHIVE],alwaysInOverflow:[[s.ActionBarActionTypes.SHARE,s.ActionBarActionTypes.SHARE_COPY_LINK,s.ActionBarActionTypes.OPEN,s.ActionBarActionTypes.DOWNLOAD,s.ActionBarActionTypes.EDIT_FOLDER_AUTOMATION,s.ActionBarActionTypes.ADD_FOLDER_AUTOMATION],[s.ActionBarActionTypes.DELETE,s.ActionBarActionTypes.RENAME,s.ActionBarActionTypes.MOVE,s.ActionBarActionTypes.COPY],[s.ActionBarActionTypes.STAR,s.ActionBarActionTypes.UNSTAR,s.ActionBarActionTypes.UNPIN,s.ActionBarActionTypes.PIN_TO,s.ActionBarActionTypes.PIN_TO_ROOT],[s.ActionBarActionTypes.SPACES_REDIRECT,s.ActionBarActionTypes.FOLLOW,s.ActionBarActionTypes.FOLLOWING,s.ActionBarActionTypes.TIDY_UP,s.ActionBarActionTypes.REQUEST_FILES,s.ActionBarActionTypes.REWIND]]},[r.ActionBarSelectionType.MULTIPLE]:{atTopLevelIfSpace:[s.ActionBarActionTypes.DOWNLOAD,s.ActionBarActionTypes.DELETE,s.ActionBarActionTypes.RESTORE,s.ActionBarActionTypes.ADD_TO_COLLECTION,s.ActionBarActionTypes.PERMANENT_DELETE,s.ActionBarActionTypes.CONVERT_TO_ARCHIVE],alwaysInOverflow:[[s.ActionBarActionTypes.SHARE,s.ActionBarActionTypes.DOWNLOAD,s.ActionBarActionTypes.ADD_TO_COLLECTION,s.ActionBarActionTypes.DELETE,s.ActionBarActionTypes.RESTORE,s.ActionBarActionTypes.PERMANENT_DELETE,s.ActionBarActionTypes.MOVE,s.ActionBarActionTypes.COPY]]},[r.ActionBarSelectionType.VAULT]:{},[r.ActionBarSelectionType.BACKUP_CONTENT]:{alwaysAtTopLevel:[s.ActionBarActionTypes.DOWNLOAD],atTopLevelIfSpace:[s.ActionBarActionTypes.REWIND,s.ActionBarActionTypes.VERSION_HISTORY]},[r.ActionBarSelectionType.BACKUP_FOLDER]:{alwaysAtTopLevel:[s.ActionBarActionTypes.DOWNLOAD],atTopLevelIfSpace:[s.ActionBarActionTypes.REWIND,s.ActionBarActionTypes.DELETE]}},t.searchSidebarActionsMap={[r.ActionBarSelectionType.NONE]:{},[r.ActionBarSelectionType.FILE]:{atTopLevelIfSpace:[s.ActionBarActionTypes.SHARE]},[r.ActionBarSelectionType.FOLDER]:{atTopLevelIfSpace:[s.ActionBarActionTypes.SHARE]},[r.ActionBarSelectionType.MULTIPLE]:{atTopLevelIfSpace:[s.ActionBarActionTypes.SHARE]},[r.ActionBarSelectionType.VAULT]:{}},t.showTransferInShareDropdown=(e,o)=>t.experiments(e,o).expShowTransferInShare,t.isFolderTidyable=i.createSelector(t.isNothingSelected,u.unsortedFiles,(e,t)=>{if(e){const e=t,o=0===e.count(),i=e.every(e=>e.is_dir);return!o&&!i}return!1}),t.swapFollowAndTidy=i.createSelector(t.isFolderTidyable,t.experiments,(e,t)=>!!t.expTidyUpBrowse&&e),t.getAutoFolderEligibility=i.createSelector(t.context,t.currentFolderInfo,(e,t)=>({isCurrentFolderEligibleForAutomation:t&&e.isInFolderMode&&!e.isCurrentlyInRoot&&!e.isInsideTeamFolderRoot&&!e.isInsideVaultFolder&&t.type!==a.FileTypes.TEAM_MEMBER_FOLDER&&!l.File.isReadOnlySharedFolder(t),isSubfolderEligibleForAutomation:t&&!e.isInsideVaultFolder&&!l.File.isReadOnlySharedFolder(t)})),t.isBusinessSpaceFound=(e,t)=>!!t.isBusinessSpaceFound&&t.isBusinessSpaceFound(e),t.businessSpaceXgid=(e,t)=>t.businessSpaceXgid?t.businessSpaceXgid(e):""})),define("metaserver/static/js/modules/clean/react/action_bar/file_actions/move_action",["require","exports","reselect","dig-components/icons/src","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","metaserver/static/js/modules/clean/react/action_bar/action_bar_strings","metaserver/static/js/modules/clean/react/action_bar/file_actions/file_actions_selectors","metaserver/static/js/modules/clean/react/action_bar/file_actions/move"],(function(e,t,o,i,s,n,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createMoveActionSelector=t.moveActionHandler=void 0,t.moveActionHandler=(e,t)=>{const o=a.context(e,t),{isOverFreeQuota:i,hasExcludedNsIds:s}=a.overQuotaData(e,t),{expEnableSharingNSF:n}=a.experiments(e,t);r.handleMove(a.getActionHandlerArgs(e,t),o,{isOverFreeQuota:i,hasExcludedNsIds:s,expEnableSharingNSF:n})};const c=(e,t)=>a.isLiveFilesOnly(e,t)&&!a.isFileSharedWithMeSelected(e,t)&&!a.isTeamSharedFolderSelected(e,t)&&!a.isTeamMemberFolderSelected(e,t)&&!a.isPnmLinkNodeSelected(e,t)&&!a.isPnmSuppressMoveSelected(e,t)&&!a.isVaultFolderSelected(e,t);t.createMoveActionSelector=()=>o.createSelector(a.context,a.selectedFiles,c,(e,t,o)=>o?{actionType:s.ActionBarActionTypes.MOVE,isEnabled:e.isCurrentPathWriteable()&&!t.some(e=>e.read_only),text:n.MOVE_ACTION_STRING,icon:i.MoveLine}:void 0)})),define("metaserver/static/js/modules/clean/react/action_bar/file_actions/open_action",["require","exports","tslib","react","reselect","dig-components/icons/src","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","metaserver/static/js/modules/clean/file_store/utils","metaserver/static/js/modules/clean/react/action_bar/action_bar_strings","metaserver/static/js/modules/clean/react/action_bar/file_actions/file_actions_selectors","metaserver/static/js/modules/clean/react/browse/file_actions/action_handlers","metaserver/static/js/modules/clean/react/extensions/extensions_menu_component_v2","metaserver/static/js/modules/clean/react/file_viewer/unity/with_unity","metaserver/static/js/modules/clean/web_user_action_events","metaserver/static/js/modules/clean/react/browse/file_actions/action_handlers","metaserver/static/js/modules/clean/react/action_bar/file_actions/open_desktop_action","metaserver/static/js/modules/clean/react/action_bar/file_actions/go_to_folder_action","metaserver/static/js/modules/clean/reel/lib/utils"],(function(e,t,o,i,s,n,a,r,c,l,d,A,_,p,T,S,u,E){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.openActionMenuToggleHandler=t.createOpenActionSelector=t.openActionHandler=void 0,i=o.__importDefault(i),d=o.__importStar(d);const m={surface:"action-bar"};t.openActionHandler=(e,t,o)=>{const i=null==o?void 0:o.menuValue;d.handleExtensionClick(l.getActionHandlerArgs(e,t),t.actionSurface,(null==i?void 0:i.actionName)||(null==i?void 0:i.userAction)),null==i||i.handler()};const O=(e,t)=>()=>{u.goToFolderActionHandler(e,t)},I=s.createSelector(l.getActionHandlerArgs,e=>({openInNewTabActionHandler:()=>{d.handleOpenInNewTab(e)},openDesktopActionHandler:()=>{T.handleOpenInDesktop(e)},replayActionHandler:()=>{d.handleReplay(e)},previewActionHandler:()=>{d.handlePreview(e,p.ActionSourceValue.OVERFLOW_MENU)}})),N=(e,t)=>l.isSingleSelection(e,t)&&l.isLiveFilesOnly(e,t)&&!l.isFileSharedWithMeSelected(e,t)&&!l.isTeamSharedFolderSelected(e,t)&&!l.isTeamMemberFolderSelected(e,t)&&!l.isPnmLinkNodeSelected(e,t)&&!l.context(e,t).isInsideVaultFolder,R=[".aac",".aif",".aiff",".flac",".m4a",".m4r",".mp3",".oga",".ogg",".wav",".wma"].concat([".3gp",".3gpp",".3gpp2",".asf",".avi",".dv",".flv",".m2t",".m2ts",".m4v",".mkv",".mov",".mp4",".mpeg",".mpg",".mts",".mxf",".oggtheora",".ogv",".rm",".ts",".vob",".webm",".wmv"]);t.createOpenActionSelector=()=>s.createSelector(l.user,l.selectedFiles,N,S.showOpenDesktopAction,I,O,l.expActionBarRedesignIsOn,u.goToFolderAction,l.isSearchMode,l.getAutoFolderEligibility,(e,t,o,s,r,l,d,A,_,p)=>{const T=t.first(),S=o&&!T.is_dir?r.previewActionHandler:void 0,u=E.reelOpenWithEnabled()&&o&&R.includes(T.ext)?r.replayActionHandler:void 0,O=d&&o&&s?r.openDesktopActionHandler:void 0,I=d&&o&&A&&_?l:void 0,N=o?r.openInNewTabActionHandler:void 0;return o?{actionType:a.ActionBarActionTypes.OPEN,isEnabled:!0,text:d?_?c.EXP_OPEN_ACTION_STRING:c.EXP_OPEN_IN_ACTION_STRING:c.OPEN_ACTION_STRING,icon:n.OpenLine,menu:{type:a.ActionBarMenuType.CUSTOM_DROPDOWN,menuContent:i.default.createElement(f,{user:e,file:T,telemetryContext:m,isInActionBar:!0,previewActionHandler:S,replayActionHandler:u,openInNewTabActionHandler:N,openDesktopActionHandler:O,goToFolderActionHandler:I,isCurrentFolderEligibleForAutomation:p.isCurrentFolderEligibleForAutomation,isSubfolderEligibleForAutomation:p.isSubfolderEligibleForAutomation})}}:void 0});const f=e=>r.isBrowseFile(e.file)?i.default.createElement(_.WithUnity,{file:e.file,user:e.user,render:t=>i.default.createElement(A.ExtensionsPopoverContent,Object.assign({},e,{unityInfo:t}))}):i.default.createElement(A.ExtensionsPopoverContent,Object.assign({},e));f.displayName="OpenMenuContent",t.openActionMenuToggleHandler=(e,t,o)=>{o&&d.handleExtensionDropdownOpen(l.getActionHandlerArgs(e,t),t.actionSurface)}})),define("metaserver/static/js/modules/clean/react/action_bar/file_actions/permanent_delete_action",["require","exports","tslib","reselect","dig-components/icons/src","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","metaserver/static/js/modules/clean/react/action_bar/action_bar_strings","metaserver/static/js/modules/clean/react/action_bar/file_actions/file_actions_selectors","metaserver/static/js/modules/clean/react/browse/file_actions/action_handlers"],(function(e,t,o,i,s,n,a,r,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createPermanentDeleteActionSelector=t.permanentDeleteActionHandler=void 0,c=o.__importStar(c),t.permanentDeleteActionHandler=(e,t)=>{const o=r.context(e,t);c.handlePermanentDelete(r.getActionHandlerArgs(e,t),o)};const l=(e,t)=>r.isDeletedFilesOnly(e,t)&&!r.hasUnmountedOrMultipleNamespaces(e,t)&&!r.isPermanentDeleteDisabled(e,t),d={actionType:n.ActionBarActionTypes.PERMANENT_DELETE,isEnabled:!0,text:a.PERMANENT_DELETE_ACTION_STRING,icon:s.DeleteForeverLine};t.createPermanentDeleteActionSelector=()=>i.createSelector(l,e=>e?d:void 0)})),define("metaserver/static/js/modules/clean/react/action_bar/file_actions/rename_action",["require","exports","tslib","reselect","dig-components/icons/src","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","metaserver/static/js/modules/clean/filetypes","metaserver/static/js/modules/clean/react/action_bar/action_bar_strings","metaserver/static/js/modules/clean/react/action_bar/file_actions/file_actions_selectors","metaserver/static/js/modules/clean/react/browse/file_actions/action_handlers"],(function(e,t,o,i,s,n,a,r,c,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createRenameActionSelector=t.renameActionHandler=void 0,l=o.__importStar(l),t.renameActionHandler=(e,t)=>{c.selectedFiles(e,t).first().type===a.FileTypes.TEAM_SHARED_FOLDER?l.handleRenameTeamFolder(c.getActionHandlerArgs(e,t)):l.handleRename(c.getActionHandlerArgs(e,t))};const d=(e,t)=>c.isSingleSelection(e,t)&&c.isLiveFilesOnly(e,t)&&(c.isTeamSharedFolderSelected(e,t)?c.hasContentManagerAndSuperAdmin(e,t):!(c.isPnmSuppressMoveSelected(e,t)||c.isPnmLinkNodeSelected(e,t)||c.isVaultFolderSelected(e,t)||c.isFileSharedWithMeSelected(e,t)));t.createRenameActionSelector=()=>i.createSelector(d,c.context,c.selectedFiles,(e,t,o)=>e?{actionType:n.ActionBarActionTypes.RENAME,isEnabled:t.isCurrentPathWriteable()&&!o.some(e=>e.read_only),text:r.RENAME_ACTION_STRING,icon:s.CursorLine}:void 0)})),define("metaserver/static/js/modules/clean/react/action_bar/file_actions/restore_action",["require","exports","tslib","reselect","dig-components/icons/src","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","metaserver/static/js/modules/clean/react/action_bar/action_bar_strings","metaserver/static/js/modules/clean/react/action_bar/file_actions/file_actions_selectors","metaserver/static/js/modules/clean/react/browse/file_actions/action_handlers"],(function(e,t,o,i,s,n,a,r,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createRestoreActionSelector=t.showRestoreAction=t.restoreActionHandler=void 0,c=o.__importStar(c),t.restoreActionHandler=(e,t)=>{const o=r.context(e,t);c.handleRestore(r.getActionHandlerArgs(e,t),o)},t.showRestoreAction=(e,t)=>{if(r.isNothingSelected(e,t)||!r.isDeletedFilesOnly(e,t)||r.hasUnmountedOrMultipleNamespaces(e,t))return!1;const o=r.selectedFiles(e,t).first().target_ns;return!(r.isSingleSelectionFolder(e,t)&&o&&0!==o)||r.context(e,t).currentNSAllowsNesting},t.createRestoreActionSelector=()=>i.createSelector(t.showRestoreAction,r.context,r.selectedFiles,(e,t,o)=>e?{actionType:n.ActionBarActionTypes.RESTORE,isEnabled:t.isCurrentPathWriteable()&&!o.some(e=>e.read_only),text:a.RESTORE_ACTION_STRING,icon:s.RestoreLine}:void 0)})),define("metaserver/static/js/modules/clean/react/action_bar/file_actions/share_action",["require","exports","tslib","react","reselect","dig-components/icons/src","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","metaserver/static/js/modules/clean/react/action_bar/action_bar_strings","metaserver/static/js/modules/clean/react/action_bar/file_actions/file_actions_selectors","metaserver/static/js/modules/clean/react/action_bar/file_actions/share","metaserver/static/js/modules/clean/react/browse/global_actions/browse_global_actions_handlers","metaserver/static/js/modules/clean/react/browse/global_actions/browse_global_actions_helpers","metaserver/static/js/modules/clean/react/browse/models","metaserver/static/js/modules/clean/react/extensions/data/types","metaserver/static/js/modules/clean/react/extensions/split_share_button","metaserver/static/js/modules/clean/react/browse/file_actions/action_handlers","metaserver/static/js/modules/clean/react/browse/browse_actions/browse_add_to_transfer_action","metaserver/static/js/modules/clean/web_user_action_events"],(function(e,t,o,i,s,n,a,r,c,l,d,A,_,p,T,S,u,E){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createShareActionSelector=t.shouldShowShareAction=t.isFssShareEnabled=void 0,i=o.__importDefault(i),d=o.__importStar(d);const m={surface:"action-bar"};t.isFssShareEnabled=(e,t)=>O(e,t),t.shouldShowShareAction=(e,t)=>{const{expMultiObjectSharingRedesign:o}=c.experiments(e,t);return O(e,t,"ON"===o)};const O=(e,t,o=!1)=>{const i=c.context(e,t),{expVaultEnableViewOnlySharing:s}=c.experiments(e,t);return!c.isInsideBackupFolder(e,t)&&(c.isNothingSelected(e,t)?!(c.isCdmRoot(e,t)||i.isCurrentlyInRoot||i.isInsideSandboxFolder||i.isInsideVaultFolder||i.isInFamilySharedFolder):(o||c.isSingleSelection(e,t))&&c.isLiveFilesOnly(e,t)&&!c.isPnmSuppressShareSelected(e,t)&&!c.isPnmLinkNodeSelected(e,t)&&!c.isVaultFolderSelected(e,t)&&!c.isFileSharedWithMeSelected(e,t)&&(!i.isInsideVaultFolder||s)&&!c.isTeamMemberFolderSelected(e,t)&&!c.isAppFolderSelected(e,t))};t.createShareActionSelector=(e=!1,o=!0)=>s.createSelector(t.shouldShowShareAction,c.user,c.selectedFiles,c.context,c.getActionHandlerArgs,c.showTransferInShareDropdown,u.showAddToTransferAction,c.currentFolderInfo,c.isRightRailCollapsed,c.expActionBarRedesignIsOn,c.expMultiObjectSharingRedesignIsOn,(t,s,c,u,O,I,N,R,f,y,v)=>{if(!t||!y&&!o)return;if(0===c.count()&&!R)return;const g=0===c.count()?{files:R?[R]:[],logShareButtonClick:A.getLogSplitShareButtonFunction(s,f),onShowShare:()=>{d.handleSharedFolderClick(s,u)},onDropdownOpen:A.getLogOpenSplitShareFunction(s,f)}:{files:c.toArray(),onShowShare:l.handleSplitShareClick(O,u),onDropdownOpen:l.handleSplitShareOpen(O),logShareButtonClick:l.handleSplitShareLogging(O),onPresentInZoom:l.handlePresentInZoom(O)},M={files:g.files,user:s,variant:"opacity",triggerType:p.TriggerType.SidebarPrimaryButton,onShowShare:g.onShowShare,onDropdownOpen:g.onDropdownOpen,logShareButtonClick:g.logShareButtonClick,onPresentInZoom:g.onPresentInZoom,context:m,shouldUsePortalPopover:!0,showLeftDigIcon:!0,showTransferButton:I&&!!N,onAddToTransfer:()=>S.handleAddToTransfer(O),retrievalSource:O.isSearchMode?E.RetrievalSourceValue.SEARCH:E.RetrievalSourceValue.BROWSE,actionSurface:O.actionSurface},F=e&&c.count()>1&&v;return{actionType:a.ActionBarActionTypes.SHARE,isEnabled:0===c.count()||c.every(e=>_.File.canViewFileMembers(e,u)),text:F?r.SHARE_ALL_SELECTED_ACTION_STRING:r.SHARE_ACTION_STRING,icon:n.ShareArrowLine,button:e?void 0:i.default.createElement(T.SplitShareButton,Object.assign({},M,{renderMenuOnly:!1,expActionBarRedesignEnabled:y})),menu:e?{type:a.ActionBarMenuType.CUSTOM_DROPDOWN,menuContent:i.default.createElement(T.SplitShareButton,Object.assign({},M,{renderMenuOnly:!0}))}:void 0}})})),define("metaserver/static/js/modules/clean/react/action_bar/file_actions/star_action",["require","exports","tslib","reselect","dig-components/icons/src","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","metaserver/static/js/modules/clean/react/action_bar/action_bar_strings","metaserver/static/js/modules/clean/react/action_bar/file_actions/file_actions_selectors","metaserver/static/js/modules/clean/react/browse/file_actions/action_handlers","metaserver/static/js/modules/clean/react/starred/browse_exports","metaserver/static/js/modules/clean/react/browse/models","metaserver/static/js/modules/constants/web_experience_constants","metaserver/static/js/modules/clean/react/starred/redux/selectors"],(function(e,t,o,i,s,n,a,r,c,l,d,A,_){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createStarActionSelector=t.starActionHandler=void 0,c=o.__importStar(c),t.starActionHandler=(e,t)=>{c.handleStar(r.getActionHandlerArgs(e,t))};const p=A.STARRED_STORE_REDUX?(e,t)=>r.isSingleSelection(e,t)&&r.isLiveFilesOnly(e,t)&&!r.isFileSharedWithMeSelected(e,t)&&!r.context(e,t).isInsideVaultFolder&&!_.getIsStarred(e,r.selectedFiles(e,t).first().file_id):(e,t)=>r.isSingleSelection(e,t)&&r.isLiveFilesOnly(e,t)&&!r.isFileSharedWithMeSelected(e,t)&&!r.context(e,t).isInsideVaultFolder&&!l.StarredStore.getIsStarred({id:r.selectedFiles(e,t).first().file_id,type:l.HOME_RESOURCE_ID_TYPE.ENCODED_FILE_OBJ_ID});t.createStarActionSelector=()=>i.createSelector(p,r.selectedFiles,(e,t)=>e?{actionType:n.ActionBarActionTypes.STAR,isEnabled:!d.File.isNoAccessSharedFolder(t.first()),text:a.STAR_ACTION_STRING,icon:s.StarLine}:void 0)})),define("metaserver/static/js/modules/clean/react/action_bar/file_actions/unstar_action",["require","exports","tslib","reselect","dig-components/icons/src","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","metaserver/static/js/modules/clean/react/action_bar/action_bar_strings","metaserver/static/js/modules/clean/react/action_bar/file_actions/file_actions_selectors","metaserver/static/js/modules/clean/react/browse/file_actions/action_handlers","metaserver/static/js/modules/clean/react/starred/browse_exports","metaserver/static/js/modules/clean/react/starred/redux/selectors","metaserver/static/js/modules/constants/web_experience_constants"],(function(e,t,o,i,s,n,a,r,c,l,d,A){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createUnstarActionSelector=t.unstarActionHandler=void 0,c=o.__importStar(c),t.unstarActionHandler=(e,t)=>{c.handleUnstar(r.getActionHandlerArgs(e,t))};const _={actionType:n.ActionBarActionTypes.UNSTAR,isEnabled:!0,text:a.UNSTAR_ACTION_STRING,icon:s.StarFill},p=A.STARRED_STORE_REDUX?(e,t)=>r.isSingleSelection(e,t)&&r.isLiveFilesOnly(e,t)&&!r.isFileSharedWithMeSelected(e,t)&&!r.context(e,t).isInsideVaultFolder&&d.getIsStarred(e,r.selectedFiles(e,t).first().file_id):(e,t)=>r.isSingleSelection(e,t)&&r.isLiveFilesOnly(e,t)&&!r.isFileSharedWithMeSelected(e,t)&&!r.context(e,t).isInsideVaultFolder&&l.StarredStore.getIsStarred({id:r.selectedFiles(e,t).first().file_id,type:l.HOME_RESOURCE_ID_TYPE.ENCODED_FILE_OBJ_ID});t.createUnstarActionSelector=()=>i.createSelector(p,e=>e?_:void 0)})),define("metaserver/static/js/modules/clean/react/action_bar/file_actions/version_history_action",["require","exports","tslib","reselect","dig-components/icons/src","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","metaserver/static/js/modules/clean/cloud_docs/constants","metaserver/static/js/modules/clean/react/action_bar/action_bar_strings","metaserver/static/js/modules/clean/react/action_bar/file_actions/file_actions_selectors","metaserver/static/js/modules/clean/react/browse/file_actions/action_handlers","metaserver/static/js/modules/core/i18n","metaserver/static/js/modules/clean/react/action_bar/action_bar_activity_menu"],(function(e,t,o,i,s,n,a,r,c,l,d,A){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createVersionHistoryActionMenuItem=t.createVersionHistoryActionSelector=t.showVersionHistoryAction=t.versionHistoryActionHandler=void 0,l=o.__importStar(l),t.versionHistoryActionHandler=(e,t)=>{l.handleVersions(c.getActionHandlerArgs(e,t))};const _={actionType:n.ActionBarActionTypes.VERSION_HISTORY,isEnabled:!0,text:r.VERSION_HISTORY_ACTION_STRING,icon:s.ClockLine};t.showVersionHistoryAction=(e,t)=>{const o=c.selectedFiles(e,t).first();return c.isSingleSelectionFile(e,t)&&c.isLiveFilesOnly(e,t)&&!c.isFileSharedWithMeSelected(e,t)&&(!c.isCloudDocSelected(e,t)||!a.isPointerByExtension(o.ns_path))&&!c.isPnmLinkNodeSelected(e,t)},t.createVersionHistoryActionSelector=()=>i.createSelector(t.showVersionHistoryAction,e=>e?_:void 0),t.createVersionHistoryActionMenuItem=(e,o)=>t.showVersionHistoryAction(e,o)?{value:{type:n.ActionBarActionTypes.VERSION_HISTORY,menuItem:A.ActivityAction.VERSION_HISTORY},description:d.intl.formatMessage(r.VERSION_HISTORY_ACTION_STRING),icon:s.ClockLine,isEnabled:!0}:void 0})),define("metaserver/static/js/modules/clean/react/action_bar/action_bar_strings",["require","exports","react-intl"],(function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CREATE_PORTAL_ACTION_STRING=t.DELETE_PORTAL_ACTION_STRING=t.ADD_TO_COLLECTION_STRING=t.ACTION_DISABLED_STRING=t.ACTIVITY_ACTION_STRING=t.SAVE_NEW_VERSION_STRING=t.REQUEST_APPROVAL_STRING=t.SEND_FOR_SIGNATURE_ACTION_STRING=t.APPLY_NAMING_CONVENTION_ACTION_STRING=t.EDIT_FOLDER_AUTOMATION_STRING=t.ADD_FOLDER_AUTOMATION_STRING=t.TIDY_UP_ACTION_STRING=t.CONVERT_TO_ARCHIVE_ACTION_STRING=t.FILE_CONVERSION_STRING=t.FOLLOWING_ACTION_STRING=t.FOLLOW_ACTION_STRING=t.SHARE_COPY_LINK_ACTION_TOOLTIP=t.SHARE_COPY_LINK_ACTION_STRING=t.EXP_OPEN_IN_APP_ACTION_STRING=t.OPEN_IN_APP_ACTION_STRING=t.OPEN_WINDOWS_DESKTOP_ACTION_STRING=t.OPEN_MAC_DESKTOP_ACTION_STRING=t.PREVIEW_ACTION_STRING=t.ADD_CONTENT_ACTION_STRING=t.GO_TO_FOLDER_ACTION_STRING=t.SHARE_ALL_SELECTED_ACTION_STRING=t.SHARE_ACTION_STRING=t.SPACES_PROJECTS_RENAME_DROPDOWN_ACTION_STRING=t.ADD_TO_TRANSFER_ACTION_STRING=t.HIDE_DELETED_FILES_ACTION_STRING=t.SHOW_DELETED_FILES_ACTION_STRING=t.RE_ADD_SHARED_FOLDER_ACTION_STRING=t.UNSTAR_ACTION_STRING=t.STAR_ACTION_STRING=t.PERMANENT_DELETE_ACTION_STRING=t.RESTORE_ACTION_STRING=t.PIN_TO_ROOT_ACTION_STRING=t.PIN_TO_ACTION_STRING=t.UNPIN_ACTION_STRING=t.VERSION_HISTORY_ACTION_STRING=t.MANAGE_AS_ADMIN_ACTION_STRING=t.CALCULATE_FOLDER_SIZE_ACTION_STRING=t.EVENTS_ACTION_STRING=t.FILE_REQUEST_UNLOCK_ACTION_STRING=t.FILE_UNLOCK_ACTION_STRING=t.FILE_LOCK_ACTION_STRING=t.VAULT_LOCK_STRING=t.VAULT_UNLOCK_STRING=t.COMMENT_ACTION_STRING=t.ARCHIVE_ACTION_STRING=t.REWIND_ACTION_STRING=t.FOLDER_HISTORY_ACTION_STRING=t.COPY_ACTION_STRING=t.REMOVE_ACTIION_STRING=t.DELETE_ACTION_STRING=t.RENAME_ACTION_STRING=t.MOVE_ACTION_STRING=t.PASTE_ACTION_STRING=t.EXP_OPEN_IN_NEW_TAB_ACTION_STRING=t.EXP_OPEN_IN_ACTION_STRING=t.EXP_OPEN_ACTION_STRING=t.OPEN_ACTION_STRING=t.REQUEST_FILES_ACTION_STRING=t.DOWNLOAD_ACTION_STRING=t.UPLOAD_ACTION_STRING=t.NEW_ACTION_STRING=t.ADD_ACTION_STRING=t.CREATE_ACTION_STRING=void 0,t.CREATE_ACTION_STRING=o.defineMessage({id:"nMBhV+",defaultMessage:"Create"}),t.ADD_ACTION_STRING=o.defineMessage({id:"/6ordy",defaultMessage:"Add"}),t.NEW_ACTION_STRING=o.defineMessage({id:"5o4J9F",defaultMessage:"New"}),t.UPLOAD_ACTION_STRING=o.defineMessage({id:"yZqpE+",defaultMessage:"Upload"}),t.DOWNLOAD_ACTION_STRING=o.defineMessage({id:"3xAi9D",defaultMessage:"Download"}),t.REQUEST_FILES_ACTION_STRING=o.defineMessage({id:"67epwi",defaultMessage:"Request files"}),t.OPEN_ACTION_STRING=o.defineMessage({id:"alhtiG",defaultMessage:"Open"}),t.EXP_OPEN_ACTION_STRING=o.defineMessage({id:"alhtiG",defaultMessage:"Open"}),t.EXP_OPEN_IN_ACTION_STRING=o.defineMessage({id:"MysX8v",defaultMessage:"Open in"}),t.EXP_OPEN_IN_NEW_TAB_ACTION_STRING=o.defineMessage({id:"N6Txco",defaultMessage:"Open in new tab"}),t.PASTE_ACTION_STRING=o.defineMessage({id:"eF4sif",defaultMessage:"Paste"}),t.MOVE_ACTION_STRING=o.defineMessage({id:"GtD4wV",defaultMessage:"Move"}),t.RENAME_ACTION_STRING=o.defineMessage({id:"DyrBQI",defaultMessage:"Rename"}),t.DELETE_ACTION_STRING=o.defineMessage({id:"nOBhEP",defaultMessage:"Delete"}),t.REMOVE_ACTIION_STRING=o.defineMessage({id:"efT3qC",defaultMessage:"Remove"}),t.COPY_ACTION_STRING=o.defineMessage({id:"6MJeaA",defaultMessage:"Copy"}),t.FOLDER_HISTORY_ACTION_STRING=o.defineMessage({id:"hunQnq",defaultMessage:"Folder history"}),t.REWIND_ACTION_STRING=o.defineMessage({id:"e3V4bo",defaultMessage:"Rewind this folder"}),t.ARCHIVE_ACTION_STRING=o.defineMessage({id:"uH1oiy",defaultMessage:"Archive"}),t.COMMENT_ACTION_STRING=o.defineMessage({id:"XAo7sk",defaultMessage:"Add comment"}),t.VAULT_UNLOCK_STRING=o.defineMessage({id:"7KlMwN",defaultMessage:"Unlock vault"}),t.VAULT_LOCK_STRING=o.defineMessage({id:"LQt5WS",defaultMessage:"Lock vault"}),t.FILE_LOCK_ACTION_STRING=o.defineMessage({id:"ljfv4E",defaultMessage:"Lock editing"}),t.FILE_UNLOCK_ACTION_STRING=o.defineMessage({id:"lIUM0e",defaultMessage:"Unlock editing"}),t.FILE_REQUEST_UNLOCK_ACTION_STRING=o.defineMessage({id:"lIkHQt",defaultMessage:"Ask to unlock"}),t.EVENTS_ACTION_STRING=o.defineMessage({id:"kLiPVQ",defaultMessage:"Events"}),t.CALCULATE_FOLDER_SIZE_ACTION_STRING=o.defineMessage({id:"W7oflT",defaultMessage:"Calculate size"}),t.MANAGE_AS_ADMIN_ACTION_STRING=o.defineMessage({id:"vECsXs",defaultMessage:"View in admin console"}),t.VERSION_HISTORY_ACTION_STRING=o.defineMessage({id:"T/KgJj",defaultMessage:"Version history"}),t.UNPIN_ACTION_STRING=o.defineMessage({id:"UPrzRq",defaultMessage:"Unpin"}),t.PIN_TO_ACTION_STRING=o.defineMessage({id:"BgBbVR",defaultMessage:"Pin to..."}),t.PIN_TO_ROOT_ACTION_STRING=o.defineMessage({id:"XGL6ZT",defaultMessage:"Pin"}),t.RESTORE_ACTION_STRING=o.defineMessage({id:"GQqYaL",defaultMessage:"Restore"}),t.PERMANENT_DELETE_ACTION_STRING=o.defineMessage({id:"KkjU0R",defaultMessage:"Permanently delete"}),t.STAR_ACTION_STRING=o.defineMessage({id:"0BUrj7",defaultMessage:"Star"}),t.UNSTAR_ACTION_STRING=o.defineMessage({id:"5e94v2",defaultMessage:"Unstar"}),t.RE_ADD_SHARED_FOLDER_ACTION_STRING=o.defineMessage({id:"O0cs6d",defaultMessage:"Re-add shared folder"}),t.SHOW_DELETED_FILES_ACTION_STRING=o.defineMessage({id:"SH7HST",defaultMessage:"Show deleted files"}),t.HIDE_DELETED_FILES_ACTION_STRING=o.defineMessage({id:"3H2+TZ",defaultMessage:"Hide deleted files"}),t.ADD_TO_TRANSFER_ACTION_STRING=o.defineMessage({id:"mjG96z",defaultMessage:"Transfer"}),t.SPACES_PROJECTS_RENAME_DROPDOWN_ACTION_STRING=o.defineMessage({id:"0tQPtN",defaultMessage:"Add to project"}),t.SHARE_ACTION_STRING=o.defineMessage({id:"Wi4w+P",defaultMessage:"Share"}),t.SHARE_ALL_SELECTED_ACTION_STRING=o.defineMessage({id:"M9tYme",defaultMessage:"Share all selected"}),t.GO_TO_FOLDER_ACTION_STRING=o.defineMessage({id:"mppZEu",defaultMessage:"Go to folder"}),t.ADD_CONTENT_ACTION_STRING=o.defineMessage({id:"SzVUpr",defaultMessage:"Add"}),t.PREVIEW_ACTION_STRING=o.defineMessage({id:"L+ww/y",defaultMessage:"Preview"}),t.OPEN_MAC_DESKTOP_ACTION_STRING=o.defineMessage({id:"x31E2S",defaultMessage:"Show in Finder"}),t.OPEN_WINDOWS_DESKTOP_ACTION_STRING=o.defineMessage({id:"knPNIT",defaultMessage:"Show in File Explorer"}),t.OPEN_IN_APP_ACTION_STRING=o.defineMessage({id:"dvphCf",defaultMessage:"Open"}),t.EXP_OPEN_IN_APP_ACTION_STRING=o.defineMessage({id:"iJWsRK",defaultMessage:"Open in"}),t.SHARE_COPY_LINK_ACTION_STRING=o.defineMessage({id:"pIM+Sj",defaultMessage:"Copy link"}),t.SHARE_COPY_LINK_ACTION_TOOLTIP=o.defineMessage({id:"z1g0V5",defaultMessage:"Copy shared link"}),t.FOLLOW_ACTION_STRING=o.defineMessage({id:"GNolQQ",defaultMessage:"Follow"}),t.FOLLOWING_ACTION_STRING=o.defineMessage({id:"spCwO+",defaultMessage:"Following"}),t.FILE_CONVERSION_STRING=o.defineMessage({id:"MhWh/C",defaultMessage:"Save as..."}),t.CONVERT_TO_ARCHIVE_ACTION_STRING=o.defineMessage({id:"vruy3+",defaultMessage:"Zip"}),t.TIDY_UP_ACTION_STRING=o.defineMessage({id:"x1f5gL",defaultMessage:"Multi-file organize"}),t.ADD_FOLDER_AUTOMATION_STRING=o.defineMessage({id:"0gE6qt",defaultMessage:"Add automation"}),t.EDIT_FOLDER_AUTOMATION_STRING=o.defineMessage({id:"Xrep7o",defaultMessage:"Edit automation"}),t.APPLY_NAMING_CONVENTION_ACTION_STRING=o.defineMessage({id:"zlxWBG",defaultMessage:"Set naming convention"}),t.SEND_FOR_SIGNATURE_ACTION_STRING=o.defineMessage({id:"L7z983",defaultMessage:"Send for signature"}),t.REQUEST_APPROVAL_STRING=o.defineMessage({id:"u53xBc",defaultMessage:"Get approval"}),t.SAVE_NEW_VERSION_STRING=o.defineMessage({id:"fKKWug",defaultMessage:"Save new version"}),t.ACTIVITY_ACTION_STRING=o.defineMessage({id:"hkINWZ",defaultMessage:"Activity"}),t.ACTION_DISABLED_STRING=o.defineMessage({id:"0IftsN",defaultMessage:"You don't have permission to make changes to this file"}),t.ADD_TO_COLLECTION_STRING=o.defineMessage({id:"rl/uzK",defaultMessage:"Add to collection"}),t.DELETE_PORTAL_ACTION_STRING=o.defineMessage({id:"LVmuwV",defaultMessage:"Delete portal"}),t.CREATE_PORTAL_ACTION_STRING=o.defineMessage({id:"yIjMVJ",defaultMessage:"Create portal"})})),define("metaserver/static/js/modules/clean/react/browse/browse_action_toolbar_v2",["require","exports","tslib","react","classnames","react-redux","typescript/component_libraries/retrieval-components/src/simple-action-bar/index","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","metaserver/static/js/modules/clean/react/action_bar/file_actions/file_actions","metaserver/static/js/modules/clean/react/browse/action_logger","metaserver/static/js/modules/clean/react/browse/browse_actions/browse_actions","metaserver/static/js/modules/clean/react/browse/browse_upload_controller","metaserver/static/js/modules/clean/react/browse/data/selectors","metaserver/static/js/modules/clean/react/browse/logger_util","metaserver/static/js/modules/clean/web_user_action_events","metaserver/static/js/modules/core/i18n","metaserver/static/js/modules/clean/react/folder_subscriptions/data/folder_subscription_controller","metaserver/static/js/modules/clean/react/browse/browse_view_mode_toggle","metaserver/static/js/modules/clean/react/browse/browse_sharing_view","metaserver/static/js/modules/clean/react/growth/open_in_mobile_modal_controller","metaserver/static/js/modules/clean/react/file_info/utils","metaserver/static/js/modules/clean/react/browse/selection_indicator","metaserver/static/js/modules/clean/react/browse/data/action_creators/index","metaserver/static/js/modules/clean/react/growth/personalization/full_funnel_activation/jtbd_upload_button_tooltip","metaserver/static/js/modules/clean/react/growth/personalization/full_funnel_activation/jtbd_create_button_tooltip"],(function(e,t,o,i,s,n,a,r,c,l,d,A,_,p,T,S,u,E,m,O,I,N,R,f,y){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BrowseActionToolbarV2=t.getActionBarActions=void 0,i=o.__importDefault(i),s=o.__importDefault(s),l=o.__importStar(l),_=o.__importStar(_);const v=d.createBrowseActionBarAccessibilityConfigSelector(),g={selectedFilesSelector:_.selectedFiles,userSelector:_.user,contextSelector:_.context,overQuotaDataSelector:d.overQuotaDataSelector,experimentSelector:d.experimentSelector,isSearchMode:!1,actionSurface:T.ActionSurfaceLogValue.ACTION_BAR,currentFolderInfo:_.getCurrentFolderInfo,flowsFolderRule:_.flowsFolderRule,browsePostTTIData:_.browsePostTTIData,browsePostTTIExperiments:_.browsePostTTIExperiments,hasLinkedMobile:_.hasLinkedMobile,accessibilityConfig:e=>v(e,g),rightRailCollapsedState:_.isRightRailCollapsed,isInsideBackupFolder:_.isInsideBackupFolder,isSelectedBackupFolder:_.isSelectedBackupFolder,isBusinessSpaceFound:d.isBusinessSpaceFoundSelector,businessSpaceXgid:d.businessSpaceXgidSelector},M=d.getBrowseFileActionSelectors();t.getActionBarActions=c.createActionBarActionSelector();const F={handleAction:c.actionHandler,handleActionMenuToggle:c.actionMenuToggleHandler,setOverflowMenuCoordinates:R.setOverflowMenuCoordinates,setOverflowMenuOpenRequest:R.setOverflowMenuOpenRequest,setOverflowMenuCloseRequest:R.setOverflowMenuCloseRequest,setCreateMenuOpenRequest:R.setCreateMenuOpenRequest};class b extends i.default.Component{constructor(){super(...arguments),this.state={overflowMenuOpenRequest:void 0},this.actionHandler={handleAction:(e,t)=>{e.event.stopPropagation(),g.actionSurface=t?T.ActionSurfaceLogValue.RIGHT_CLICK_MENU:T.ActionSurfaceLogValue.OVERFLOW_MENU,this.props.handleAction(e,g,d.BrowseFileActionHandlers)},handleMenuToggle:({type:e,isOpen:t})=>{this.props.handleActionMenuToggle({type:e,isOpen:t},g,d.BrowseActionMenuToggleHandlers)}},this.onOverflowMenuToggle=e=>{if(e.isOpen){const{num_files_selected:e,num_folders_selected:t}=p.countFilesAndFolders(this.props.selectedFiles);l.logBrowseAction({uid:this.props.user.id,action:T.WebUserActionLogEvent.OPEN_OVERFLOW_MENU,num_files_selected:e,num_folders_selected:t,action_surface:this.props.overflowMenuCoordinates?T.ActionSurfaceLogValue.RIGHT_CLICK_MENU:T.ActionSurfaceLogValue.ACTION_BAR}),this.props.setOverflowMenuCloseRequest()}else this.props.setOverflowMenuCoordinates(),this.props.setOverflowMenuCloseRequest()},this.resetOverflowMenuCoordinates=e=>{this.props.overflowMenuCoordinates&&(this.props.setOverflowMenuCoordinates(),this.props.setOverflowMenuCloseRequest({autoFocus:!1}))}}render(){const{browseActionBarActions:e,uploadAjaxInterceptor:t,accessibilityConfig:o,responsive:n,path:c,selectedFiles:l,user:d,showSharingView:_,withoutFolderOverviewAbove:p,selectedOrCurrentFolder:T,showBrowseViewToggle:I,overflowMenuTitle:R,expActionBarRedesignVariant:v,canShowSelectionIndicatorInToolbar:g,isRightRailCollapsed:M,overflowMenuOpenRequest:F,overflowMenuCloseRequest:b,overflowMenuCoordinates:C,createMenuOpenRequest:L,setCreateMenuOpenRequest:D}=this.props,h=n.isResponsive?n.isMatchedLarge?r.ResponsiveSize.DESKTOP:n.isMatchedMedium?r.ResponsiveSize.TABLET:r.ResponsiveSize.MOBILE:r.ResponsiveSize.DESKTOP,B=g?i.default.createElement("div",{className:"family-brws-selection-view-mode-container"},i.default.createElement(N.SelectionIndicator,{responsive:n,selectedFilesCount:l.size,rightRailCollapsed:M}),i.default.createElement(E.BrowseViewModeToggle,{user:d,className:"brws-action-toolbar-view-mode-toggle"})):i.default.createElement(E.BrowseViewModeToggle,{user:d,className:"brws-action-toolbar-view-mode-toggle"});return i.default.createElement("div",{className:s.default("brws-action-toolbar",{"brws-action-toolbar--without-folder-overview":p}),style:{width:this.props.fixedWidth},onClick:this.resetOverflowMenuCoordinates},i.default.createElement(A.BrowseUploadController,{uploadAjaxInterceptor:t}),i.default.createElement(u.FolderSubscriptionController,{path:c,selectedFiles:l}),i.default.createElement(a.ActionBar,{className:"brws-action-toolbar-actionbar",actionHandler:this.actionHandler,actions:e,intl:S.intl,responsive:!0,responsiveSize:h,accessibilityConfig:o,handleOverflowMenuToggle:this.onOverflowMenuToggle,overflowMenuOpenRequest:F,overflowMenuCloseRequest:b,overflowMenuTitle:R,expActionBarRedesignVariant:v,overflowMenuCoordinates:C,hideOverflowMenuHeader:!1,resolveOverflowMenuOpenRequest:()=>{this.props.setOverflowMenuOpenRequest(void 0)},canShowSelectionIndicatorInToolbar:g,createMenuOpenRequest:L,resolveCreateMenuOpenRequest:()=>{D()}}),_&&i.default.createElement("div",{className:"brws-action-toolbar-sharing-view-container"},i.default.createElement(m.BrowseSharingView,{useCompactMode:h!==r.ResponsiveSize.DESKTOP})),I&&B,i.default.createElement(O.OpenInMobileModalController,{folder:T}),i.default.createElement(f.JtbdUploadButtonTooltipController,{actionBarActionDefinitions:e,responsiveSize:h}),i.default.createElement(y.JtbdCreateButtonTooltipController,{actionBarActionDefinitions:e,responsiveSize:h}))}}b.displayName="BrowseActionToolbarController";const C=n.connect((e,o)=>{const i=_.user(e),s=_.context(e),n=_.selectedFiles(e).toList(),a=I.getTitle(n,i,s,S.intl),r=o.responsive.isResponsive&&!o.responsive.isMatchedLarge&&!o.responsive.isMatchedMedium,c=o.responsive.isResponsive&&!o.responsive.isMatchedLarge&&o.responsive.isMatchedMedium,l=r?d.BrowseMobileFileActionSelectors:c?d.BrowseTabletFileActionSelectors:M,A=g.accessibilityConfig?g.accessibilityConfig(e):void 0,p=g.selectedFilesSelector(e),T=1===p.count()&&p.first().is_dir?p.first():g.currentFolderInfo(e);return{browseActionBarActions:t.getActionBarActions(e,g,l,d.getBrowseScenarioActions),user:i,accessibilityConfig:A,selectedFiles:_.selectedFiles(e),path:_.path(e),showBrowseViewToggle:_.showBrowseViewToggleInToolbar(e),showSharingView:_.showShareViewInToolbar(e,o.responsive),fileActionsExperiments:g.experimentSelector(e),selectedOrCurrentFolder:T,overflowMenuTitle:a,expActionBarRedesignVariant:_.expActionBarRedesignVariant(e),canShowSelectionIndicatorInToolbar:_.showSelectionIndicatorInToolbar(e),isRightRailCollapsed:_.isRightRailCollapsed(e),overflowMenuOpenRequest:_.overflowMenuOpenRequest(e),overflowMenuCloseRequest:_.overflowMenuCloseRequest(e),overflowMenuCoordinates:_.overflowMenuCoordinates(e),createMenuOpenRequest:_.createMenuOpenRequest(e)}},F);t.BrowseActionToolbarV2=C(b)}));
//# sourceMappingURL=pkg-action-bar.min.js-vfljHn4Ku.map