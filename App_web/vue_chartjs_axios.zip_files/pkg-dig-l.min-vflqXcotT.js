define("metaserver/static/js/prod_assets_web_modules/dig-components/breadcrumb",["exports","../common/tslib.es6","../classnames","react","./icons","./typography","./hooks","./buttons","./menu","./icons/src","focus-visible","../resize-observer-polyfill","./progress_indicators","../react-transition-group/CSSTransition","../common/extends","../common/Transition","react-dom","./motion","./overlay","../@popperjs/core","./layer","./click_outside"],(function(e,r,n,a,t,i,o,s,l,c,d,u,v,g,m,f,h,p,b,_,w,E){"use strict";var D=a.createContext({size:"standard",inverse:!1,updateSegment:function(){}}),k=a.createContext(0),C={small:24,standard:32},y={small:18.875,standard:20.016},B="digBreadcrumbLink--hidden",I=function(e){return e.every((function(e){return!e.linkProps.children||0!==e.width}))},N=function(e){return e.current?e.current.getBoundingClientRect().width:0},O=function(e,r,n){var a=0;return I(e)?(e.forEach((function(e){a+=e.width})),0===a?0:(a+=(e.length-1)*y[n],r.length>0&&(a+=C[n]+y[n]),a)):0},L=function(e){var r=[];return a.Children.forEach(e,(function(e){a.isValidElement(e)&&r.push({item:e,width:0,linkProps:{}})})),r},R=function(e){var n=e.availableWidth,a=e.breadcrumbSegments,t=e.size,i=e.isRootOverflow,o=e.alwaysShowRoot,s=a,l=[],c=O(s,l,t);if(0===c)return{inline:[],overflow:[]};if(s.length>4){var d=i?0:1,u=r.__spreadArrays(s.slice(d,s.length-4+d));s=r.__spreadArrays(s.slice(0,d),s.slice(s.length-4+d)),l=l.concat(u),c=O(s,l,t)}for(;;)if(n>c){if(4===s.length||0===l.length)break;var v=l.length-1;1!==s.length||i||(v=0);var g=l[v];if(1===l.length){if(g.width>n-(c-C[t]))break}else if(g.width+y[t]>n-c)break;s=1===s.length||i?r.__spreadArrays([g],s):r.__spreadArrays(s.slice(0,1),[g],s.slice(1)),l=r.__spreadArrays(l.slice(0,v),l.slice(v+1)),c=O(s,l,t)}else{var m=!i&&o?2:1;if(s.length<=m)break;v=1,(2===s.length||i)&&(v=0),g=s[v],s=r.__spreadArrays(s.slice(0,v),s.slice(v+1)),l=0!==v||i?l.concat(g):[g].concat(l),c=O(s,l,t)}return{inline:s,overflow:l}},S=a.forwardRef((function(e,o){var s=e.id,l=e.className,c=e.children,d=e.withLeftIcon,u=e.withMenuItemIcon,v=e.isCurrentPath,g=void 0!==v&&v,m=e.href,f=e.onClick,h=e.onDrop,p=e.onDragEnter,b=e.onDragOver,_=e.onDragLeave,w=e._originalId,E=void 0===w?"":w,C=r.__rest(e,["id","className","children","withLeftIcon","withMenuItemIcon","isCurrentPath","href","onClick","onDrop","onDragEnter","onDragOver","onDragLeave","_originalId"]),y=a.useContext(D),I=y.size,O=y.updateSegment,L=y.inverse,R=a.useContext(k),S=g?"span":"a",z=g?void 0:0,M="standard"===I?i.Title:i.Text,P=a.useRef(null),T=C["aria-label"],x=a.useState(!1),A=x[0],H=x[1],W=n("dig-Breadcrumb-link",{"dig-Breadcrumb-link--current":g},{"dig-Breadcrumb-link--dragged-over":A&&!g},{"dig-Breadcrumb-link--inverse":L},l);a.useEffect((function(){s&&s.startsWith(B)&&O(R,{id:s,children:c,withLeftIcon:d,withMenuItemIcon:u,href:m,onClick:f,onDrop:h,onDragEnter:p,onDragOver:b,onDragLeave:_,"aria-label":T,_originalId:E},N(P))}),[s,c,d,u,m,f,h,p,b,_,R,O,P,T,E]);var U={onClick:f};if(!g)switch(typeof m){case"string":U.href=m;break;case"function":U.href="#",U.onClick=function(e){e.preventDefault(),m(e),f&&f(e)}}var j=a.useCallback((function(e){H(!0),b&&b(e)}),[b]),F=a.useCallback((function(e){H(!0),p&&p(e)}),[p]),V=a.useCallback((function(e){H(!1),_&&_(e)}),[_]),q=a.useCallback((function(e){H(!1),h&&h(e)}),[h]);return a.createElement(S,r.__assign(r.__assign(r.__assign({id:s,className:W,tabIndex:z,ref:o,"aria-current":g?"page":void 0},U),{onDrop:q,onDragEnter:F,onDragOver:j,onDragLeave:V}),C),a.createElement(M,{size:"small",className:"dig-Breadcrumb-link-content",color:g?"standard":"faint",inverse:L},a.createElement("span",{ref:P,className:"dig-Breadcrumb-link-inner"},d&&a.createElement(t.UIIcon,{className:"dig-Breadcrumb-link-icon",src:d,size:I}),a.createElement("span",{className:"dig-Breadcrumb-link-text"},c))))}));S.displayName="Link";var z=function(e){var r=e.className,t=a.useContext(D),o=t.size,s=t.inverse,l=n("dig-Breadcrumb-divider",r);return a.createElement(i.Text,{className:l,size:o,inverse:s,color:"faint","aria-hidden":"true"},"/")};z.displayName="BreadcrumbDivider";var M=function(e){var t=e.className,i=e.onDragOver,o=e.onDragEnter,s=e.onDragLeave,c=e.onDrop,d=r.__rest(e,["className","onDragOver","onDragEnter","onDragLeave","onDrop"]),u=a.useState(!1),v=u[0],g=u[1],m=n({"dig-Breadcrumb-overlfow-item--dragged-over":v},t),f=a.useCallback((function(e){g(!0),i&&i(e)}),[i]),h=a.useCallback((function(e){g(!0),o&&o(e)}),[o]),p=a.useCallback((function(e){g(!1),s&&s(e)}),[s]),b=a.useCallback((function(e){g(!1),c&&c(e)}),[c]);return a.createElement(l.Menu.ActionItem,r.__assign({tagName:"a",className:m,"aria-label":d["aria-label"],onDrop:b,onDragOver:f,onDragEnter:h,onDragLeave:p,role:"menuitem"},d))};M.displayName="BreadcrumbOverflowMenuItem";var P=function(e){var i=e.className,o=e.overflowItemsProps,d=e.overflowEventHandlers,u=r.__rest(e,["className","overflowItemsProps","overflowEventHandlers"]),v=a.useContext(D),g=v.size,m=v.inverse,f=n("dig-Breadcrumb-overflow",{"dig-Breadcrumb-overflow--inverse":m},i),h=a.useCallback((function(e,r){return d?{onDragOver:d.onDragOverTrigger?d.onDragOverTrigger(e):void 0,onDragEnter:d.onDragEnterTrigger?d.onDragEnterTrigger(e):void 0,onDragLeave:d.onDragLeaveTrigger?d.onDragLeaveTrigger(r):void 0}:{}}),[d]),p=a.useCallback((function(e,r){return d?{onDragOver:d.onDragOverContent?d.onDragOverContent(e):void 0,onDragEnter:d.onDragEnterContent?d.onDragEnterContent(e):void 0,onDragLeave:d.onDragLeaveContent?d.onDragLeaveContent(r):void 0}:{}}),[d]);return a.createElement(l.Menu.Wrapper,{className:f,onSelection:function(e,r){"function"==typeof e&&e(r)},inverse:m,shouldPropagateClickOutsideMouseEvents:!0},(function(e){var n=e.getContentProps,i=e.getTriggerProps,d=e.openMenu,v=e.closeMenu;return a.createElement(a.Fragment,null,a.createElement(s.IconButton,r.__assign(r.__assign(r.__assign({variant:"transparent",className:"dig-Breadcrumb-overflow-button","data-testid":"digBreadcrumbOverflowButton",size:"small",inverse:m},i()),h(d,v)),u),a.createElement(t.UIIcon,{src:c.MoreHorizontalLine,size:g})),a.createElement(l.Menu.Content,r.__assign(r.__assign({},n()),p(d,v)),a.createElement(l.Menu.Segment,null,o.map((function(e,r){var n=e.id,i=e.children,o=e.withMenuItemIcon,s=e.href,l=e.onClick,c=e.onDragOver,d=e.onDragEnter,u=e.onDragLeave,v=e.onDrop;return e&&a.createElement(M,{id:n,"aria-label":e["aria-label"],value:s,href:"string"==typeof s?s:void 0,onClick:l,onDragOver:c,onDragEnter:d,onDragLeave:u,onDrop:v,children:i,withLeftAccessory:o?a.createElement(t.UIIcon,{src:o}):void 0,key:"overflow-item-"+r})})))))}))};P.displayName="BreadcrumbOverflow";var T=function(e){var r=e.segments,n=e.isRootOverflow,t=e.overflowEventHandlers,i=[];if(r.inline.forEach((function(e,t){i.push(e.item),t!==r.inline.length-1&&(r.overflow.length>0&&!n&&0===t?i.push(a.createElement(z,{key:"divider-"+t,className:"dig-Breadcrumb-divider--overflowLeft"})):i.push(a.createElement(z,{key:"divider-"+t})))})),r.overflow.length>0){var o=2;(1===r.inline.length||n)&&(o=0),i.splice(o,0,a.createElement(z,{key:"divider--1",className:"dig-Breadcrumb-divider--overflowRight"})),i.splice(o,0,a.createElement(P,{overflowItemsProps:r.overflow.map((function(e){return e.linkProps})),overflowEventHandlers:t,key:"overflow"}))}return a.createElement(a.Fragment,null,i)};T.displayName="BreadcrumbRenderer";var x=a.forwardRef((function(e,t){var s=e.className,l=e.children,c=e.size,d=void 0===c?"standard":c,u=e.overflowEventHandlers,v=e.isRootOverflow,g=void 0!==v&&v,m=e.alwaysShowRoot,f=void 0!==m&&m,h=e.inverse,p=void 0!==h&&h,b=r.__rest(e,["className","children","size","overflowEventHandlers","isRootOverflow","alwaysShowRoot","inverse"]),_=o.useResizeObserver(),w=_.nodeRef,E=_.observerEntry,C=a.useState(!0),y=C[0],I=C[1],N=a.useState(!0),O=N[0],S=N[1],z=a.useState([]),M=z[0],P=z[1],x=a.useRef(null),A=n("dig-Breadcrumb",{"dig-Breadcrumb--small":"small"===d},{"dig-Breadcrumb--inverse":p},s),H={size:d,inverse:p,updateSegment:a.useCallback((function(e,n,a){P((function(t){return t.map((function(t,i){return i===e?r.__assign(r.__assign({},t),{width:Math.ceil(a),linkProps:r.__assign(r.__assign({},n),{id:n._originalId,_originalId:void 0})}):t}))}))}),[])},W="standard"===d?i.Title:i.Text;return a.useImperativeHandle(t,(function(){return e=x,{getBoundingClientRect:function(){return e.current?e.current.getBoundingClientRect():new DOMRect}};var e})),a.useEffect((function(){document.fonts?document.fonts.ready.then((function(){S(!1)})):S(!1)}),[]),a.useEffect((function(){I(!0)}),[l]),a.useEffect((function(){y&&(P(L(l)),I(!1))}),[l,y]),a.createElement(D.Provider,{value:H},!y&&a.createElement(W,{size:"small",className:"dig-Breadcrumb--widthCalcUtil","aria-hidden":"true"},a.Children.map(l,(function(e,r){if(a.isValidElement(e))return a.createElement(k.Provider,{value:r,key:"hidden-link-"+r},a.cloneElement(e,{id:B+"-"+r,_originalId:e.props.id}))}))),a.createElement("nav",r.__assign(r.__assign({className:A},b),{ref:w}),a.createElement("div",{className:"dig-Breadcrumb-inner",ref:x},!O&&a.createElement(T,{segments:R({availableWidth:E?E.contentRect.width:0,breadcrumbSegments:M,size:d,isRootOverflow:g,alwaysShowRoot:f}),isRootOverflow:g,overflowEventHandlers:u}))))}));x.Link=S,x.displayName="Breadcrumb",e.Breadcrumb=x,e.Link=S,e.buildBreadcrumb=R,e.calcBreadcrumbWidth=O,e.calcItemWidth=N,e.initSegments=L,e.isAllUpdated=I,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=pkg-dig-l.min.js-vflBMSDzA.map