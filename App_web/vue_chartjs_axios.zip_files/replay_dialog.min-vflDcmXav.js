define(["require","exports","tslib","react","dig-components/typography","metaserver/static/js/modules/core/i18n","metaserver/static/js/modules/clean/react/components/css","metaserver/static/js/modules/clean/react/file_viewer/sdk_file_viewer/upsell/upsell_dialog","metaserver/static/js/modules/clean/react/file_viewer/sdk_file_viewer/replay_prompt/replay_dialog_api","metaserver/static/js/modules/clean/file_store/utils","metaserver/static/js/modules/clean/react/browse/constants","metaserver/static/js/modules/clean/react/campaigns/campaign_events_api"],(function(e,a,t,i,s,l,o,n,r,c,m,p){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.ReplayDialog=void 0,i=t.__importStar(i);const d=({user:e,file:a})=>{const[o,d]=i.useState(!1),[g,u]=i.useState(void 0);i.useEffect(()=>{t.__awaiter(void 0,void 0,void 0,(function*(){var t;if(e&&a&&c.isBrowseFile(a)&&("VIDEO"===m.ExtensionCategories[c.getExtension(a)]||"AUDIO"===m.ExtensionCategories[c.getExtension(a)])){const a=yield r.shouldShowReplayDialog(e);d(!!a.show_entrypoint&&a.show_entrypoint),(null===(t=a.campaign_context)||void 0===t?void 0:t.campaign_impression_id)&&u(p.createMegaphoneCampaignImpressionContext(a.campaign_context.campaign_impression_id,a.campaign_context.campaign_id?`${a.campaign_context.campaign_id}`:void 0,a.campaign_context.campaign_variant_id?`${a.campaign_context.campaign_variant_id}`:void 0))}e&&o&&(r.logReplayDialogAction(e,"impression",0),g&&p.logCampaignImpression(g))}))},[]);const f=a?`https://replay.dropbox.com/project/creating/${a.file_id}?creationSource=dropbox_previews_prompt`:"https://replay.dropbox.com/?login=true";return o?i.createElement(n.UpsellDialog,{afterAccept:()=>{e&&r.logReplayDialogAction(e,"acknowledgement",0),g&&p.logCampaignClick(g)},afterDecline:()=>{e&&r.logReplayDialogAction(e,"dismissal",0),g&&p.logCampaignDismissed(g)},uxaPrefix:"replay-fvsdk-prompt",titleText:a&&c.isBrowseFile(a)&&"AUDIO"===m.ExtensionCategories[c.getExtension(a)]?l.intl.formatMessage({id:"7iOXVy",defaultMessage:"Make audio production with remote teams easier"}):l.intl.formatMessage({id:"vL51vF",defaultMessage:"Fast-track video reviews with Dropbox Replay, now in beta"}),bodyContent:(()=>{const e=a&&c.isBrowseFile(a)&&"AUDIO"===m.ExtensionCategories[c.getExtension(a)]?i.createElement(s.Text,{className:"replay-dialog-subtext",tagName:"p",isBold:!0},l.intl.formatMessage({id:"o8puBZ",defaultMessage:"Try Dropbox Replay, an easier way to collaborate on audio:"})):i.createElement(s.Text,{className:"replay-dialog-subtext",tagName:"p",isBold:!0},l.intl.formatMessage({id:"abiqtR",defaultMessage:"Streamline your approval process:"}));return i.createElement(i.Fragment,null,e,i.createElement(s.Text,{className:"replay-dialog-subtext",tagName:"div"},i.createElement("ul",{className:"replay-dialog-list",style:{paddingInlineStart:"20px"}},a&&c.isBrowseFile(a)&&"AUDIO"===m.ExtensionCategories[c.getExtension(a)]?i.createElement(i.Fragment,null,i.createElement("li",null,l.intl.formatMessage({id:"nV0yPL",defaultMessage:"Provide time-code accurate comments on audio tracks"})),i.createElement("li",null,l.intl.formatMessage({id:"FkLJx9",defaultMessage:"Collect feedback from multiple collaborators in one place"})),i.createElement("li",null,l.intl.formatMessage({id:"lWK8l2",defaultMessage:"Streamline the approval process"}))," "):i.createElement(i.Fragment,null,i.createElement("li",null,l.intl.formatMessage({id:"CNEbQT",defaultMessage:"Share video with HD-quality playback"})),i.createElement("li",null,l.intl.formatMessage({id:"TgIEQQ",defaultMessage:"See frame-accurate comments in one place"})),i.createElement("li",null,l.intl.formatMessage({id:"7NNqco",defaultMessage:"Seamlessly connect tools like Adobe Premiere Pro"}))))))})(),acceptText:l.intl.formatMessage({id:"lwBIQ/",defaultMessage:"Open with Replay"}),declineText:l.intl.formatMessage({id:"t97mKK",defaultMessage:"Not now"}),redirectUrl:f}):null};d.displayName="UnstyledReplayDialog",a.ReplayDialog=o.requireCssWithComponent(d,["/static/css/file_viewer/upsell_dialog-vfluIgJJw.css"])}));
//# sourceMappingURL=replay_dialog.min.js-vflems4fP.map