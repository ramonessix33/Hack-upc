define("metaserver/static/js/modules/clean/base64",["require","exports"],(function(e,t){"use strict";function r(e){const t=[];let r=0,s=0,i=0,n=0,o=0;for(e+="";r<e.length;)i=e.charCodeAt(r),i<128?(t[s++]=String.fromCharCode(i),r++):i>191&&i<224?(n=e.charCodeAt(r+1),t[s++]=String.fromCharCode((31&i)<<6|63&n),r+=2):(n=e.charCodeAt(r+1),o=e.charCodeAt(r+2),t[s++]=String.fromCharCode((15&i)<<12|(63&n)<<6|63&o),r+=3);return t.join("")}Object.defineProperty(t,"__esModule",{value:!0}),t.decode=t.encode=void 0,t.encode=function(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let r=void 0,s=void 0,i=void 0,n=void 0,o=void 0,a=void 0,l=void 0,u=void 0,c=0,_=0,d="";const m=[];if(!e)return e;for(;r=e.charCodeAt(c++),s=e.charCodeAt(c++),i=e.charCodeAt(c++),u=r<<16|s<<8|i,n=u>>18&63,o=u>>12&63,a=u>>6&63,l=63&u,m[_++]=t.charAt(n)+t.charAt(o)+t.charAt(a)+t.charAt(l),c<e.length;);d=m.join("");const g=e.length%3;return(g?d.slice(0,g-3):d)+"===".slice(g||3)},t.decode=function(e,t){const s=t?e=>e:r;if("function"==typeof window.atob)return s(window.atob(e));const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n=0,o=0;const a=[];if(!e)return e;for(e+="";;){const t=i.indexOf(e.charAt(n++)),r=i.indexOf(e.charAt(n++)),s=i.indexOf(e.charAt(n++)),l=i.indexOf(e.charAt(n++)),u=t<<18|r<<12|s<<6|l,c=u>>16&255,_=u>>8&255,d=255&u;if(a[o++]=64===s?String.fromCharCode(c):64===l?String.fromCharCode(c,_):String.fromCharCode(c,_,d),!(n<e.length))break}let l=a.join("");return l=s(l),l}})),define("metaserver/static/js/modules/clean/react/browse/action_logger",["require","exports","tslib","metaserver/static/js/modules/clean/filepath/filepath","metaserver/static/js/modules/clean/filetypes","metaserver/static/js/modules/clean/react/browse/logger","metaserver/static/js/modules/clean/react/browse/logger_util","metaserver/static/js/modules/clean/web_user_action_events","metaserver/static/js/modules/clean/user_survey/user_survey","metaserver/static/js/modules/clean/pap/analytics_client","metaserver/static/js/dropbox/proto/pap_events/files_browser/shown_files_root","metaserver/static/js/modules/clean/pap/util"],(function(e,t,r,s,i,n,o,a,l,u,c,_){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logApprovalActions=t.logAutoFolderEducationModal=t.logAutoFolderAdoptionSnackbar=t.logFolderRuleFeedbackModal=t.logCreateAutomatedFolderClick=t.logBrowseLoaded=t.logFileAction=t.logRightClickItems=t.logContextMenuClick=t.logKeyboardShortcutUsage=t.logFileCreateSuccess=t.logPageView=t.logFileCreateClick=t.logFileUploadFSWReturned=t.logPermanentDeleteFiles=t.logDeleteFiles=t.logOpenCopyModal=t.logDownload=t.logAddComment=t.logRenameFiles=t.logOpenMoveModal=t.logVersions=t.logCopyFiles=t.logOpenAddToCollectionModal=t.logMoveFiles=t.logFileOperationModalClick=t.logRestore=t.logSwitchViewType=t.logSortRecords=t.logToggleDeletedFiles=t.logViewShareModal=t.logFolderExplorerCollapseRow=t.logFolderExplorerExpandRow=t.logOpenRow=t.logBrowseAction=t.logWebUserAction=t.rightRailStates=t.BrowseLogEventSource=t.folderTypes=t.getEnumValueForBrowseBaseUrl=t.getEnumValueForRightSidebarState=t.getEnumValueForFolderType=t.getEnumValueForListViewType=t.getEnumValueForAccountRole=void 0,s=r.__importStar(s);var d=c.pap_events.files_browser.Shown_FilesRoot;function m(e){n.browseLogger.log(e)}function g({uid:e,source:t,action:r,num_files_selected:i,num_folders_selected:n,view_type:a,result:l,error_summary:u,action_surface:c,action_source:_,batch_success_count:d,batch_fail_count:g,lookup_error_type:v,right_sidebar_state:f,extra:y}){let p={num_files_selected:i,num_folders_selected:n,source:t,view_type:a,error_summary:u};if(o.isFile(l)){const e=l,{request_id:t,ns_id:r,sjid:i,file_id:n,fq_path:o,bytes:a,ext:u}=e;p=Object.assign(Object.assign({},p),{request_id:t,file_nsid:r,file_sjid:i,file_id:n,file_name:s.filename(o),file_path:o,file_size:a,file_extension:u})}else if(o.isPaper(l)){const e=l,{request_id:t}=e;p=Object.assign(Object.assign({},p),{request_id:t})}m({user_id:e,event_name:r,source:t,view_type:a,request_id:p.request_id,file_nsid:p.file_nsid,file_sjid:p.file_sjid,file_id:p.file_id,file_name:p.file_name,file_path:p.file_path,file_size:p.file_size,file_extension:p.file_extension,action_source:_,extra:Object.assign(Object.assign({},y),{num_files_selected:String(p.num_files_selected),num_folders_selected:String(p.num_folders_selected),error_summary:p.error_summary||null,action_surface:c||null,batch_success_count:d?String(d):null,batch_fail_count:g?String(g):null,lookup_error_type:v||null,right_sidebar_state:null!=f?f:null})})}t.getEnumValueForAccountRole=e=>{var t;return null!==(t=_.getEnumValueForString(`${e}_ACCOUNT_ROLE`,d.AccountRole))&&void 0!==t?t:d.AccountRole.UNKNOWN_ACCOUNT_ROLE},t.getEnumValueForListViewType=e=>{var t;return null!==(t=_.getEnumValueForString(`${e}_LIST_VIEW_TYPE`,d.ListViewType))&&void 0!==t?t:d.ListViewType.UNKNOWN_LIST_VIEW_TYPE},t.getEnumValueForFolderType=e=>{var t;return null!==(t=_.getEnumValueForString(`${e}_FOLDER_TYPE`,d.FolderType))&&void 0!==t?t:d.FolderType.UNKNOWN_FOLDER_TYPE},t.getEnumValueForRightSidebarState=e=>{var t;return null!==(t=_.getEnumValueForString(`${e}_RIGHT_SIDEBAR_STATE`,d.RightSidebarState))&&void 0!==t?t:d.RightSidebarState.UNKNOWN_RIGHT_SIDEBAR_STATE},t.getEnumValueForBrowseBaseUrl=e=>{var t;return null!==(t=_.getEnumValueForString(`${e.substring(1)}_BROWSE_BASE_URL`,d.BrowseBaseUrl))&&void 0!==t?t:d.BrowseBaseUrl.UNKNOWN_BROWSE_BASE_URL},t.folderTypes=["vault","root","team_member_folder","team_shared_folder","shared_folder","folder"],(function(e){e.MAESTRO_RIGHT_SIDEBAR="MAESTRO_RIGHT_SIDEBAR",e.MAESTRO_PHOTOS_RIGHT_SIDEBAR="MAESTRO_PHOTOS_RIGHT_SIDEBAR",e.LEGACY_HEADER_ACTIONS="LEGACY_HEADER_ACTIONS",e.DRAG="DRAG"})(t.BrowseLogEventSource||(t.BrowseLogEventSource={})),t.rightRailStates=["collapsed","opened"],n.browseLogger.registerRowInjector(n.screenSizeInjector),t.logWebUserAction=m,t.logBrowseAction=g,t.logOpenRow=function({uid:e,entity_type:t,source:r,view_type:s,file_nsid:n,file_sjid:o,file_id:l,file_name:u,file_path:c,file_size:_,file_type:d,file_extension:g,request_id:v,action_source:f,vaultApi:y,vaultLoggingTypes:p,rightRailState:b}){m({user_id:e,event_name:a.WebUserActionLogEvent.OPEN_ROW,source:r,view_type:s,file_nsid:n,file_sjid:o,file_id:l,file_name:u,file_path:c,file_size:_,file_extension:g,request_id:v,action_source:f,extra:{entity_type:t,right_sidebar_state:null!=b?b:null}}),d===i.FileTypes.VAULT_FOLDER&&null!=y&&null!=p&&y.logProductAnalyticsEvent({actionSurface:p.AnalyticsEventActionSurface.BROWSE,eventAction:p.AnalyticsEventAction.SELECT,eventObject:p.AnalyticsEventObject.VAULT_FOLDER})},t.logFolderExplorerExpandRow=function({uid:e,entity_type:t,source:r,file_name:s,file_path:i}){m({user_id:e,event_name:a.WebUserActionLogEvent.FOLDER_EXPLORER_EXPAND_ROW,source:r,file_name:s,file_path:i,extra:{entity_type:t}})},t.logFolderExplorerCollapseRow=function({uid:e,entity_type:t,source:r,file_name:s,file_path:i}){m({user_id:e,event_name:a.WebUserActionLogEvent.FOLDER_EXPLORER_COLLAPSE_ROW,source:r,file_name:s,file_path:i,extra:{entity_type:t}})},t.logViewShareModal=function({uid:e,modal_session_id:t,file_nsid:r,file_sjid:s,file_id:i,file_name:n,file_path:o}){m({user_id:e,event_name:a.WebUserActionLogEvent.VIEW_SHARE_MODEL,file_nsid:r,file_sjid:s,file_id:i,file_name:n,file_path:o,extra:{modal_session_id:t}})},t.logToggleDeletedFiles=function({uid:e,show_deleted_files:t,view_type:r,action_surface:s,source:i}){m({user_id:e,event_name:a.WebUserActionLogEvent.TOGGLE_DELETED_FILES,view_type:r,source:i,extra:{show_deleted_files:t.toString(),action_surface:s}})},t.logSortRecords=function({uid:e,sort_by:t,sort_direction:r,view_type:s}){m({user_id:e,event_name:a.WebUserActionLogEvent.SORT_RECORDS,view_type:s,extra:{sort_by:t,sort_direction:r}})},t.logSwitchViewType=function({uid:e,isSearchMode:t,viewType:r}){m({user_id:e,event_name:a.WebUserActionLogEvent.SWITCH_VIEW_TYPE,view_type:r})},t.logRestore=function({uid:e,source:t,view_type:r,file_nsid:s,file_path:i,file_name:n,num_files_selected:o,num_folders_selected:l}){m({user_id:e,event_name:a.WebUserActionLogEvent.RESTORE,source:t,view_type:r,file_nsid:s,file_path:i,file_name:n,extra:{num_files_selected:o?o.toString():null,num_folders_selected:l?l.toString():null}})},t.logFileOperationModalClick=function({uid:e,event_name:t,selectedPath:r}){m({user_id:e,event_name:t,extra:r?{selectedPath:r}:{}})},t.logMoveFiles=function(e){g(Object.assign(Object.assign({},e),{action:a.WebUserActionLogEvent.MOVE})),l.UserSurvey.trackEvent("move_item","browse")},t.logOpenAddToCollectionModal=function(e){g(Object.assign(Object.assign({},e),{action:a.WebUserActionLogEvent.OPEN_ADD_TO_COLLECTION_MODAL}))},t.logCopyFiles=function(e){g(Object.assign(Object.assign({},e),{action:a.WebUserActionLogEvent.COPY}))},t.logVersions=function(e){g(Object.assign(Object.assign({},e),{action:a.WebUserActionLogEvent.VERSIONS}))},t.logOpenMoveModal=function(e){g(Object.assign(Object.assign({},e),{action:a.WebUserActionLogEvent.OPEN_MOVE_MODAL}))},t.logRenameFiles=function(e){g(Object.assign(Object.assign({},e),{action:a.WebUserActionLogEvent.RENAME}))},t.logAddComment=function(e){g(Object.assign(Object.assign({},e),{action:a.WebUserActionLogEvent.ADD_COMMENT}))},t.logDownload=function(e){g(Object.assign(Object.assign({},e),{action:a.WebUserActionLogEvent.DOWNLOAD})),l.UserSurvey.trackEvent("download_item","browse")},t.logOpenCopyModal=function(e){g(Object.assign(Object.assign({},e),{action:a.WebUserActionLogEvent.OPEN_COPY_MODAL}))},t.logDeleteFiles=function(e){g(Object.assign(Object.assign({},e),{action:a.WebUserActionLogEvent.DELETE}))},t.logPermanentDeleteFiles=function(e){g(Object.assign(Object.assign({},e),{action:a.WebUserActionLogEvent.PERMANENT_DELETE}))},t.logFileUploadFSWReturned=function({uid:e,file_name:t,upload_id:r,all_fsw_ids:s,filtered_fsw_ids:i}){m({user_id:e,event_name:a.WebUserActionLogEvent.FILE_UPLOAD_FSW_RETURNED,file_name:t,upload_id:r,all_fsw_ids:s,filtered_fsw_ids:i}),l.UserSurvey.trackEvent("upload_item","browse")},t.logFileCreateClick=function({uid:e,source:t,action:r,depth_folder_selected:s,selection_mode:i,empty_folder:n}){m({user_id:e,source:t,event_name:r,extra:{depth_folder_selected:void 0!==s?s.toString():null,selection_mode:i,empty_folder:n?"true":"false"}})},t.logPageView=function({uid:e,view_type:r,url:s,baseUrl:i,folder_type:n,right_sidebar_state:o,navigation_depth:l,is_under_tmf:c,role:_}){m({user_id:e,event_name:a.WebUserActionLogEvent.PAGE_VIEW,view_type:r,extra:{url:s,navigation_depth:void 0!==l?l.toString():null,folder_type:n,right_sidebar_state:o,is_under_tmf:void 0!==c?c.toString():null}}),u.logEvent(d.create({actionSurface:"browse",eventClass:d.EventClass.FILES_BROWSER,accountRole:t.getEnumValueForAccountRole(_),listViewType:t.getEnumValueForListViewType(r),navigationDepth:null!=l?l:0,folderType:t.getEnumValueForFolderType(n),rightSidebarState:t.getEnumValueForRightSidebarState(o),isUnderTmf:null!=c&&c,browseBaseUrl:t.getEnumValueForBrowseBaseUrl(i)}))},t.logFileCreateSuccess=function({uid:e,document_type:t,time_elapsed:r,open_id:s,selection_mode:i,empty_folder:n}){m({user_id:e,event_name:a.WebUserActionLogEvent.FILE_CREATE_SUCCESS,extra:{document_type:t.toString(),time_elapsed:r.toString(),open_id:s,create_completed_timestamp_ms:Date.now().toString(),selection_mode:i||null,empty_folder:n?"true":"false"}}),l.UserSurvey.trackEvent("create_item","browse")},t.logKeyboardShortcutUsage=function({user_id:e,view_type:t,keyboard_shortcut_type:r}){m({user_id:e,event_name:a.WebUserActionLogEvent.KEYBOARD_SHORTCUT,view_type:t,extra:{keyboard_shortcut_type:r}})},t.logContextMenuClick=function({uid:e,viewType:t,action_surface:r,numFilesSelected:s,numFoldersSelected:i}){m({user_id:e,event_name:a.WebUserActionLogEvent.CONTEXT_MENU_CLICK,view_type:t,extra:{action_surface:r,num_files_selected:s?s.toString():null,num_folders_selected:i?i.toString():null}})},t.logRightClickItems=function({uid:e,viewType:t,action_surface:r,numFilesSelected:s,numFoldersSelected:i}){m({user_id:e,event_name:a.WebUserActionLogEvent.RIGHT_CLICK_ITEMS,view_type:t,extra:{action_surface:r,num_files_selected:s?s.toString():null,num_folders_selected:i?i.toString():null}})},t.logFileAction=function({uid:e,action:t,num_files_selected:r,num_folders_selected:s,source:i,view_type:n,jobId:o,error_summary:a,error:l,batch_success_count:u,batch_fail_count:c,lookup_error_type:_,extra:d={}}){m({user_id:e,event_name:t,source:i,view_type:n,extra:Object.assign({num_files_selected:r?r.toString():null,num_folders_selected:s?s.toString():null,error_summary:a||null,error:l||null,job_id:o||null,batch_success_count:u?String(u):null,batch_fail_count:c?String(c):null,lookup_error_type:_||null},d)})},t.logBrowseLoaded=function({uid:e,view_type:t,url:r,folder_type:s,navigation_depth:i,is_under_tmf:n}){m({user_id:e,event_name:a.WebUserActionLogEvent.BROWSE_LOADED,view_type:t,extra:{url:r,navigation_depth:void 0!==i?i.toString():null,folder_type:s,is_under_tmf:void 0!==n?n.toString():null}})},t.logCreateAutomatedFolderClick=function({uid:t,source:s,file_path:i,file_nsid:n}){m({user_id:t,source:s,file_path:i,file_nsid:n,event_name:a.WebUserActionLogEvent.CREATE_AUTOMATED_FOLDER_CLICK}),new Promise((t,r)=>{e(["metaserver/static/js/modules/clean/react/flows/logging/flows_loggers"],t,r)}).then(r.__importStar).then(({PapLogger:e})=>{e.logSelectAutoFolderCreateButton({actionSurface:"browse"})})},t.logFolderRuleFeedbackModal=function({uid:e,feedback_source:t,modal_session_id:r,event_name:s,file_path:i,error:n}){m({user_id:e,file_path:i,event_name:s,extra:{feedback_source:t,modal_session_id:r,error:n||null}})},t.logAutoFolderAdoptionSnackbar=function({action_source:e,event_name:t,file_nsid:r,source:s,trigger_rule:i,user_id:n,snackbar_click_option:o}){m({user_id:n,event_name:t,action_source:e,file_nsid:r,extra:{source:s||null,trigger_rule:i,snackbar_click_option:o||null}})},t.logAutoFolderEducationModal=function({action_source:e,event_name:t,file_nsid:r,user_id:s,source:i,modal_session_id:n,open_ts:o,close_ts:a}){m({user_id:s,event_name:t,action_source:e,file_nsid:r,extra:{source:i||null,modal_session_id:n,open_ts:o||null,close_ts:a||null}})},t.logApprovalActions=function({user_id:e,event_name:t,action_surface:r,file_sjid:s,file_nsid:i,file_extension:n,file_path:o,file_id:a,comment_id:l,thread_id:u,approval_status:c,details_length:_}){m({user_id:e,event_name:t,file_sjid:s,file_nsid:i,file_extension:n,file_path:o,file_id:a,extra:{action_surface:r||null,comment_id:l||null,thread_id:u||null,approval_status:c||null,details_length:(null==_?void 0:_.toString())||null}})}})),define("metaserver/static/js/modules/clean/react/browse/logger",["require","exports","tslib","metaserver/static/js/modules/clean/logging/hive/schemas/web-user-action","metaserver/static/js/modules/clean/logging/telemetry"],(function(e,t,r,s,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.screenSizeInjector=t.browseLogger=t.BrowseLogger=void 0,i=r.__importStar(i);class n{constructor(e){this.registerRowInjector=e=>{this.rowInjectors.push(e)},this.log=e=>{let t={};this.rowInjectors.forEach(e=>{const r=e();t=Object.assign(Object.assign(Object.assign({},t),r),{extra:Object.assign(Object.assign({},t.extra),r.extra)})}),this.hiveLogger.log(new s.WebUserActionRow(Object.assign(Object.assign(Object.assign({},t),e),{extra:Object.assign(Object.assign({},t.extra),e.extra)})))},this.hiveLogger=e||new i.HiveLogger,this.rowInjectors=[]}}t.BrowseLogger=n,t.browseLogger=new n,t.screenSizeInjector=()=>({browser_width:window.innerWidth,browser_height:window.innerHeight,device_width:window.screen&&window.screen.width,device_height:window.screen&&window.screen.height})})),define("metaserver/static/js/dropbox/proto/js_init_data/user_survey/user_survey",["require","exports","tslib","protobufjs/minimal","metaserver/static/js/dropbox/proto/user_survey_attributes/user_survey_attributes"],(function(e,t,r,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.user_survey=void 0;const i=(s=r.__importStar(s)).Reader,n=s.Writer,o=(s.util,s.roots.default||(s.roots.default={}));var a;t.default=o,t.user_survey=o.user_survey=((a=o.user_survey||{}).AccountAge=(function(){const e={},t=Object.create(e);return t[e[0]="UNKNOWN"]=0,t[e[1]="UNDER_14_DAYS"]=1,t[e[2]="FROM_14_DAYS_TO_30_DAYS"]=2,t[e[3]="FROM_30_DAYS_TO_90_DAYS"]=3,t[e[4]="FROM_90_DAYS_TO_1_YEAR"]=4,t[e[5]="FROM_1_YEAR_TO_5_YEARS"]=5,t[e[6]="OVER_5_YEARS"]=6,t})(),a.FamilyData=(function(e){function e(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.hasCompletedOnboarding=!1,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.hasCompletedOnboarding&&Object.hasOwnProperty.call(e,"hasCompletedOnboarding")&&t.uint32(8).bool(e.hasCompletedOnboarding),t},e.decode=function(e,t){e instanceof i||(e=i.create(e));let r=void 0===t?e.len:e.pos+t,s=new o.user_survey.FamilyData;for(;e.pos<r;){let t=e.uint32();switch(t>>>3){case 1:s.hasCompletedOnboarding=e.bool();break;default:e.skipType(7&t)}}return s},e.getTypeUrl=function(){return"type.googleapis.com/user_survey.FamilyData"},e})(a.FamilyData||{}),a.UserSurveyInitData=(function(e){function e(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.iframeSrc="",e.prototype.surveyUserId="",e.prototype.isCsmTeam=!1,e.prototype.isTestAccount=!1,e.prototype.skuName=0,e.prototype.anonymizedPath="",e.prototype.isMobile=!1,e.prototype.isPaidTeam=!1,e.prototype.isTeamAdmin=!1,e.prototype.isCdm=!1,e.prototype.isOver_30DaysSinceAccountCreated=!1,e.prototype.isOver_30DaysSinceJoinedTeam=!1,e.prototype.familyData=null,e.prototype.accountAge=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.iframeSrc&&Object.hasOwnProperty.call(e,"iframeSrc")&&t.uint32(10).string(e.iframeSrc),null!=e.surveyUserId&&Object.hasOwnProperty.call(e,"surveyUserId")&&t.uint32(18).string(e.surveyUserId),null!=e.isCsmTeam&&Object.hasOwnProperty.call(e,"isCsmTeam")&&t.uint32(24).bool(e.isCsmTeam),null!=e.isTestAccount&&Object.hasOwnProperty.call(e,"isTestAccount")&&t.uint32(32).bool(e.isTestAccount),null!=e.skuName&&Object.hasOwnProperty.call(e,"skuName")&&t.uint32(40).int32(e.skuName),null!=e.anonymizedPath&&Object.hasOwnProperty.call(e,"anonymizedPath")&&t.uint32(50).string(e.anonymizedPath),null!=e.isMobile&&Object.hasOwnProperty.call(e,"isMobile")&&t.uint32(56).bool(e.isMobile),null!=e.isPaidTeam&&Object.hasOwnProperty.call(e,"isPaidTeam")&&t.uint32(64).bool(e.isPaidTeam),null!=e.isTeamAdmin&&Object.hasOwnProperty.call(e,"isTeamAdmin")&&t.uint32(72).bool(e.isTeamAdmin),null!=e.isCdm&&Object.hasOwnProperty.call(e,"isCdm")&&t.uint32(80).bool(e.isCdm),null!=e.isOver_30DaysSinceAccountCreated&&Object.hasOwnProperty.call(e,"isOver_30DaysSinceAccountCreated")&&t.uint32(88).bool(e.isOver_30DaysSinceAccountCreated),null!=e.isOver_30DaysSinceJoinedTeam&&Object.hasOwnProperty.call(e,"isOver_30DaysSinceJoinedTeam")&&t.uint32(96).bool(e.isOver_30DaysSinceJoinedTeam),null!=e.familyData&&Object.hasOwnProperty.call(e,"familyData")&&o.user_survey.FamilyData.encode(e.familyData,t.uint32(106).fork()).ldelim(),null!=e.accountAge&&Object.hasOwnProperty.call(e,"accountAge")&&t.uint32(112).int32(e.accountAge),t},e.decode=function(e,t){e instanceof i||(e=i.create(e));let r=void 0===t?e.len:e.pos+t,s=new o.user_survey.UserSurveyInitData;for(;e.pos<r;){let t=e.uint32();switch(t>>>3){case 1:s.iframeSrc=e.string();break;case 2:s.surveyUserId=e.string();break;case 3:s.isCsmTeam=e.bool();break;case 4:s.isTestAccount=e.bool();break;case 5:s.skuName=e.int32();break;case 6:s.anonymizedPath=e.string();break;case 7:s.isMobile=e.bool();break;case 8:s.isPaidTeam=e.bool();break;case 9:s.isTeamAdmin=e.bool();break;case 10:s.isCdm=e.bool();break;case 11:s.isOver_30DaysSinceAccountCreated=e.bool();break;case 12:s.isOver_30DaysSinceJoinedTeam=e.bool();break;case 13:s.familyData=o.user_survey.FamilyData.decode(e,e.uint32());break;case 14:s.accountAge=e.int32();break;default:e.skipType(7&t)}}return s},e.getTypeUrl=function(){return"type.googleapis.com/user_survey.UserSurveyInitData"},e})(a.UserSurveyInitData||{}),a)})),define("metaserver/static/js/dropbox/proto/user_survey_attributes/user_survey_attributes",["require","exports","tslib","protobufjs/minimal"],(function(e,t,r,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.user_survey_attributes=void 0;(s=r.__importStar(s)).Reader,s.Writer,s.util;const i=s.roots.default||(s.roots.default={});var n;t.default=i,t.user_survey_attributes=i.user_survey_attributes=((n=i.user_survey_attributes||{}).SkuName=(function(){const e={},t=Object.create(e);return t[e[0]="NONE"]=0,t[e[1]="OTHER_SKU"]=1,t[e[2]="FAMILY_PAYING_MEMBER"]=2,t[e[3]="FAMILY_NONPAYING_MEMBER"]=3,t[e[4]="BASIC"]=4,t[e[5]="TRANSFER"]=5,t[e[6]="PLUS"]=6,t[e[7]="PROFESSIONAL"]=7,t[e[8]="BUSINESS_STANDARD"]=8,t[e[9]="BUSINESS_ADVANCED"]=9,t[e[10]="ENTERPRISE"]=10,t[e[11]="BACKUP"]=11,t})(),n)})),define("metaserver/static/js/modules/clean/user_survey/user_survey",["require","exports","tslib","metaserver/static/js/proto_utils/unpack","metaserver/static/js/dropbox/proto/js_init_data/user_survey/user_survey","metaserver/static/js/modules/clean/viewer","metaserver/static/js/modules/clean/logging/telemetry","metaserver/static/js/modules/clean/logging/hive/schemas/web-user_survey","metaserver/static/js/modules/clean/user_survey/user_survey_util"],(function(e,t,r,s,i,n,o,a,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.moduleInit=t.InternalSurveyFunctionsForTestOnly=t.UserSurvey=t.init=t.USER_SURVEY_AGGREGATE_EVENTS_MAP=void 0;const u=new((o=r.__importStar(o)).HiveLogger);t.USER_SURVEY_AGGREGATE_EVENTS_MAP=new Map([["browse_csat_trigger",[{event:"share_item",eventSurface:"browse"},{event:"move_item",eventSurface:"browse"},{event:"rename_item",eventSurface:"browse"},{event:"delete_item",eventSurface:"browse"},{event:"download_item",eventSurface:"browse"},{event:"upload_item",eventSurface:"browse"},{event:"create_item",eventSurface:"browse"}]],["add_item",[{event:"upload_item",eventSurface:"browse"},{event:"create_item",eventSurface:"browse"}]]]);const c=["/individual"];let _=null,d=null,m=void 0,g=[];function v(e,t){_&&(_.height=e,_.width=t)}function f(e){const t=e.data.eventType;if(e.origin===d&&e.source===(null==_?void 0:_.contentWindow))switch(t){case"surveyResized":v(e.data.surveyHeight,e.data.surveyWidth);break;case"surveyPresented":u.log(new a.UserSurveyLoggingTableRow({event_name:"shown_survey",user_survey_id:m}));break;case"surveyClosed":v("0","0"),u.log(new a.UserSurveyLoggingTableRow({event_name:"closed_survey",user_survey_id:m}))}}function y(e){_||(d=`https://${e.iframeSrc}`,_=O.createIframe(d)),c.includes(e.anonymizedPath)&&_.classList.add("usersurvey-iframe--bottom-left"),_.addEventListener("load",()=>{A(),p({type:"setUserId",data:{userId:e.surveyUserId}}),m=e.surveyUserId,S("localeCode",l.getCurrentLocaleCode()),S("isCsmTeam",e.isCsmTeam?"true":"false"),S("isTestUser",e.isTestAccount?"true":"false"),S("skuName",l.skuNameToStr(e.skuName)),S("isMobile",e.isMobile?"true":"false"),S("isPaidTeam",e.isPaidTeam?"true":"false"),S("isTeamAdmin",e.isTeamAdmin?"true":"false"),S("isCdm",e.isCdm?"true":"false"),S("isOver30DaysSinceAccountCreated",e.isOver_30DaysSinceAccountCreated?"true":"false"),S("isOver30DaysSinceJoinedTeam",e.isOver_30DaysSinceJoinedTeam?"true":"false"),S("accountAge",l.accountAgeToStr(e.accountAge));const t=n.Viewer.get_viewer();S("isSignedIn",t.is_signed_in?"true":"false"),t.get_users().find(e=>e.is_dropbox_admin)?S("isDropboxer","true"):E("isDropboxer"),e.familyData&&S("hasCompletedAllFamilyOnboarding",e.familyData.hasCompletedOnboarding?"true":"false"),g.forEach(e=>p(e)),g=[]}),window.addEventListener("resize",A),window.addEventListener("message",f)}function p(e){const t=_||document&&document.getElementById("usersurvey-iframe"),r=d||t&&t.src;if(t&&t.contentWindow&&r){(function(e){switch(e.type){case"trackEvent":u.log(new a.UserSurveyLoggingTableRow({event_name:"track_event",user_survey_id:m,extras:{event_name:e.data.eventName}}));break;case"addAttribute":u.log(new a.UserSurveyLoggingTableRow({event_name:"add_attribute",user_survey_id:m,extras:{key:e.data.key,value:e.data.value.toString()}}))}})(e);const s={eventType:e.type,eventData:e.data};t.contentWindow.postMessage(s,r)}else g.push(e)}function b(e,t){const r="web_"+e;p({type:"trackEvent",data:{eventName:r}}),p({type:"trackEvent",data:{eventName:r+"_from_"+t}})}function S(e,t){p({type:"addAttribute",data:{key:e,value:t}})}function E(e){p({type:"removeAttribute",data:{key:e}})}function A(){p({type:"setWindowDimensions",data:{height:window.innerHeight,width:window.innerWidth}})}t.init=y,t.UserSurvey={trackEvent:function(e,r){b(e,r),t.USER_SURVEY_AGGREGATE_EVENTS_MAP.forEach((t,s)=>{for(const i of t)e===i.event&&i.eventSurface===r&&(p({type:"trackEvent",data:{eventName:s}}),b(s,r))})},addAttribute:S,addCallback:function(){},removeAttribute:E};const O={init:y,createIframe:function(e){const t=document.createElement("iframe");return t.src=e,t.setAttribute("sandbox","allow-scripts allow-same-origin allow-popups"),t.setAttribute("class","usersurvey-iframe"),t.setAttribute("id","usersurvey-iframe"),t.setAttribute("allowTransparency","true"),t.setAttribute("height","0"),t.setAttribute("width","0"),document.body.insertBefore(t,document.body.childNodes[0]),t},receiveMessage:f};t.InternalSurveyFunctionsForTestOnly=O,t.moduleInit=function(e){y(s.unpackProto(e,i.user_survey.UserSurveyInitData))}})),define("metaserver/static/js/modules/clean/user_survey/user_survey_util",["require","exports","tslib","metaserver/static/js/dropbox/proto/js_init_data/user_survey/user_survey","metaserver/static/js/dropbox/proto/user_survey_attributes/user_survey_attributes","metaserver/static/js/modules/constants/page_load","metaserver/static/js/modules/constants/locales","lodash","metaserver/static/js/modules/clean/ts_utils"],(function(e,t,r,s,i,n,o,a,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.accountAgeToStr=t.skuNameToStr=t.getCurrentLocaleCode=void 0,o=r.__importStar(o),t.getCurrentLocaleCode=function(){var e;const t=null===(e=a.find(o.LIST_OF_LOCALES_WITHOUT_INTERNAL,e=>e.localeCode===n.USER_LOCALE))||void 0===e?void 0:e.localeCode;return t||"unknown"},t.skuNameToStr=function(e){switch(e){case i.user_survey_attributes.SkuName.NONE:return"none";case i.user_survey_attributes.SkuName.OTHER_SKU:return"other";case i.user_survey_attributes.SkuName.FAMILY_PAYING_MEMBER:return"family_paying_member";case i.user_survey_attributes.SkuName.FAMILY_NONPAYING_MEMBER:return"family_nonpaying_member";case i.user_survey_attributes.SkuName.BASIC:return"basic";case i.user_survey_attributes.SkuName.TRANSFER:return"transfer";case i.user_survey_attributes.SkuName.PLUS:return"plus";case i.user_survey_attributes.SkuName.PROFESSIONAL:return"professional";case i.user_survey_attributes.SkuName.BUSINESS_ADVANCED:return"business_advanced";case i.user_survey_attributes.SkuName.BUSINESS_STANDARD:return"business_standard";case i.user_survey_attributes.SkuName.ENTERPRISE:return"enterprise";case i.user_survey_attributes.SkuName.BACKUP:return"backup";default:l.enforceExhaustive(e)}},t.accountAgeToStr=e=>{switch(e){case s.user_survey.AccountAge.UNKNOWN:return"unknown";case s.user_survey.AccountAge.UNDER_14_DAYS:return"under_14_days";case s.user_survey.AccountAge.FROM_14_DAYS_TO_30_DAYS:return"14_to_30_days";case s.user_survey.AccountAge.FROM_30_DAYS_TO_90_DAYS:return"30_to_90_days";case s.user_survey.AccountAge.FROM_90_DAYS_TO_1_YEAR:return"90_days_to_1_year";case s.user_survey.AccountAge.FROM_1_YEAR_TO_5_YEARS:return"1_to_5_years";case s.user_survey.AccountAge.OVER_5_YEARS:return"over_5_years";default:return"unknown"}}})),define("metaserver/static/js/modules/clean/logging/hive/schemas/web-user_survey",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserSurveyLoggingTableRow=void 0;t.UserSurveyLoggingTableRow=class{constructor(e){this.category="web-user_survey",this.session_id=null,this.team_id=null,this.ua_browser_name=null,this.ua_browser_version=null,this.locale_user_selected=null,this.user_agent=null,this.active_user_id=null,this.user_id=null,this.event_name=e.event_name,this.user_survey_id=e.user_survey_id,this.extras=e.extras,Object.seal(this)}}}));
//# sourceMappingURL=pkg-browse-uncommon.min.js-vflhVNnPB.map