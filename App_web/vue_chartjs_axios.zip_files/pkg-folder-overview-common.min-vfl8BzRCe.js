define("metaserver/static/js/modules/clean/react/action_bar/file_actions/portable/star/portable_star",["require","exports","tslib","metaserver/static/js/api_v2/user_client"],(function(e,t,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.star=void 0,t.star=({userId:e,fileId:t,newStarredValue:o},{onSuccess:s,onError:i})=>a.__awaiter(void 0,void 0,void 0,(function*(){const a=new r.UserApiV2Client;try{yield a.ns("starred").rpc("update_item_v2",{id:t,is_starred:o},{subjectUserId:e}),null==s||s()}catch(e){null==i||i()}}))})),define("metaserver/static/js/modules/clean/react/home/starred/conditional_interface",["require","exports","metaserver/static/js/modules/clean/react/home/starred/starred_resource_store","metaserver/static/js/modules/clean/react/starred/star","metaserver/static/js/modules/clean/react/home/recents/recent_activity_starred","metaserver/static/js/modules/clean/react/home/starred/starred_view","metaserver/static/js/modules/clean/react/starred/id_type_pair","metaserver/static/js/modules/clean/react/files_page/data/store","metaserver/static/js/modules/clean/react/files_page/data/action_creators","metaserver/static/js/modules/clean/react/starred/redux/store","metaserver/static/js/modules/clean/react/starred/redux/slice"],(function(e,t,a,r,o,s,i,n,l,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StarredActions=t.fetchMissingStarredStatuses=t.getStoreForStarred=t.filesPageAppInit=t.getStoreForFilesPage=t.idTypePairToString=t.StarredView=t.getIdTypePairFromRecentItem=t.Star=t.getStarredResourceStore=void 0,Object.defineProperty(t,"getStarredResourceStore",{enumerable:!0,get:function(){return a.getStarredResourceStore}}),Object.defineProperty(t,"Star",{enumerable:!0,get:function(){return r.Star}}),Object.defineProperty(t,"getIdTypePairFromRecentItem",{enumerable:!0,get:function(){return o.getIdTypePairFromRecentItem}}),Object.defineProperty(t,"StarredView",{enumerable:!0,get:function(){return s.StarredView}}),Object.defineProperty(t,"idTypePairToString",{enumerable:!0,get:function(){return i.idTypePairToString}}),Object.defineProperty(t,"getStoreForFilesPage",{enumerable:!0,get:function(){return n.getStoreForFilesPage}}),Object.defineProperty(t,"filesPageAppInit",{enumerable:!0,get:function(){return l.appInit}}),Object.defineProperty(t,"getStoreForStarred",{enumerable:!0,get:function(){return c.getStoreForStarred}}),Object.defineProperty(t,"fetchMissingStarredStatuses",{enumerable:!0,get:function(){return d.fetchMissingStarredStatuses}}),Object.defineProperty(t,"StarredActions",{enumerable:!0,get:function(){return d.StarredActions}})})),define("metaserver/static/js/modules/clean/react/starred/star",["require","exports","tslib","classnames","react","react-redux","dig-components/icons","dig-components/icons/src","dig-components/tooltips","metaserver/static/js/modules/clean/react/components/css","metaserver/static/js/modules/clean/react/starred/actions","metaserver/static/js/modules/clean/react/starred/starred_activity_logger","metaserver/static/js/modules/clean/react/starred/store","metaserver/static/js/modules/clean/react/starred/redux/selectors","metaserver/static/js/modules/clean/react/starred/redux/slice","metaserver/static/js/modules/clean/react/starred/redux/types","metaserver/static/js/modules/core/i18n","metaserver/static/js/modules/clean/react/common/uuid","metaserver/static/js/modules/constants/web_experience_constants"],(function(e,t,a,r,o,s,i,n,l,c,d,u,p,m,g,v,f,_,S){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Star=void 0,r=a.__importDefault(r),o=a.__importDefault(o);class h extends o.default.PureComponent{constructor(e){super(e),this.onStoreUpdate=()=>{const e=this.getStateFromStore();this.setState(e)},this.onClick=e=>{const{isStarred:t,isLoading:a}=this.state;if(e.stopPropagation(),e.preventDefault(),!a){const e=!t,{id:a,idType:r,isDir:o,itemName:s,onStarClick:i,source:n,user:l}=this.props;u.starredActivityLogger.logClick(l,a,r,o,n,e),i&&i(e),d.StarredActions.updateWithSnackbar(l.role,a,r,e,s)}},this.state=this.getStateFromStore(),this.removeStoreListener=p.StarredStore.addListener(this.onStoreUpdate)}componentWillUnmount(){this.removeStoreListener&&this.removeStoreListener()}UNSAFE_componentWillReceiveProps(e){this.props.id===e.id&&this.props.idType===e.idType||this.setState(this.getStateFromStore(e))}getStateFromStore(e=this.props){const t={id:e.id,type:e.idType};return{isLoading:p.StarredStore.getIsLoading(t),isStarred:p.StarredStore.getIsStarred(t),starID:_.generateUUID("star-")}}getTooltipContent(){const{isStarred:e}=this.state;return this.props.isReadOnly?e?f.intl.formatMessage({id:"LAVXPn",defaultMessage:"Starred"}):null:e?f.intl.formatMessage({id:"XQNf7s",defaultMessage:"Remove from Starred"}):f.intl.formatMessage({id:"iGfiaV",defaultMessage:"Add to Starred"})}render(){const{isStarred:e,isLoading:t}=this.state,{starButtonClassName:a,alwaysShowUnstarred:s}=this.props;if(void 0===e)return null;if(this.props.isReadOnly&&!e)return null;const c={star__toggle:!0,"star__toggle--starred":e,"star__toggle--unstarred":!e&&!this.props.isTabbing&&!s,"star__toggle--loading":t},d=this.getTooltipContent();return o.default.createElement(l.Tooltip,{title:d,placement:this.props.tooltipPlacement||"top"},o.default.createElement("button",{className:r.default(c,a),role:"button","aria-pressed":e,"aria-label":d,onClick:this.onClick,onDoubleClick:this.onClick,disabled:this.props.isReadOnly,tabIndex:this.props.tabIndex,id:this.state.starID,"aria-labelledby":r.default(this.state.starID,this.props.ariaLabelledBy)},o.default.createElement("span",{hidden:!0},d),o.default.createElement(i.UIIcon,{src:e?n.StarFill:n.StarLine})))}}h.displayName="Star";const y=({user:e,id:t,idType:a,isDir:c,source:d,itemName:p,onStarClick:S,tooltipPlacement:h,isReadOnly:y,isTabbing:b,tabIndex:A,starButtonClassName:E,alwaysShowUnstarred:I,ariaLabelledBy:T})=>{const R=s.useSelector(e=>m.getFileStarredData(e,t));let C=!1,w=!0;(null==R?void 0:R.loadingState)===v.StarredLoadingStateEnum.LOAD_SUCCESS&&(C=R.isStarred,w=!1);const[M]=o.default.useState(()=>_.generateUUID("star-")),j=s.useDispatch(),P=o.default.useMemo(()=>y?C?f.intl.formatMessage({id:"LAVXPn",defaultMessage:"Starred"}):null:C?f.intl.formatMessage({id:"XQNf7s",defaultMessage:"Remove from Starred"}):f.intl.formatMessage({id:"iGfiaV",defaultMessage:"Add to Starred"}),[C,y]),L=o.default.useCallback(r=>{if(r.stopPropagation(),r.preventDefault(),!w){const r=!C;u.starredActivityLogger.logClick(e,t,a,c,d,r),S&&S(r),j(g.updateStarredStatus({id:t,idType:a,newStatus:r,itemName:p,showSnackbar:!0}))}},[w,C]);if(void 0===C)return null;if(y&&!C)return null;const O={star__toggle:!0,"star__toggle--starred":C,"star__toggle--unstarred":!C&&!b&&!I,"star__toggle--loading":w};return o.default.createElement(l.Tooltip,{title:P,placement:h||"top"},o.default.createElement("button",{className:r.default(O,E),role:"button","aria-pressed":C,"aria-label":P,onClick:L,onDoubleClick:L,disabled:y,tabIndex:A,id:M,"aria-labelledby":r.default(M,T)},o.default.createElement("span",{hidden:!0},P),o.default.createElement(i.UIIcon,{src:C?n.StarFill:n.StarLine})))};y.displayName="StarReduxFc";const b=e=>S.STARRED_STORE_REDUX?o.default.createElement(y,Object.assign({},e)):o.default.createElement(h,Object.assign({},e));b.displayName="_Star",t.Star=c.requireCssWithComponent(b,["/static/css/starred/star-vflRNeO9W.css"])})),define("metaserver/static/js/modules/clean/react/starred/starred_activity_logger",["require","exports","metaserver/static/js/modules/clean/react/home/api","metaserver/static/js/modules/clean/react/home/starred/constants","metaserver/static/js/modules/clean/react/starred/constants","metaserver/static/js/modules/clean/web_user_action_logger","metaserver/static/js/modules/clean/web_user_action_events"],(function(e,t,a,r,o,s,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.starredActivityLogger=t.StarredActivityLogger=void 0;const n=[o.StarredSource.HOME_STARRED,o.StarredSource.HOME_RECENTS];class l{logClick(e,t,o,l,c,d){if("BROWSE"===c)return Promise.resolve();const u=[];if(n.includes(c)){const s=d?r.StarredLoggingTypes.CLICK_STAR:r.StarredLoggingTypes.CLICK_UNSTAR;u.push(a.logHomeActivity({eventName:s,role:e.role,extra:{resource_id:t,id_type:o,is_dir:l}}))}const p=d?i.WebUserActionLogEvent.STAR:i.WebUserActionLogEvent.REMOVE_STAR;return u.push(s.WebUserActionLog.log(e.id,p,{resource_id:t,id_type:o,is_dir:l,role:e.role,source:c})),Promise.all(u)}}t.StarredActivityLogger=l,t.starredActivityLogger=new l})),define("typescript/component_libraries/files_components/src/common/format_bytes",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatBytes=t.SWITCH_UNIT_THRESHOLD=void 0,t.SWITCH_UNIT_THRESHOLD=900,t.formatBytes=function(e,a,r=2,o=!0,s=!0,i=!0){a=i?parseFloat(a):Math.max(0,parseFloat(a));const n=Math.abs(a);let l,c;return n<1024?(r=0,l=a,c=e.formatMessage({id:"se/5fs",defaultMessage:"{count, plural, one{byte} other{bytes}}"},{count:a}),o=!0):n<1024*t.SWITCH_UNIT_THRESHOLD?(l=a/1024,c=e.formatMessage({id:"fcOrPH",defaultMessage:"KB"})):n<1048576*t.SWITCH_UNIT_THRESHOLD?(l=a/1048576,c=e.formatMessage({id:"UFZYVH",defaultMessage:"MB"})):n<1073741824*t.SWITCH_UNIT_THRESHOLD||0===r&&a<1099511627776?(l=a/1073741824,c=e.formatMessage({id:"5nCO1R",defaultMessage:"GB"})):(l=a/1099511627776,c=e.formatMessage({id:"4rrpQj",defaultMessage:"TB"})),`${e.formatNumber(l,{maximumFractionDigits:r,minimumFractionDigits:s?0:r})}${o?" ":""}${c}`}})),define("metaserver/static/js/modules/clean/react/hellosign/send_for_signature_tooltip/async_send_for_signature_tooltip",["require","exports","tslib","metaserver/static/js/modules/clean/react/async/loadable","metaserver/static/js/modules/clean/web_timing_logger","metaserver/static/js/modules/clean/react/browse/data/store"],(function(e,t,a,r,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncSendForSignatureTooltip=void 0,t.AsyncSendForSignatureTooltip=r.Loadable({loader:()=>a.__awaiter(void 0,void 0,void 0,(function*(){yield o.waitForTTI();const{SendForSignatureToolTip:t}=yield new Promise((t,a)=>{e(["metaserver/static/js/modules/clean/react/hellosign/send_for_signature_tooltip/send_for_signature_tooltip"],t,a)}).then(a.__importStar);return s.getStoreForBrowse(),t}))})})),define("metaserver/static/js/modules/clean/react/comments2/data/mentions_api",["require","exports","tslib","lodash","metaserver/static/js/modules/clean/contacts/bloodhound_contacts_v2","metaserver/static/js/modules/clean/contacts/data_v2","metaserver/static/js/modules/clean/react/comments2/transforms"],(function(e,t,a,r,o,s,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mentionsApi=t.MentionsApiImpl=void 0,r=a.__importStar(r);class n{constructor(e,t=!1){this.cache={},this.filterContact=e=>{const t=!!e.group_id,a=!this.allowMentionSelf&&e.email===this.user.email;return!(t||a)},this.updateCache=(e,t,a)=>{let r;const o=t.map(i.contactToIMentionUser);if(a){r=[...this.cache[e]||[],...o]}else r=o;return this.cache=Object.assign(Object.assign({},this.cache),{[e]:r}),this.cache},this.user=e,this.allowMentionSelf=t,this.dataSource=new s.ContactsDataSourceV2(e,this.filterContact)}query(e,t,a){this.dataSource.search(e,a=>{t(this.updateCache(e,a,!1))},r=>{(a||t)(this.updateCache(e,r,!0))})}getMatchesWithStarterSuggestions(){const e=o.BloodhoundContactsV2.getAll(this.user).filter(this.filterContact).map(i.contactToIMentionUser),t=r.sortBy(e.slice(0,50),e=>e.name||e.email);return this.cache=Object.assign(Object.assign({},this.cache),{"":t}),this.cache}}t.MentionsApiImpl=n,t.mentionsApi=function(e,t){return e?new n(e,t):{cache:{},query:()=>{},getMatchesWithStarterSuggestions:()=>({})}}})),define("metaserver/static/js/modules/clean/react/comments2/components/comments_translations",["require","exports","metaserver/static/js/modules/core/i18n"],(function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.commentsMasterLocalization=void 0,t.commentsMasterLocalization={intl:a.intl}})),define("metaserver/static/js/modules/clean/react/comments2/transforms",["require","exports","tslib","metaserver/static/js/modules/core/user_i18n"],(function(e,t,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.contactToIMentionUser=t.sharingTextAndUsersToICommentContent=t.dbxUserToIUser=void 0,r=a.__importStar(r),t.dbxUserToIUser=function(e){return{id:e.account_id,name:{display:e.display_name,initials:r.getInitials(e.display_name),public:r.getShortName(e.display_name)},photoUrl:e.photo_circle_url}},t.sharingTextAndUsersToICommentContent=function(e,t){if(!t.length)return{metadata:[],text:e};const a=[],o=[];let s=0;for(const e of t){let t,i;"accountId"in e?(t=r.getShortName(e.displayName),i={type:"id",identifier:e.accountId}):(t=e.email,i={type:"email",identifier:e.email}),t&&(t="@"+t,a.push(t),o.push({location:{start:s,end:s+t.length},type:"mention",user:i}),s+=t.length+1)}return a.push(e),{text:a.join(" "),metadata:o}},t.contactToIMentionUser=function(e){return{id:e.dbx_account_id,email:e.email,name:{display:e.name,initials:r.getInitials(e.name),public:r.getShortName(e.name)},photoUrl:e.photo_url||e.avatar_url}}})),define("typescript/libraries/comments2/src/l10n",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCommentsStrings=void 0,t.getCommentsStrings=function(e){return{intl:e}}})),define("typescript/component_libraries/flows/src/components/contact-typeahead/index",["require","exports","tslib","react","dig-components/typeahead","dig-components/text_fields","dig-components/chips","dig-components/avatar","react-intl","dig-components/typography","dig-components/tooltips"],(function(e,t,a,r,o,s,i,n,l,c,d){"use strict";var u;Object.defineProperty(t,"__esModule",{value:!0}),t.TypeaheadEmailSuggestion=t.TypeaheadSuggestion=t.ContactTypeahead=t.getContactKey=t.ValidationResult=void 0,r=a.__importStar(r),(u=t.ValidationResult||(t.ValidationResult={})).OK="OK",u.DUPLICATE="DUPLICATE",u.INVALID="INVALID",u.OVER_RECIPIENTS_LIMIT="OVER_RECIPIENTS_LIMIT",t.getContactKey=function(e){return`CONTACT-${e.email}`};const p=/[ ,]+/,m=/^['&A-Za-z0-9\._%+-]+@[A-Za-z0-9-][A-Za-z0-9\.-]*\.[A-Za-z]{2,15}$/i;function g(){const e=l.useIntl();return{noMatches:e.formatMessage({id:"T2ynaE",defaultMessage:"No matches"}),selectFromSuggestionErrMsg:e.formatMessage({id:"4gphPK",defaultMessage:"Please select an assignee"}),inviteEmailMsg:t=>e.formatMessage({id:"E9a3yV",defaultMessage:"Invite {email}"},{email:t})}}t.ContactTypeahead=e=>{const[a,l]=r.useState(""),[u,v]=r.useState(!1),[f,_]=r.useState(!1),[S,h]=r.useState(!1),y=r.useRef(null),{noMatches:b,selectFromSuggestionErrMsg:A}=g();r.useEffect(()=>{e.recipients.length>e.recipientNumLimit?_(!0):_(!1),e.recipients.length>0&&e.recipients.filter(e=>e.validationResult!==t.ValidationResult.OK).length>0?v(!0):v(!1)},[e.recipients,e.recipientNumLimit]);const E=t=>{const a=e.recipients.filter(e=>e.email!==t.email);e.onRecipientsChange(a)},I=a=>{if(e.recipients.length>e.recipientNumLimit)return t.ValidationResult.OVER_RECIPIENTS_LIMIT;return e.recipients.find(e=>a.email===e.email)?t.ValidationResult.DUPLICATE:m.test(a.email)?t.ValidationResult.OK:t.ValidationResult.INVALID},T=(a,r,o)=>{if(e.onQueryChange(""),l(""),!a)return!1;if(!a&&!o)return!1;const s=a?[a]:o.split(p).filter(Boolean).map(e=>({email:e})),i={},n=[...e.recipients];for(const e of s){if(e.email in i)continue;const a=I(e);if(a===t.ValidationResult.OVER_RECIPIENTS_LIMIT)break;a!==t.ValidationResult.DUPLICATE&&(i[e.email]=null,e.validationResult=a,n.push(e))}return n.length>e.recipients.length&&e.onRecipientsChange(n),0===n.filter(e=>e.validationResult!==t.ValidationResult.OK).length},R=t=>{T(t,0,a),e.onTypeAheadSelection&&e.onTypeAheadSelection(t)},C=t=>{const a=t.currentTarget.value;l(a),e.onQueryChange(a)},w=t=>{if(8===t.keyCode&&""===a&&e.recipients.length>0&&E(e.recipients[e.recipients.length-1]),(9==t.keyCode||13===t.keyCode)&&""!==a){let t=null;e.suggestions.length>0?t=e.suggestions[0]:m.test(a)&&(t={email:a}),T(t,0,a)}},M=()=>{e.onFocus&&e.onFocus(),h(!0)},j="flows-typeahead__input",P=e.recipients.length>=e.recipientNumLimit,L=()=>r.default.createElement(o.Typeahead.Wrapper,{onSelection:R},({getTriggerProps:l,getContentProps:c})=>r.default.createElement(r.default.Fragment,null,r.default.createElement(s.TextInput.Container,{isInvalid:u||f||!S&&!!a,ref:y},r.default.createElement(s.TextInput.ChipsContainer,null,!!e.recipients.length&&e.recipients.map((e,a)=>r.default.createElement(i.InputChip,{key:a,size:"small",isAlert:e.validationResult!==t.ValidationResult.OK,onDelete:()=>E(e),withAvatarLeft:e.avatarUrl&&r.default.createElement(n.Avatar,{hasNoOutline:!0,size:"xsmall",src:e.avatarUrl})},e.name||e.email)),r.default.createElement(s.TextInput.Input,Object.assign({autoFocus:!0,id:j,placeholder:P?void 0:e.placeholder,"aria-label":e.placeholder,value:a},l({onChange:C,onKeyDown:w}),{disabled:P,onBlur:()=>h(!1),onFocus:M,style:{fontSize:"12px"},autoComplete:"off"})))),!S&&a&&r.default.createElement(s.FormHelperText,{isInvalid:!0},A),r.default.createElement(o.Typeahead.Container,Object.assign({},c(),{triggerRef:{current:y.current},isEmptyQuery:Boolean(a)&&0==e.suggestions.length&&!m.test(a),emptyPrompt:r.default.createElement(o.Typeahead.EmptyPrompt,{placeholderText:b}),onBlur:()=>h(!1),onFocus:()=>h(!0)}),e.suggestions.length>0?r.default.createElement(o.Typeahead.Results,{results:e.suggestions,renderRow:e.renderTypeaheadSuggestion}):Boolean(a)&&r.default.createElement(o.Typeahead.Results,{results:[{email:a}],renderRow:e=>r.default.createElement(t.TypeaheadEmailSuggestion,{suggestion:e})}))));return r.default.createElement(r.default.Fragment,null,e.label&&r.default.createElement(s.FormLabel,{htmlFor:j},r.default.createElement(c.Text,{isBold:!0,size:"small",tagName:"label"},e.label),e.labelSubtext),P&&e.maxNumTooltip?r.default.createElement(d.Tooltip,{title:e.maxNumTooltip},r.default.createElement("span",{style:{display:"inline-block",width:"100%"},tabIndex:0},L())):L())},t.ContactTypeahead.displayName="ContactTypeahead",t.TypeaheadSuggestion=({suggestion:e,getInitials:t})=>{const a=t(e.name||e.email);return r.default.createElement(o.Typeahead.Row,{key:e.email,value:e,withTitle:e.name,withSubtitle:e.email,withLeftAccessory:r.default.createElement(n.Avatar,{src:e.avatarUrl,backgroundColor:n.avatarColorForUserIdentifier(a),hasNoOutline:!0},a),onKeyDown:e=>{e.nativeEvent.stopImmediatePropagation()}})},t.TypeaheadSuggestion.displayName="TypeaheadSuggestion",t.TypeaheadEmailSuggestion=({suggestion:e})=>{const{inviteEmailMsg:t}=g();return r.default.createElement(o.Typeahead.Row,{key:e.email,value:e,withTitle:t(e.email)})},t.TypeaheadEmailSuggestion.displayName="TypeaheadEmailSuggestion"})),define("metaserver/static/js/modules/clean/react/flows/approval/api",["require","exports","metaserver/static/js/api_v2/user_client"],(function(e,t,a){"use strict";function r(e,t,r,o,s,i){const n={file_id:t,comment:{content:i},thread_id:r,status:{".tag":o},approval_type:{".tag":s}};return(new a.UserApiV2Client).ns("flows").rpc("respond_to_approval",n,{subjectUserId:e})}function o(e,t,r,o,s){const i={file_id:t,comment_id:r,comment:{content:s},status:{".tag":o}};return(new a.UserApiV2Client).ns("flows").rpc("edit_approval",i,{subjectUserId:e})}Object.defineProperty(t,"__esModule",{value:!0}),t.getSubmittedApprovalsCount=t.getFileApprovalStatus=t.deleteApprovalThread=t.deleteApproval=t.editApprovalRequest=t.editApprovalResponse=t.resubmitApprovalRequest=t.respondToApprovalRequest=t.createApproval=void 0,t.createApproval=function(e,t,r,o,s){const i={file_id:t,comment:{content:r},status:{".tag":"pending"},approvers:o,requires_all:s};return(new a.UserApiV2Client).ns("flows").rpc("create_approval",i,{subjectUserId:e})},t.respondToApprovalRequest=function(e,t,a,o,s){return r(e,t,a,o?"approved":"rejected","response",s)},t.resubmitApprovalRequest=function(e,t,a,o){return r(e,t,a,"pending","request",o)},t.editApprovalResponse=function(e,t,a,r,s){return o(e,t,a,r?"approved":"rejected",s)},t.editApprovalRequest=function(e,t,a,r){return o(e,t,a,"pending",r)},t.deleteApproval=function(e,t,r){const o={file_id:t,comment_id:r};return(new a.UserApiV2Client).ns("flows").rpc("delete_approval",o,{subjectUserId:e})},t.deleteApprovalThread=function(e,t,r){const o={file_id:t,comment_id:r};return(new a.UserApiV2Client).ns("flows").rpc("delete_approval_thread",o,{subjectUserId:e})},t.getFileApprovalStatus=function(e,t){const r={file_id:t};return(new a.UserApiV2Client).ns("flows").rpc("get_file_status",r,{subjectUserId:e})},t.getSubmittedApprovalsCount=function(e){return(new a.UserApiV2Client).ns("flows").rpc("get_submitted_approvals_count",{},{subjectUserId:e})}})),define("metaserver/static/js/modules/clean/react/flows/approval/approval_delete_modal",["require","exports","tslib","react","dig-components/modal","dig-components/typography","dig-components/buttons","metaserver/static/js/modules/clean/react/flows/approval/api","dig-components/text_fields","react-intl","metaserver/static/js/modules/clean/react/flows/logging/approvals_logger"],(function(e,t,a,r,o,s,i,n,l,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ApprovalDeleteThreadModal=t.ApprovalDeleteCommentModal=void 0,r=a.__importStar(r);const u=({open:e,title:t,body:a,onCancel:n,onDelete:c,error:d,isLoading:u})=>{const{closeButton:m,deleteButton:g,genericError:v}=p();return r.default.createElement(o.Modal,{open:e,onRequestClose:n},r.default.createElement(o.Modal.Header,{hasBottomSpacing:"title-standard"},r.default.createElement(s.Title,null,t)),r.default.createElement(o.Modal.Body,null,r.default.createElement(s.Text,null,a),d&&r.default.createElement(l.FormHelperText,{isInvalid:!0},v)),r.default.createElement(o.Modal.Footer,null,r.default.createElement(i.Button,{variant:"opacity",onClick:n},m),r.default.createElement(i.Button,{variant:"primary",onClick:c,isLoading:u},g)))};u.displayName="ApprovalDeleteModal",t.ApprovalDeleteCommentModal=({userId:e,fileId:t,actor:a,onDeleteSuccess:o,commentId:s})=>{const[i,l]=r.useState(!1),[c,m]=r.useState(!0),[g,v]=r.useState(!1),{getDeleteCommentTitle:f,getDeleteCommentBody:_}=p();r.default.useEffect(()=>{d.PapLogger.logShownRemoveApprovalModal(t,"delete_comment_modal",s)},[]);const S=f(a),h=_(a);return S&&h?r.default.createElement(u,{open:c,onCancel:()=>{d.PapLogger.logRemoveApprovalCancelClick(t,"delete_comment_modal",s),m(!1)},onDelete:()=>{d.PapLogger.logRemoveApprovalConfirmClick(t,"delete_comment_modal",s),l(!1),v(!0),n.deleteApproval(e,t,s).then(()=>{o(),m(!1)}).catch(()=>{l(!0),v(!1)})},title:S,body:h,error:i,isLoading:g}):null},t.ApprovalDeleteCommentModal.displayName="ApprovalDeleteCommentModal",t.ApprovalDeleteThreadModal=({userId:e,fileId:t,threadId:a,onDeleteSuccess:o})=>{const[s,i]=r.useState(!1),[l,c]=r.useState(!0),[m,g]=r.useState(!1),{deleteThreadTitle:v,deleteThreadBody:f}=p();r.default.useEffect(()=>{d.PapLogger.logShownRemoveApprovalModal(t,"delete_approval_modal",a)},[e,t,a]);return r.default.createElement(u,{open:l,onCancel:()=>{d.PapLogger.logRemoveApprovalCancelClick(t,"delete_approval_modal",a),c(!1)},onDelete:()=>{d.PapLogger.logRemoveApprovalConfirmClick(t,"delete_approval_modal",a),i(!1),g(!0),n.deleteApprovalThread(e,t,a).then(()=>{o(),c(!1)}).catch(()=>{i(!0),g(!1)})},title:v,body:f,error:s,isLoading:m})},t.ApprovalDeleteThreadModal.displayName="ApprovalDeleteThreadModal";const p=()=>{const e=c.useIntl();return{getDeleteCommentTitle:t=>"requester"===t?e.formatMessage({id:"l623DN",defaultMessage:"Delete your approval request?"}):"approver"===t?e.formatMessage({id:"a6tb8g",defaultMessage:"Delete your response?"}):null,getDeleteCommentBody:t=>"requester"===t?e.formatMessage({id:"o4wQ1b",defaultMessage:"Your request for approval on this file will be deleted. You’ll be able to start a new approval request."}):"approver"===t?e.formatMessage({id:"lTKaYp",defaultMessage:"Your response to the approval request on this file will be deleted. You’ll be able to submit a new response."}):null,closeButton:e.formatMessage({id:"67AKp5",defaultMessage:"Cancel"}),deleteButton:e.formatMessage({id:"sDOGa0",defaultMessage:"Delete"}),genericError:e.formatMessage({id:"cdCpqV",defaultMessage:"Something went wrong. Please try again later."}),deleteThreadTitle:e.formatMessage({id:"bJ6YI2",defaultMessage:"Remove approval request?"}),deleteThreadBody:e.formatMessage({id:"OtCoJc",defaultMessage:"Your request for approval on this file and all of its responses will be deleted. You can always initiate a new approval request."})}}})),define("metaserver/static/js/modules/clean/react/flows/approval/approval_io_client",["require","exports","tslib","metaserver/static/js/modules/clean/react/flows/utils/use_suggestions","metaserver/static/js/modules/core/user_i18n","metaserver/static/js/modules/clean/react/flows/approval/api","metaserver/static/js/modules/clean/react/flows/approval/utils","metaserver/static/js/modules/clean/user_survey/user_survey","metaserver/static/js/modules/clean/logging/hive/schemas/web-approvals_feedback","metaserver/static/js/modules/clean/logging/telemetry","metaserver/static/js/modules/clean/react/flows/logging/approvals_logger"],(function(e,t,a,r,o,s,i,n,l,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.approvalIOClient=void 0;const u=new((c=a.__importStar(c)).HiveLogger);t.approvalIOClient=e=>{const t=e=>{n.UserSurvey.trackEvent(e,"browse")};return{useSuggestions:t=>r.useSuggestions(e,t,!1,!0),getInitials:o.getInitials,createApproval(t,a,r,o){const i=r.map(e=>({email:e.email}));return s.createApproval(e,t,a,i,o)},respondToApprovalRequest:(t,a,r,o)=>s.respondToApprovalRequest(e,t,a,r,o),editApprovalResponse:(t,a,r,o)=>s.editApprovalResponse(e,t,a,r,o),showApprovalDeleteCommentModal(t,a,r,o){i.launchApprovalDeleteCommentModal(e,t,a,r,o)},editApprovalRequest:(t,a,r)=>s.editApprovalRequest(e,t,a,r),resubmitApprovalRequest:(t,a,r)=>s.resubmitApprovalRequest(e,t,a,r),showApprovalDeleteThreadModal(t,a,r){i.launchApprovalDeleteThreadModal(e,t,a,r)},triggerSprigSurvey(){return a.__awaiter(this,void 0,void 0,(function*(){const{num_requested_approvals:a}=yield s.getSubmittedApprovalsCount(e);1===a?t("approval_requested_one_time"):5===a?t("approval_requested_five_times"):25===a&&t("approval_requested_twenty_five_times")}))},trackUserSurveyEvent:t,logApprovalsFeedback(e,t){u.log(new l.ApprovalsFeedbackLoggingTableRow({is_feature_helpful:e,feedback:t}))},logger:d.PapLogger}}})),define("metaserver/static/js/modules/clean/logging/hive/schemas/web-approvals_feedback",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ApprovalsFeedbackLoggingTableRow=void 0;t.ApprovalsFeedbackLoggingTableRow=class{constructor(e){this.category="web-approvals_feedback",this.user_id=null,this.is_feature_helpful=e.is_feature_helpful,this.feedback=e.feedback,this.timestamp=Date.now(),Object.seal(this)}}})),define("metaserver/static/js/modules/clean/react/flows/approval/utils",["require","exports","tslib","react","metaserver/static/js/modules/clean/react/components/modal","metaserver/static/js/modules/core/i18n","react-intl","metaserver/static/js/modules/clean/react/flows/approval/approval_delete_modal"],(function(e,t,a,r,o,s,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.launchApprovalDeleteThreadModal=t.launchApprovalDeleteCommentModal=void 0,r=a.__importDefault(r),t.launchApprovalDeleteCommentModal=function(e,t,a,l,c){o.Modal.showInstance(r.default.createElement(i.RawIntlProvider,{value:s.intl},r.default.createElement(n.ApprovalDeleteCommentModal,{userId:e,fileId:t,commentId:a,actor:l,onDeleteSuccess:c})))},t.launchApprovalDeleteThreadModal=function(e,t,a,l){o.Modal.showInstance(r.default.createElement(i.RawIntlProvider,{value:s.intl},r.default.createElement(n.ApprovalDeleteThreadModal,{userId:e,fileId:t,threadId:a,onDeleteSuccess:l})))}})),define("metaserver/static/js/modules/clean/react/flows/logging/approvals_logger",["require","exports","tslib","metaserver/static/js/modules/clean/pap/analytics_client","metaserver/static/js/modules/clean/pap/util"],(function(e,t,a,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PapLogger=void 0;const s=(()=>{let t;return{getOrLoadPapEvents:()=>a.__awaiter(void 0,void 0,void 0,(function*(){return t||(t=yield new Promise((t,a)=>{e(["metaserver/static/js/modules/clean/react/flows/logging/approvals_logging_events"],t,a)}).then(a.__importStar)),t}))}})();function i(e,t){let a=void 0;switch(e){case"approved":a=o.getEnumValueForString("APPROVED_APPROVAL_STATUS",t);break;case"rejected":a=o.getEnumValueForString("REJECTED_APPROVAL_STATUS",t);break;case"pending":a=o.getEnumValueForString("PENDING_APPROVAL_STATE",t);break;case"other":a=o.getEnumValueForString("OTHER_APPROVAL_STATE",t)}return a}t.PapLogger={logRequestApprovalClick:(e,t)=>a.__awaiter(void 0,void 0,void 0,(function*(){const a=yield s.getOrLoadPapEvents();r.logEvent(a.Select_RequestApprovalButton.create({actionSurface:e,fileId:t}))})),logShownRequestForm:(e,t)=>a.__awaiter(void 0,void 0,void 0,(function*(){const a=yield s.getOrLoadPapEvents();r.logEvent(a.Shown_RequestApprovalForm.create({actionSurface:t,fileId:e}))})),logFocusApproverTypeahead:(e,t)=>a.__awaiter(void 0,void 0,void 0,(function*(){const a=yield s.getOrLoadPapEvents();r.logEvent(a.Select_RequestApprovalApproverInput.create({actionSurface:t,fileId:e}))})),logRequestFormCancelClick:(e,t)=>a.__awaiter(void 0,void 0,void 0,(function*(){const a=yield s.getOrLoadPapEvents();r.logEvent(a.Select_RequestApprovalFormCancelButton.create({actionSurface:t,fileId:e}))})),logAddApprover:(e,t,o)=>a.__awaiter(void 0,void 0,void 0,(function*(){const a=yield s.getOrLoadPapEvents();r.logEvent(a.Select_RequestApprovalApprover.create({actionSurface:t,fileId:e,approverId:o}))})),logSubmitApprovalSuccess:(e,t,o,i,n,l,c)=>a.__awaiter(void 0,void 0,void 0,(function*(){const a=yield s.getOrLoadPapEvents();r.logEvent(a.Succeed_RequestApproval.create({actionSurface:t,threadId:c,fileId:e,approvalDetailsLength:o,approvers:i,requiresAll:n,numApprovers:l}))})),logApproverOptionsClick:(e,t,o="request_approval_form")=>a.__awaiter(void 0,void 0,void 0,(function*(){const a=yield s.getOrLoadPapEvents();r.logEvent(a.Select_RequestApprovalApproverOption.create({actionSurface:o,fileId:e,requiresAll:t}))})),logRespondClick:(e,t)=>a.__awaiter(void 0,void 0,void 0,(function*(){const a=yield s.getOrLoadPapEvents();r.logEvent(a.Select_RespondApprovalButton.create({actionSurface:"respond_approval_form",threadId:t,fileId:e}))})),logShownRespondForm:(e,t)=>a.__awaiter(void 0,void 0,void 0,(function*(){const a=yield s.getOrLoadPapEvents();r.logEvent(a.Shown_RespondApprovalForm.create({actionSurface:"respond_approval_form",threadId:t,fileId:e}))})),logApproveChipClick:(e,t,o)=>a.__awaiter(void 0,void 0,void 0,(function*(){const a=yield s.getOrLoadPapEvents();o?r.logEvent(a.Select_RespondApprovalApproveButton.create({actionSurface:"respond_approval_form",threadId:t,fileId:e})):r.logEvent(a.Select_RespondApprovalRejectButton.create({actionSurface:"respond_approval_form",threadId:t,fileId:e}))})),logRespondFormCancelClick:e=>a.__awaiter(void 0,void 0,void 0,(function*(){const t=yield s.getOrLoadPapEvents();r.logEvent(t.Select_RespondApprovalFormCancelButton.create({actionSurface:"respond_approval_form",fileId:e}))})),logSubmitResponseSuccess:(e,t,o,n)=>a.__awaiter(void 0,void 0,void 0,(function*(){const a=yield s.getOrLoadPapEvents();r.logEvent(a.Succeed_RespondApproval.create({actionSurface:"respond_approval_form",threadId:o,fileId:t,approvalStatus:i(e,a.Succeed_RespondApproval.ApprovalStatus),approvalDetailsLength:n}))})),logResubmitRequestClick:(e,t)=>a.__awaiter(void 0,void 0,void 0,(function*(){const a=yield s.getOrLoadPapEvents();r.logEvent(a.Select_ResubmitApprovalButton.create({actionSurface:"respond_approval_form",threadId:t,fileId:e}))})),logResubmitRequestSuccess:(e,t,o)=>a.__awaiter(void 0,void 0,void 0,(function*(){const a=yield s.getOrLoadPapEvents();r.logEvent(a.Succeed_ResubmitRequestApproval.create({actionSurface:"respond_approval_form",fileId:e,threadId:t,approvalDetailsLength:o}))})),logShownRemoveApprovalModal:(e,t,o)=>a.__awaiter(void 0,void 0,void 0,(function*(){const a=yield s.getOrLoadPapEvents();r.logEvent(a.Shown_RemoveApprovalModal.create({actionSurface:t,fileId:e,commentId:o}))})),logRemoveApprovalConfirmClick:(e,t,o)=>a.__awaiter(void 0,void 0,void 0,(function*(){const a=yield s.getOrLoadPapEvents();r.logEvent(a.Select_RemoveApprovalConfirmButton.create({actionSurface:t,fileId:e,commentId:o}))})),logRemoveApprovalCancelClick:(e,t,o)=>a.__awaiter(void 0,void 0,void 0,(function*(){const a=yield s.getOrLoadPapEvents();r.logEvent(a.Select_RemoveApprovalCancelButton.create({actionSurface:t,fileId:e,commentId:o}))})),logEditApprovalResponseClick:(e,t)=>a.__awaiter(void 0,void 0,void 0,(function*(){const a=yield s.getOrLoadPapEvents();r.logEvent(a.Select_RespondApprovalEditButton.create({actionSurface:"respond_approval_form",fileId:e,threadId:t}))})),logEditApprovalRequestClick:(e,t)=>a.__awaiter(void 0,void 0,void 0,(function*(){const a=yield s.getOrLoadPapEvents();r.logEvent(a.Select_RequestApprovalEditButton.create({actionSurface:"request_approval_form",fileId:e,threadId:t}))})),logApprovalResponseResubmitSuccess:(e,t,o,n)=>a.__awaiter(void 0,void 0,void 0,(function*(){const a=yield s.getOrLoadPapEvents();r.logEvent(a.Succeed_ResubmitRespondApproval.create({actionSurface:"respond_approval_form",fileId:e,threadId:t,approvalStatus:i(o,a.Succeed_RespondApproval.ApprovalStatus),approvalDetailsLength:n}))})),logEditApprovalRequestSuccess:(e,t,o)=>a.__awaiter(void 0,void 0,void 0,(function*(){const a=yield s.getOrLoadPapEvents();r.logEvent(a.Succeed_RequestApprovalEdit.create({actionSurface:"request_approval_form",fileId:e,threadId:o,approvalDetailsLength:t}))}))}})),define("metaserver/static/js/modules/clean/react/flows/utils/use_suggestions",["require","exports","tslib","react","typescript/component_libraries/flows/src/components/contact-typeahead/index","metaserver/static/js/modules/clean/contacts/data_v2","metaserver/static/js/modules/clean/contacts/types","metaserver/static/js/modules/clean/viewer"],(function(e,t,a,r,o,s,i,n){"use strict";function l(e,t,a,r=!1,s=!1){if(!a)return[];const n=new Set;for(const e of t)n.add(o.getContactKey(e));const l=[];for(const t of a)if(t.email&&(t.type===i.default.DBX_ID||t.type===i.default.EMAIL)){if(s&&t.email===e.email)continue;if(r&&(!t.dbx_account_id||!t.dbx_team_id||t.dbx_team_id!==e.team_dbtid))continue;const a={name:t.name,email:t.email,avatarUrl:t.photo_url,dbx_account_id:t.dbx_account_id};n.has(o.getContactKey(a))||l.push(a)}return l}Object.defineProperty(t,"__esModule",{value:!0}),t.useSuggestions=void 0,i=a.__importDefault(i),t.useSuggestions=function(e,t,a=!1,o=!1){const[i,c]=r.useState(""),[d,u]=r.useState([]),p=n.Viewer.get_viewer().get_user_by_id(e),m=new s.ContactsDataSourceV2(p);return r.useEffect(()=>{let e=!1;const r=[];if(!i.length)return void u(r);return m.search(i,e=>{const s=l(p,t,e,a,o);r.push(...s),u(r)},s=>{const i=l(p,t,s,a,o);!e&&i.length>0&&(r.push(...i),u(r))}),()=>{e=!0}},[i,t]),{suggestions:d,onQueryChange:e=>{c(e)}}}}));
//# sourceMappingURL=pkg-folder-overview-common.min.js-vflAqwFdf.map