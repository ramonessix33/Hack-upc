define("metaserver/static/js/modules/clean/abuse/funcaptcha_modal",["require","exports","tslib","react","metaserver/static/js/modules/clean/deprecated_ajax/ajax_jquery","classnames","metaserver/static/js/modules/clean/flux/base_store","metaserver/static/js/modules/clean/flux/dispatcher","metaserver/static/js/modules/clean/flux/store_listener","metaserver/static/js/modules/constants/env","metaserver/static/js/modules/constants/login_and_register","metaserver/static/js/modules/core/browser_detection","metaserver/static/js/modules/core/uri","react-dom","metaserver/static/js/modules/core/dom","metaserver/static/js/modules/clean/metrics/index","metaserver/static/js/modules/core/exception","metaserver/static/js/modules/clean/react/components/css"],(function(e,t,r,s,o,n,i,a,c,u,d,p,_,l,h,g,f,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.recordFunCaptchaLoadingStats=t.openFuncaptchaModal=t.loadFuncaptchaModal=void 0,s=r.__importDefault(s),o=r.__importStar(o),n=r.__importDefault(n),d=r.__importStar(d),p=r.__importStar(p),l=r.__importStar(l),h=r.__importStar(h),f=r.__importStar(f);const E=(e,t)=>{a.Dispatcher.dispatch({type:e,data:t})},S=(e,t,r,s)=>{o.BackgroundRequest({url:"/log_invisible_recaptcha_event",data:{event:e,email:t,source:r,captcha_session_token:s}})};t.loadFuncaptchaModal=()=>{const e=new O,t=c.listenToStores(T,{fs:e},()=>({show:e.show,email:e.email,firstTime:e.firstTime,onSuccess:e.onSuccess,onReady:e.onReady,runningFuncaptcha:e.runningFuncaptcha,source:e.source})),r=document.createElement("div");document.body.insertBefore(r,document.body.firstChild||null),l.render(s.default.createElement(t,null),r)},t.openFuncaptchaModal=(e,t,r,s)=>{S("FUNCAPTCHA_START",e,t,""),E("FUNCAPTCHA_START",{email:e,source:t,onSuccess:r,onReady:s})},t.recordFunCaptchaLoadingStats=(e,t,r,s)=>{g.getMetricsReporter().createStats({ns:"abuse",name:`funcaptcha/${e}`},{is_success:String(r)}).record(t),r||null==s||f.reportException({err:new Error(s),severity:f.SEVERITY.CRITICAL,tags:["content-abuse","funcaptcha"]})};class O extends i.Store{constructor(){super(...arguments),this.show=!1,this.email="",this.runningFuncaptcha=!1,this.firstTime=!0,this.source=""}_new_payload(e){if(e&&e.action&&e.action.type)switch(e.action.type){case"FUNCAPTCHA_START":{this.runningFuncaptcha=!0,this.firstTime=!1;const t=e.action.data;this.email=t.email,this.onSuccess=t.onSuccess,this.onReady=t.onReady,this.source=t.source,this.emit_change();break}case"FUNCAPTCHA_OPEN_MODAL":this.show=!0,this.emit_change();break;case"FUNCAPTCHA_FINISH":this.show=!1,this.runningFuncaptcha=!1,this.onSuccess=void 0,this.onReady=void 0,this.emit_change()}}}class R extends s.default.Component{getIFrame(){return l.findDOMNode(this.refs.iframe)}componentDidMount(){window.addEventListener("message",e=>{if(e.data&&"funcaptcha-component"===e.data.origin&&_.URI.parse(e.origin).getAuthority()===u.FUNCAPTCHA_SERVER)if("invoked"===e.data.event)this.props.onReady&&this.props.onReady();else if("loaded"===e.data.event)S("FUNCAPTCHA_CHALLENGE_SHOWN",this.props.email,this.props.source,e.data.fc_token||""),E("FUNCAPTCHA_OPEN_MODAL");else if("played"===e.data.event){const t=this.props.show?"FUNCAPTCHA_SOLVED":"FUNCAPTCHA_SUCCESS";S(t,this.props.email,this.props.source,e.data.fc_token||""),this.props.onSuccess(e.data.fc_token),E("FUNCAPTCHA_FINISH")}else"executed"===e.data.event&&t.recordFunCaptchaLoadingStats("funcaptcha_api_loading",e.data.latency,e.data.is_success,e.data.err_msg)})}componentWillReceiveProps(e){if(!this.props.runningFuncaptcha&&e.runningFuncaptcha){const t=this.props.firstTime?"load":"play",r=e.source;let s;s="LOGIN"===r?d.FUNCAPTCHA_PUBLIC_KEY:"BUY_PURCHASE_FORM"===r?d.FUNCAPTCHA_PAYMENT_PUBLIC_KEY:d.FUNCAPTCHA_REGISTER_PUBLIC_KEY;const o="funcaptcha-component";this.getIFrame().contentWindow.postMessage({event:t,origin:o,public_key:s,source:r},"*")}}componentDidUpdate(e,t){!e.show&&this.props.show?h.scroll_lock_document():e.show&&!this.props.show&&h.scroll_unlock_document()}render(){const e=new _.URI({scheme:"https",authority:u.FUNCAPTCHA_SERVER,query:{fc_nosuppress:_.URI.parse(window.location.href).getQuery().fc_nosuppress}}).toString(),t=s.default.createElement("iframe",{frameBorder:0,height:"100%",width:"100%",sandbox:"allow-scripts allow-same-origin allow-forms",className:"funcaptcha-frame",src:e,ref:"iframe",key:"iframe-id"});return s.default.createElement("div",{className:n.default({"funcaptcha-modal--hidden-firefox":!this.props.show&&p.mozilla,"funcaptcha-modal--hidden-non-firefox":!this.props.show&&!p.mozilla,"funcaptcha-modal":!0})},s.default.createElement("div",{className:"funcaptcha-div"},t))}}R.displayName="FuncaptchaComponent";const T=m.requireCssWithComponent(R,["/static/css/abuse/funcaptcha_modal-vfl6bl9tt.css"])})),define("metaserver/static/js/modules/clean/auth/u2f",["require","exports","tslib","u2f-api","metaserver/static/js/modules/core/browser_detection"],(function(e,t,r,s,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sign=t.register=t.canUseAuthenticator=t.canRegisterAuthenticator=t.isSupportedOnBrowser=t.LATEST_PROTOCOL=t.PROTOCOLS=t.FidoU2f=void 0,s=r.__importDefault(s),o=r.__importStar(o),(function(e){let t,r;(function(e){e.bt="bt",e.ble="ble",e.nfc="nfc",e.usb="usb"})(t||(t={})),(function(e){e[e.OK=0]="OK",e[e.OTHER_ERROR=1]="OTHER_ERROR",e[e.BAD_REQUEST=2]="BAD_REQUEST",e[e.CONFIGURATION_UNSUPPORTED=3]="CONFIGURATION_UNSUPPORTED",e[e.DEVICE_INELIGIBLE=4]="DEVICE_INELIGIBLE",e[e.TIMEOUT=5]="TIMEOUT"})(r=e.ErrorCode||(e.ErrorCode={}))})(t.FidoU2f||(t.FidoU2f={})),t.PROTOCOLS={"u2f_js1.1":""},t.LATEST_PROTOCOL="u2f_js1.1";const n=window.u2f;function i(){return!0===o.chrome&&parseInt(o.version,10)>=38&&!o.is_mobile_or_tablet()||Boolean(n)}t.isSupportedOnBrowser=i,t.canRegisterAuthenticator=function(e){return!!e&&i()},t.canUseAuthenticator=function(e){return!!e&&i()},t.register=function(e){return new Promise((t,r)=>{(n||s.default).register(e.appId,e.registerRequests,e.registeredKeys,t,e.opt_timeoutSeconds)})},t.sign=function(e){return new Promise((t,r)=>{(n||s.default).sign(e.appId,e.challenge,e.registeredKeys,t,e.opt_timeoutSeconds)})}})),define("metaserver/static/js/modules/clean/auth/authenticator",["require","exports","tslib","metaserver/static/js/modules/clean/auth/u2f","metaserver/static/js/modules/clean/auth/webauthn"],(function(e,t,r,s,o){"use strict";function n(e){return o.canRegisterAuthenticator(e[o.LATEST_PROTOCOL])?o.LATEST_PROTOCOL:s.canRegisterAuthenticator(e[s.LATEST_PROTOCOL])?s.LATEST_PROTOCOL:null}function i(e){return o.canUseAuthenticator(e[o.LATEST_PROTOCOL])?o.LATEST_PROTOCOL:s.canUseAuthenticator(e[s.LATEST_PROTOCOL])?s.LATEST_PROTOCOL:null}Object.defineProperty(t,"__esModule",{value:!0}),t.sign=t.register=t.canUseAuthenticator=t.canRegisterAuthenticator=t.isWebAuthnEnabled=t.PROTOCOLS=void 0,s=r.__importStar(s),o=r.__importStar(o),t.PROTOCOLS=Object.assign(Object.assign({},s.PROTOCOLS),o.PROTOCOLS),t.isWebAuthnEnabled=function(e){return!!e&&!!e[o.LATEST_PROTOCOL]},t.canRegisterAuthenticator=function(e){return void 0===e?s.isSupportedOnBrowser():null!==n(e)},t.canUseAuthenticator=function(e){return null!==i(e)};const a={error:"Authenticator devices are not supported on this browser"},c={error:"Authenticator protocol not supported"};function u(e,t){let r;return r="register"===e?n(t):i(t),null!==r?Promise.resolve(r):s.isSupportedOnBrowser()||o.isSupportedOnBrowser()?Promise.reject(c):Promise.reject(a)}t.register=function(e){return u("register",e).then((function(t){return t in o.PROTOCOLS?o.register(e[t]).then(r=>({protocol:t,challenge_id:e.challenge_id,response:r})):t in s.PROTOCOLS?s.register(e[t]).then(r=>({protocol:t,challenge_id:e.challenge_id,response:r})):Promise.reject(c)}))},t.sign=function(e){return u("sign",e).then((function(t){return t in o.PROTOCOLS?o.sign(e[t]).then(r=>({protocol:t,challenge_id:e.challenge_id,response:r})):t in s.PROTOCOLS?s.sign(e[t]).then(r=>({protocol:t,challenge_id:e.challenge_id,response:r})):Promise.reject(c)}))}})),define("metaserver/static/js/modules/clean/auth/webauthn",["require","exports","tslib","metaserver/static/js/modules/core/browser_detection","metaserver/static/js/modules/clean/security/util"],(function(e,t,r,s,o){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.sign=t.register=t.canUseAuthenticator=t.canRegisterAuthenticator=t.isSupportedOnBrowser=t.LATEST_PROTOCOL=t.PROTOCOLS=void 0,s=r.__importStar(s),t.PROTOCOLS={webauthn_wd07:""},t.LATEST_PROTOCOL="webauthn_wd07",(function(e){e[e.OtherError=1]="OtherError",e[e.SecurityError=2]="SecurityError",e[e.NotAllowedError=3]="NotAllowedError",e[e.InvalidStateError=4]="InvalidStateError",e[e.Canceled=5]="Canceled",e[e.Timeout=6]="Timeout",e[e.NotSupportedError=7]="NotSupportedError"})(n||(n={}));const i={SecurityError:n.SecurityError,NotAllowedError:n.NotAllowedError,InvalidStateError:n.InvalidStateError,AbortError:n.Canceled,TimeoutError:n.Timeout,NotSupportedError:n.NotSupportedError};var a;function c(){return window.PublicKeyCredential&&(!0===s.mozilla&&parseInt(s.version,10)>=60||!0===s.chrome&&parseInt(s.version,10)>=66||!0===s.edge&&parseFloat(s.version)>=17.17682||!0===s.safari&&parseFloat(s.version)>=12.2)}function u(e){return!(!e||!c())&&((!0!==s.edge||!0!==e.disable_on_edge)&&(!0!==s.safari||!0!==e.disable_on_safari))}function d(e){if(e instanceof DOMException){const t=i[e.name];if(void 0!==t)return{errorCode:t,errorData:e.toString&&e.toString()}}return{errorCode:n.OtherError,errorData:e.toString&&e.toString()}}(function(e){e[e.COSE=0]="COSE",e[e.DER=1]="DER"})(a||(a={})),t.isSupportedOnBrowser=c,t.canRegisterAuthenticator=function(e){return u(e)},t.canUseAuthenticator=function(e){return u(e)&&(function(e){if(!0===s.edge&&parseFloat(s.version)>=17.17682&&parseFloat(s.version)<17.17713||!0===s.chrome&&69===parseInt(s.version,10)||!0===s.safari&&parseFloat(s.version)<13.1){if(e.allowCredentials)for(const t of e.allowCredentials)if(t.key_format===a.COSE)return!0;return!1}return!0})(e)},t.register=function(e){const t={challenge:o.b64urldecode(e.challenge),timeout:e.timeout,rp:{id:e.rp.id,name:e.rp.name,icon:e.rp.icon},user:{id:o.b64urldecode(e.user.id),name:e.user.name,displayName:e.user.displayName,icon:e.user.icon},authenticatorSelection:e.authenticatorSelection};return void 0!==e.excludeCredentials&&(t.excludeCredentials=e.excludeCredentials.map(e=>({type:e.type,id:o.b64urldecode(e.id),transports:e.transports}))),void 0!==e.pubKeyCredParams&&(t.pubKeyCredParams=e.pubKeyCredParams.map(e=>({type:e.type,alg:e.alg}))),void 0===e.attestation&&(t.attestation="direct"),navigator.credentials.create({publicKey:t}).then(e=>({response:{clientDataJSON:o.b64urlencode(e.response.clientDataJSON),attestationObject:o.b64urlencode(e.response.attestationObject)}})).catch(e=>d(e))},t.sign=function(e){const t={challenge:o.b64urldecode(e.challenge),timeout:e.timeout,rpId:e.rpId,userVerification:e.userVerification,extensions:e.extensions};return void 0!==e.allowCredentials&&(t.allowCredentials=e.allowCredentials.map(e=>{let t=void 0;return e.transports&&e.transports.length>0&&(t=e.transports),{type:e.type,id:o.b64urldecode(e.id),transports:t}})),navigator.credentials.get({publicKey:t}).then(e=>({id:e.id,response:{clientDataJSON:o.b64urlencode(e.response.clientDataJSON),authenticatorData:o.b64urlencode(e.response.authenticatorData),signature:o.b64urlencode(e.response.signature),userHandle:e.response.userHandle&&o.b64urlencode(e.response.userHandle)}})).catch(e=>d(e))}})),define("metaserver/static/js/modules/clean/sso_login_checks",["require","exports","tslib","metaserver/static/js/modules/clean/deprecated_ajax/ajax_jquery"],(function(e,t,r,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SsoLoginChecks=void 0,s=r.__importStar(s);class o{constructor(e,t,r,s=!0){this._trigger_check_sso_state=this._trigger_check_sso_state.bind(this),this.check_sso_state=this.check_sso_state.bind(this),this.$email_input=e,this.show_sso_fn=t,this.hide_sso_fn=r,this.should_trigger_check=s,this.should_trigger_check&&(this._trigger_check_sso_state(),this.$email_input.on("input keyup change",this._trigger_check_sso_state))}static initClass(){this._sso_check_in_flight={},this._sso_check_cache={}}_trigger_check_sso_state(){const e=this.$email_input.val();return this.check_sso_state(e)}check_sso_state(e){const t=e.trim();if(!t.match(/^[^@\s]+@[^@\s]+\.[A-Za-z]{2,}$/))return this.hide_sso_fn();{const r=t.toLowerCase();if(r in o._sso_check_cache)return this._handle_sso_state(o._sso_check_cache[r]);if(!o._sso_check_in_flight[r])return o._sso_check_in_flight[r]=!0,s.WebRequest({url:"/sso_state",data:{email:t},success:t=>(t=JSON.parse(t),delete o._sso_check_in_flight[r],o._sso_check_cache[r]=t.user_sso_state,this.should_trigger_check&&this.$email_input.val()!==e?this._trigger_check_sso_state():this._handle_sso_state(t.user_sso_state)),error:()=>(delete o._sso_check_in_flight[r],this.hide_sso_fn())})}}_handle_sso_state(e){return"required"===e?this.show_sso_fn(!1):"optional"===e?this.show_sso_fn(!0):this.hide_sso_fn()}}t.SsoLoginChecks=o,o.initClass()})),define("metaserver/static/js/modules/clean/web_register_logging_data",["require","exports","tslib","metaserver/static/js/modules/core/browser","metaserver/static/js/modules/core/transport/query_string_helpers"],(function(e,t,r,s,o){"use strict";function n(){return{signupUrl:s.get_href(),signupReferrer:document.referrer,trackingParams:o.getTrackingParamsAsJSON()}}Object.defineProperty(t,"__esModule",{value:!0}),t.setWebRegisterLoggingData=t.getWebRegisterLoggingData=void 0,s=r.__importStar(s),t.getWebRegisterLoggingData=n,t.setWebRegisterLoggingData=function(e={}){const{signupUrl:t,signupReferrer:r,trackingParams:s}=n(),o={signup_url:t,signup_referrer:r,tracking_params:s};return Object.assign(Object.assign({},e),o)}})),define("metaserver/static/js/modules/clean/react/fedramp/fedramp_util",["require","exports","metaserver/static/js/modules/core/uri"],(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFedrampRedirectUrlIfApplicable=void 0,t.getFedrampRedirectUrlIfApplicable=function(e,t){return e?String(new r.URI({path:"/fedramp_message"}).updateQuery({cont:t})):t}})),define("metaserver/static/js/prod_assets_web_modules/u2f-api",["./common/_commonjsHelpers"],(function(e){"use strict";var t,r={},s={},o=o||{},n=o;return o.EXTENSION_ID="kmendfapggjehodndflmmgagdbamhnfd",o.MessageTypes={U2F_REGISTER_REQUEST:"u2f_register_request",U2F_REGISTER_RESPONSE:"u2f_register_response",U2F_SIGN_REQUEST:"u2f_sign_request",U2F_SIGN_RESPONSE:"u2f_sign_response",U2F_GET_API_VERSION_REQUEST:"u2f_get_api_version_request",U2F_GET_API_VERSION_RESPONSE:"u2f_get_api_version_response"},o.ErrorCodes={OK:0,OTHER_ERROR:1,BAD_REQUEST:2,CONFIGURATION_UNSUPPORTED:3,DEVICE_INELIGIBLE:4,TIMEOUT:5},o.U2fRequest,o.U2fResponse,o.Error,o.Transport,o.Transports,o.SignRequest,o.SignResponse,o.RegisterRequest,o.RegisterResponse,o.RegisteredKey,o.GetJsApiVersionResponse,o.getMessagePort=function(e){if("undefined"!=typeof chrome&&chrome.runtime){var t={type:o.MessageTypes.U2F_SIGN_REQUEST,signRequests:[]};chrome.runtime.sendMessage(o.EXTENSION_ID,t,(function(){chrome.runtime.lastError?o.getIframePort_(e):o.getChromeRuntimePort_(e)}))}else o.isAndroidChrome_()?o.getAuthenticatorPort_(e):o.isIosChrome_()?o.getIosPort_(e):o.getIframePort_(e)},o.isAndroidChrome_=function(){var e=navigator.userAgent;return-1!=e.indexOf("Chrome")&&-1!=e.indexOf("Android")},o.isIosChrome_=function(){return["iPhone","iPad","iPod"].indexOf(navigator.platform)>-1},o.getChromeRuntimePort_=function(e){var t=chrome.runtime.connect(o.EXTENSION_ID,{includeTlsChannelId:!0});setTimeout((function(){e(new o.WrappedChromeRuntimePort_(t))}),0)},o.getAuthenticatorPort_=function(e){setTimeout((function(){e(new o.WrappedAuthenticatorPort_)}),0)},o.getIosPort_=function(e){setTimeout((function(){e(new o.WrappedIosPort_)}),0)},o.WrappedChromeRuntimePort_=function(e){this.port_=e},o.formatSignRequest_=function(e,r,s,n,i){if(void 0===t||t<1.1){for(var a=[],c=0;c<s.length;c++)a[c]={version:s[c].version,challenge:r,keyHandle:s[c].keyHandle,appId:e};return{type:o.MessageTypes.U2F_SIGN_REQUEST,signRequests:a,timeoutSeconds:n,requestId:i}}return{type:o.MessageTypes.U2F_SIGN_REQUEST,appId:e,challenge:r,registeredKeys:s,timeoutSeconds:n,requestId:i}},o.formatRegisterRequest_=function(e,r,s,n,i){if(void 0===t||t<1.1){for(var a=0;a<s.length;a++)s[a].appId=e;var c=[];for(a=0;a<r.length;a++)c[a]={version:r[a].version,challenge:s[0],keyHandle:r[a].keyHandle,appId:e};return{type:o.MessageTypes.U2F_REGISTER_REQUEST,signRequests:c,registerRequests:s,timeoutSeconds:n,requestId:i}}return{type:o.MessageTypes.U2F_REGISTER_REQUEST,appId:e,registerRequests:s,registeredKeys:r,timeoutSeconds:n,requestId:i}},o.WrappedChromeRuntimePort_.prototype.postMessage=function(e){this.port_.postMessage(e)},o.WrappedChromeRuntimePort_.prototype.addEventListener=function(e,t){var r=e.toLowerCase();"message"==r||"onmessage"==r?this.port_.onMessage.addListener((function(e){t({data:e})})):console.error("WrappedChromeRuntimePort only supports onMessage")},o.WrappedAuthenticatorPort_=function(){this.requestId_=-1,this.requestObject_=null},o.WrappedAuthenticatorPort_.prototype.postMessage=function(e){var t=o.WrappedAuthenticatorPort_.INTENT_URL_BASE_+";S.request="+encodeURIComponent(JSON.stringify(e))+";end";document.location=t},o.WrappedAuthenticatorPort_.prototype.getPortType=function(){return"WrappedAuthenticatorPort_"},o.WrappedAuthenticatorPort_.prototype.addEventListener=function(e,t){"message"==e.toLowerCase()?window.addEventListener("message",this.onRequestUpdate_.bind(this,t),!1):console.error("WrappedAuthenticatorPort only supports message")},o.WrappedAuthenticatorPort_.prototype.onRequestUpdate_=function(e,t){var r=JSON.parse(t.data);r.intentURL,r.errorCode;var s=null;r.hasOwnProperty("data")&&(s=JSON.parse(r.data)),e({data:s})},o.WrappedAuthenticatorPort_.INTENT_URL_BASE_="intent:#Intent;action=com.google.android.apps.authenticator.AUTHENTICATE",o.WrappedIosPort_=function(){},o.WrappedIosPort_.prototype.postMessage=function(e){var t=JSON.stringify(e),r="u2f://auth?"+encodeURI(t);location.replace(r)},o.WrappedIosPort_.prototype.getPortType=function(){return"WrappedIosPort_"},o.WrappedIosPort_.prototype.addEventListener=function(e,t){"message"!==e.toLowerCase()&&console.error("WrappedIosPort only supports message")},o.getIframePort_=function(e){var t="chrome-extension://"+o.EXTENSION_ID,r=document.createElement("iframe");r.src=t+"/u2f-comms.html",r.setAttribute("style","display:none"),document.body.appendChild(r);var s=new MessageChannel,n=function(t){"ready"==t.data?(s.port1.removeEventListener("message",n),e(s.port1)):console.error('First event on iframe port was not "ready"')};s.port1.addEventListener("message",n),s.port1.start(),r.addEventListener("load",(function(){r.contentWindow.postMessage("init",t,[s.port2])}))},o.EXTENSION_TIMEOUT_SEC=30,o.port_=null,o.waitingForPort_=[],o.reqCounter_=0,o.callbackMap_={},o.getPortSingleton_=function(e){o.port_?e(o.port_):(0==o.waitingForPort_.length&&o.getMessagePort((function(e){for(o.port_=e,o.port_.addEventListener("message",o.responseHandler_);o.waitingForPort_.length;)o.waitingForPort_.shift()(o.port_)})),o.waitingForPort_.push(e))},o.responseHandler_=function(e){var t=e.data,r=t.requestId;if(r&&o.callbackMap_[r]){var s=o.callbackMap_[r];delete o.callbackMap_[r],s(t.responseData)}else console.error("Unknown or missing requestId in response.")},o.isSupported=function(e){var r=!1;function s(t){r||(r=!0,e(t))}o.getApiVersion((function(e){t=void 0===e.js_api_version?0:e.js_api_version,s(!0)})),setTimeout(s.bind(null,!1),500)},o.sign=function(e,r,s,n,i){void 0===t?o.getApiVersion((function(a){t=void 0===a.js_api_version?0:a.js_api_version,console.log("Extension JS API Version: ",t),o.sendSignRequest(e,r,s,n,i)})):o.sendSignRequest(e,r,s,n,i)},o.sendSignRequest=function(e,t,r,s,n){o.getPortSingleton_((function(i){var a=++o.reqCounter_;o.callbackMap_[a]=s;var c=void 0!==n?n:o.EXTENSION_TIMEOUT_SEC,u=o.formatSignRequest_(e,t,r,c,a);i.postMessage(u)}))},o.register=function(e,r,s,n,i){void 0===t?o.getApiVersion((function(a){t=void 0===a.js_api_version?0:a.js_api_version,console.log("Extension JS API Version: ",t),o.sendRegisterRequest(e,r,s,n,i)})):o.sendRegisterRequest(e,r,s,n,i)},o.sendRegisterRequest=function(e,t,r,s,n){o.getPortSingleton_((function(i){var a=++o.reqCounter_;o.callbackMap_[a]=s;var c=void 0!==n?n:o.EXTENSION_TIMEOUT_SEC,u=o.formatRegisterRequest_(e,r,t,c,a);i.postMessage(u)}))},o.getApiVersion=function(e,t){o.getPortSingleton_((function(r){if(r.getPortType){var s;switch(r.getPortType()){case"WrappedIosPort_":case"WrappedAuthenticatorPort_":s=1.1;break;default:s=0}e({js_api_version:s})}else{var n=++o.reqCounter_;o.callbackMap_[n]=e;var i={type:o.MessageTypes.U2F_GET_API_VERSION_REQUEST,timeoutSeconds:void 0!==t?t:o.EXTENSION_TIMEOUT_SEC,requestId:n};r.postMessage(i)}}))},(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=n,r="undefined"!=typeof navigator&&!!navigator.userAgent,s=r&&navigator.userAgent.match(/Safari\//)&&!navigator.userAgent.match(/Chrome\//),o=r&&navigator.userAgent.match(/Edge\/1[2345]/),i=null;function a(){return i||(i=new Promise((function(e,n){function i(){e({u2f:null})}return r?s?i():void 0!==window.u2f&&"function"==typeof window.u2f.sign?e({u2f:window.u2f}):o||"http:"===location.protocol||"undefined"==typeof MessageChannel?i():void t.isSupported((function(r){r?e({u2f:t}):i()})):i()}))),i}function c(t,r){var s=null!=r?r.errorCode:1,o=e.ErrorNames[""+s],n=new Error(t);return n.metaData={type:o,code:s},n}function u(e){if(!e.u2f){if("http:"===location.protocol)throw new Error("U2F isn't supported over http, only https");throw new Error("U2F not supported")}}e.ErrorCodes={OK:0,OTHER_ERROR:1,BAD_REQUEST:2,CONFIGURATION_UNSUPPORTED:3,DEVICE_INELIGIBLE:4,TIMEOUT:5},e.ErrorNames={0:"OK",1:"OTHER_ERROR",2:"BAD_REQUEST",3:"CONFIGURATION_UNSUPPORTED",4:"DEVICE_INELIGIBLE",5:"TIMEOUT"},e.isSupported=function(){return a().then((function(e){return!!e.u2f}))},e.ensureSupport=function(){return a().then(u)},e.register=function(e,t,r){return Array.isArray(e)||(e=[e]),"number"==typeof t&&void 0===r&&(r=t,t=null),t||(t=[]),a().then((function(s){u(s);var o=s.u2f;return new Promise((function(s,n){var i=e[0].appId;o.register(i,e,t,(function(e){e.errorCode?n(c("Registration failed",e)):(delete e.errorCode,s(e))}),r)}))}))},e.sign=function(e,t){return Array.isArray(e)||(e=[e]),a().then((function(r){u(r);var s=r.u2f;return new Promise((function(r,o){var n=e[0].appId,i=e[0].challenge;s.sign(n,i,e,(function(e){e.errorCode?o(c("Sign failed",e)):(delete e.errorCode,r(e))}),t)}))}))}})(s),(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=s;!(function(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])})(s),e.default=t})(r),e.getDefaultExportFromCjs(r)}));
//# sourceMappingURL=pkg-login-pages-externals.min.js-vflen1PT9.map