define("metaserver/static/js/modules/clean/clipboard_v3",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.copyToClipboard=void 0,t.copyToClipboard=function(e,t,i){const r=document.createElement("input");r.type="text",r.value=e,document.body.appendChild(r),r.select();let o=!1;try{o=document.execCommand("copy")}catch(e){}document.body.removeChild(r),o?null==t||t():null==i||i()}})),define("metaserver/static/js/modules/clean/open_in_mobile_app",["require","exports","tslib","react","dig-components/typography","metaserver/static/js/modules/clean/clipboard_v3","metaserver/static/js/modules/core/i18n","metaserver/static/js/modules/clean/analytics","metaserver/static/js/modules/core/browser","metaserver/static/js/modules/core/browser_detection","metaserver/static/js/modules/core/assert","spectrum-sharing/utils/sharing_constants"],(function(e,t,i,r,o,n,a,s,l,c,d,u){"use strict";function p(){return c.iOS&&(window.location.pathname.startsWith("/s/")||window.location.pathname.startsWith("/sh/")||window.location.pathname.startsWith("/scl/"))}Object.defineProperty(t,"__esModule",{value:!0}),t.CopyUrlLabelText=void 0,r=i.__importDefault(r),s=i.__importStar(s),l=i.__importStar(l),c=i.__importStar(c),t.CopyUrlLabelText=e=>p()?r.default.createElement(o.Text,Object.assign({color:"faint",tagName:"div"},e),a.intl.formatMessage({id:"EvntjN",defaultMessage:"Tapping Get the app will copy a link and open the content in the app"})):null,t.CopyUrlLabelText.displayName="CopyUrlLabelText";class g{static initClass(){this.vischange_listener=void 0,this.open_app_mode=!0,this.try_open_ios_9=e=>{((null==e?void 0:e.startsWith("https://itunes.apple.com/"))||(null==e?void 0:e.startsWith("https://app.adjust.com/")))&&(this._onInstallLoggingHandler(),l.unsafeRedirect(e))},this.fallback_will_launch=!1,this.try_open=(e,t,i)=>{if(this._onOpenLoggingHandler(),this.fallback_will_launch)return;let r=!1;const o=()=>r=!0;document.addEventListener("visibilitychange",o);let n=!1;const a=()=>n=!0;window.addEventListener("pagehide",a),null!=i&&s.ShareTibEventLogger.log_unauth("CLICK_MOBILE_OPEN",u.SHARE_ACTION_ORIGIN_TYPE.WEB_MOBILE,{scl_url:i}),(function(){const t=document.createElement("iframe");t.src=e||"",t.style.display="none",document.body.append(t)})();const l=Date.now();return setTimeout(()=>{this.fallback_will_launch=!1,document.removeEventListener("visibilitychange",o),window.removeEventListener("pagehide",a),!n&&!r&&Date.now()<l+4700&&(null!=i&&s.ShareTibEventLogger.log_unauth("CLICK_MOBILE_INSTALL",u.SHARE_ACTION_ORIGIN_TYPE.WEB_MOBILE,{scl_url:i}),t&&window.location.replace(t))},3200),this.fallback_will_launch=!0}}static _onOpenLoggingHandler(){}static _onInstallLoggingHandler(){}static registerLoggingHandlers(e,t){return this._onOpenLoggingHandler=e,this._onInstallLoggingHandler=t}static open_on_click(e,t,i,r,o,n){const a=i=>{i.preventDefault(),n?this.open_android_intent(n):this.open_ios(e,t,r)};i&&i.addEventListener("click",a)}static open_ios(e,t,i){return p()&&n.copyToClipboard(window.location.href),i?this.try_open_ios_9(t):this.try_open(e,t)}static open_android_intent(e){d.assert(e.startsWith("intent://www.dropbox.com/sm/launch_intent_or_fallback_page"),"intentUrl must use intent:// protocol"),this._onOpenLoggingHandler&&this._onOpenLoggingHandler(),window.location.href=e}static cleanup(){if(this.vischange_listener)return document.removeEventListener("visibilitychange",this.vischange_listener)}}g.initClass(),t.default=g})),define("metaserver/static/js/modules/clean/react/file_viewer/ml_experiment",["require","exports","metaserver/static/js/api_v2/user_client"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchDocClassification=t.ML_EXPERIMENT_EXTENSIONS=t.ML_ENDPOINT_FETCH_TYPES=t.ML_EXPERIMENT_TYPES=void 0,t.ML_EXPERIMENT_TYPES={contract:"CONTRACT",esign:"ESIGN",control:"CONTROL",file:"FILE"},t.ML_ENDPOINT_FETCH_TYPES=["CONTRACT","ESIGN"],t.ML_EXPERIMENT_EXTENSIONS=["pdf","docx"],t.fetchDocClassification=function(e,t){const r={file_id:t};return(new i.UserApiV2Client).ns("hellosign").rpc("get_classification",r,{subjectUserId:e})}})),define("metaserver/static/js/modules/clean/react/file_viewer/controller_mode",["require","exports","metaserver/static/js/api_v2/noauth_client","metaserver/static/js/api_v2/user_client"],(function(e,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchControllerMode=void 0,t.fetchControllerMode=function(e,t){return null!=t?(function(e,t){return(new r.UserApiV2Client).ns("file_viewer").rpc("get_mode",e,{subjectUserId:t.id})})(e,t):(function(e){return(new i.NoAuthApiV2Client).ns("file_viewer").rpc("logged_out/get_mode",e,{})})(e)}})),define("metaserver/static/js/modules/clean/react/file_viewer/data/actions",["require","exports","tslib","metaserver/static/js/modules/clean/react/file_viewer/constants","metaserver/static/js/modules/clean/file_store/actions","metaserver/static/js/modules/clean/previews/data/actions","metaserver/static/js/modules/clean/react/file_viewer/logging","metaserver/static/js/modules/clean/react/file_viewer/data/selectors","metaserver/static/js/modules/clean/file_store/utils","metaserver/static/js/modules/clean/react/file_viewer/data/types","metaserver/static/js/modules/clean/previews/data/util","metaserver/static/js/modules/clean/react/file_viewer/constants","metaserver/static/js/modules/clean/downloads","metaserver/static/js/modules/core/uri","metaserver/static/js/modules/core/browser","metaserver/static/js/modules/clean/react/file_viewer/controller_mode","metaserver/static/js/modules/clean/react/file_viewer/models","metaserver/static/js/modules/clean/react/file_viewer/file_preview_event_emitter","typescript/libraries/file-viewer/src/core/data/modes/types","metaserver/static/js/modules/clean/react/workflows/markup/fabric","metaserver/static/js/modules/clean/react/workflows/markup/selectors","metaserver/static/js/modules/clean/react/file_viewer/prompt/campaign_api","metaserver/static/js/modules/clean/react/size_class/constants","metaserver/static/js/modules/clean/react/file_viewer/ml_experiment","metaserver/static/js/modules/clean/react/branding/api"],(function(e,t,i,r,o,n,a,s,l,c,d,u,p,g,f,m,_,v,b,w,S,y,h,F,M){"use strict";function A(e){return{type:c.Actions.OpenFile,payload:{fileId:e}}}function C(e){return(t,i)=>{const r={[b.FileViewerMode.Default]:D,[b.FileViewerMode.Documentation]:L,[b.FileViewerMode.Commenting]:U,[b.FileViewerMode.Markup]:B,[b.FileViewerMode.Plugins]:x,[b.FileViewerMode.HelloSign]:H,[b.FileViewerMode.ProAnalytics]:N};r[e]&&r[e](t,i)}}function E(e){return v.filePreviewEventEmitter.emit(u.EventType.SidebarModeSelected,_.FilePreviewSession.currentSession,{selected_mode:e}),{type:c.Actions.UpdateMode,payload:{mode:e}}}function k(e){return(t,i)=>{const r=s.getCurrentFileId(i());r&&t((function(e,t){return{type:c.Actions.UpdateRenderStatus,payload:{fileId:e,renderStatus:t}}})(r,e))}}function I(e){return v.filePreviewEventEmitter.emit(u.EventType.SidebarPaneSelected,_.FilePreviewSession.currentSession,{selected_pane:e}),{type:c.Actions.PushSidebarPane,payload:{paneId:e}}}function O(){return{type:c.Actions.ResetSidebarPaneStack}}function P(){return{type:c.Actions.ResetSelectedSidebarControlId}}function T(e){return{type:c.Actions.SetSelectedSidebarControlId,payload:{controlId:e}}}function R(e){const t=e===b.SidebarVisibility.Open?u.EventType.SidebarOpened:u.EventType.SidebarClosed;return v.filePreviewEventEmitter.emit(t,_.FilePreviewSession.currentSession),{type:c.Actions.SetSidebarVisibility,payload:{visibility:e}}}function j(e){return{type:c.Actions.SetTrialMode,payload:{isTrialMode:e}}}function D(e,t){const i=t(),r=s.getMode(i);e(j(!1)),e(P()),r!==b.FileViewerMode.Default&&e(E(b.FileViewerMode.Default))}function V(e,t,i,r){return(o,n)=>{const a=n(),l=s.getSidebar(a).visibility,c=s.getMode(a);l===b.SidebarVisibility.Closed&&o(R(b.SidebarVisibility.Open)),c!==e&&(o(j(!!r&&r(a))),o(T(t)),o(O()),o(I(i)),o(E(e)))}}Object.defineProperty(t,"__esModule",{value:!0}),t.overflowZoomOff=t.overflowZoomOn=t.registerUser=t.pageUp=t.pageDown=t.updateCurrentPageIndex=t.fetchDocClassificationAction=t.fetchBestCampaignsAction=t.fetchActiveUserBrandingInfoAction=t.fetchControllerModeAction=t.disableForceHideToolbar=t.forceHideToolbar=t.resetFileViewerStore=t.setMediaPaused=t.setMediaPlaying=t.pendingFileUploaded=t.download=t.saveForwardRevision=t.restoreRevisionAction=t.switchRevisionAction=t.resetMarkupState=t.setMarkupFormatSubmenu=t.setMarkupFill=t.setMarkupStroke=t.setMarkupDrawingMode=t.updateMarkupCanvasScale=t.setMarkupCanvas=t.setPageDimensions=t.setSidebarVisibility=t.setSelectedSidebarControlId=t.resetSelectedSidebarControlId=t.resetSidebarPaneStack=t.popSidebarPane=t.pushSidebarPane=t.setRenderStatusSuccessForCurrentFile=t.setRenderStatusForCurrentFile=t.openFile=t.updateMode=t.enableMode=t.disableMode=t.changeMode=t.closeFile=t.openFileById=t.dismissAppDownloadInterstitial=t.closeSidebar=t.openSidebar=t.closeFullScreen=t.openFullScreen=void 0,p=i.__importStar(p),f=i.__importStar(f),t.openFullScreen=()=>({type:c.Actions.OpenFullScreen}),t.closeFullScreen=()=>({type:c.Actions.CloseFullScreen}),t.openSidebar=function(e=r.DocType.default,t){return i=>{i({type:c.Actions.OpenSidebar,payload:{type:e}}),a.logUserAction(r.UserAction.ToggleSidebarOn,t)}},t.closeSidebar=function(e=r.DocType.default,t){return i=>{i({type:c.Actions.CloseSidebar,payload:{type:e}}),a.logUserAction(r.UserAction.ToggleSidebarOff,t)}},t.dismissAppDownloadInterstitial=function(){return{type:c.Actions.DismissAppDownloadInterstitial}},t.openFileById=A,t.closeFile=function(){return{type:c.Actions.CloseFile}},t.changeMode=C,t.disableMode=function(e){return{type:c.Actions.DisableMode,payload:{mode:e}}},t.enableMode=function(e){return{type:c.Actions.EnableMode,payload:{mode:e}}},t.updateMode=E,t.openFile=function(e){return(t,r)=>i.__awaiter(this,void 0,void 0,(function*(){const i=l.getFileStoreId(e),a=o.putFile(e);t(a),!d.previewDataPresentForFile(r(),e)&&!d.previewDataInFlight(r(),e)&&(a.payload.file.preview?t(n.populateFilesPreviewData([a.payload.file])):t(n.fetchPreviewData([a.payload.file]))),t(A(i))}))},t.setRenderStatusForCurrentFile=k,t.setRenderStatusSuccessForCurrentFile=function(){return k(u.PreviewRenderStatus.Succeeded)},t.pushSidebarPane=I,t.popSidebarPane=function(){return{type:c.Actions.PopSidebarPane}},t.resetSidebarPaneStack=O,t.resetSelectedSidebarControlId=P,t.setSelectedSidebarControlId=T,t.setSidebarVisibility=R,t.setPageDimensions=function(e){return{type:c.Actions.SetPageDimensions,payload:{pageDimensions:e}}},t.setMarkupCanvas=function(e,t,i){return{type:c.Actions.SetMarkupCanvas,payload:{page:e,fabric:t,scale:i}}},t.updateMarkupCanvasScale=function(e,t){return{type:c.Actions.UpdateMarkupCanvasScale,payload:{page:e,scale:t}}},t.setMarkupDrawingMode=function(e){return(t,i)=>{t({type:c.Actions.SetMarkupDrawingMode,payload:{isDrawingMode:e}}),w.setDrawingMode(S.getMarkupState(i()),e)}},t.setMarkupStroke=function(e){return t=>{t({type:c.Actions.SetMarkupStroke,payload:{color:e}}),w.setBaseBrushColor(e)}},t.setMarkupFill=function(e){return{type:c.Actions.SetMarkupFill,payload:{color:e}}},t.setMarkupFormatSubmenu=function(e){return{type:c.Actions.SetMarkupSubmenuType,payload:{formatSubmenu:e}}},t.resetMarkupState=function(){return(e,t)=>{w.disposeCanvas(S.getMarkupState(t())),e({type:c.Actions.ResetMarkupState})}},t.switchRevisionAction=function(e){return t=>{e.preview&&t(n.overridePreviewForComments(e,e.preview)),t({type:c.Actions.SwitchRevision,payload:{file:e}})}},t.restoreRevisionAction=function(){return(e,t)=>{const i=s.getActiveFile(t());i&&e(n.clearCommentsPreviewOverride(i)),e({type:c.Actions.RestoreRevision})}},t.saveForwardRevision=function(e){return t=>{t(o.putFile(e,e.revision_id)),e.preview&&t(n.overridePreviewForComments(e,e.preview)),t({type:c.Actions.SaveForwardRevision,payload:{revisionKey:e.revision_id}})}},t.download=function(e){const t=g.URI.parse(e.href);t.updateQuery({dl:"1"}),p.get({url:t.toString()})},t.pendingFileUploaded=function(){f.reload(!0)},t.setMediaPlaying=function(){return e=>{e({type:c.Actions.PlayMedia})}},t.setMediaPaused=function(){return e=>{e({type:c.Actions.PauseMedia})}},t.resetFileViewerStore=function(){return e=>{e({type:c.Actions.ResetStore})}},t.forceHideToolbar=function(){return{type:c.Actions.ForceHideToolbar}},t.disableForceHideToolbar=function(){return{type:c.Actions.DisableForceHideToolbar}},t.fetchControllerModeAction=function(e,t,r){return(o,n)=>i.__awaiter(this,void 0,void 0,(function*(){o({type:c.Actions.FetchControllerModeRequest});try{const{mode:i}=yield m.fetchControllerMode(e,t);if(v.filePreviewEventEmitter.emit(u.EventType.FilePreviewModeDetermined,_.FilePreviewSession.currentSession,{mode:i}),r===h.SizeClass.Small||r===h.SizeClass.Medium)return o(T(b.SidebarControlId.Documentation)),o(I(b.SidebarPaneId.Documentation)),void o(E(b.FileViewerMode.Documentation));const a=(function(e){let t=b.FileViewerMode.Default;if(e)switch(e[".tag"]){case"commenting_mode":t=b.FileViewerMode.Commenting;break;case"documentation_mode":t=b.FileViewerMode.Documentation;break;case"other":t=b.FileViewerMode.Default}return t})(i),l=s.getMode(n());l&&l!==b.FileViewerMode.Default||o(C(a))}catch(e){o({type:c.Actions.FetchControllerModeError,payload:e})}}))},t.fetchActiveUserBrandingInfoAction=function(e){return(t,r)=>i.__awaiter(this,void 0,void 0,(function*(){var i;try{const[r,o]=yield Promise.all([M.getLogo(e.id),M.getName(e.id)]);let n=null;const a=null===(i=null==r?void 0:r.graphic)||void 0===i?void 0:i.value;"image"===(null==a?void 0:a[".tag"])&&a.original_url&&(n=a.original_url),t({type:c.Actions.SetActiveUserBrandingInfo,payload:{activeUserBrandingInfo:{logoUrl:n,organizationName:o}}})}catch(e){}}))},t.fetchBestCampaignsAction=function(e,t){return(r,o)=>i.__awaiter(this,void 0,void 0,(function*(){const{campaigns:i}=yield y.fetchBestCampaigns(e.id,t);r({type:c.Actions.SetBestCampaign,payload:{campaign:i[0]}})}))},t.fetchDocClassificationAction=function(e,t){return(r,o)=>i.__awaiter(this,void 0,void 0,(function*(){const{predicted_types:i}=yield F.fetchDocClassification(e,t);r({type:c.Actions.SetDocClassification,payload:{docClassification:{predicted_types:i},fileId:t}})}))},t.updateCurrentPageIndex=function(e){return{type:c.Actions.UpdateCurrentPageIndex,payload:{currentPageIndex:e}}},t.pageDown=function(){return{type:c.Actions.PageDown}},t.pageUp=function(){return{type:c.Actions.PageUp}},t.registerUser=function(e){return(t,i)=>{t({type:c.Actions.RegisterUser,payload:{user:e}})}};const L=V(b.FileViewerMode.Documentation,b.SidebarControlId.Documentation,b.SidebarPaneId.Documentation),U=V(b.FileViewerMode.Commenting,b.SidebarControlId.Comments,b.SidebarPaneId.Comments),B=V(b.FileViewerMode.Markup,b.SidebarControlId.Markup,b.SidebarPaneId.Markup),N=V(b.FileViewerMode.ProAnalytics,b.SidebarControlId.ProAnalytics,b.SidebarPaneId.ProAnalytics),x=()=>{},H=()=>{};t.overflowZoomOn=function(){return{type:c.Actions.OverflowZoomOn}},t.overflowZoomOff=function(){return{type:c.Actions.OverflowZoomOff}}})),define("metaserver/static/js/modules/clean/react/file_viewer/data/selectors",["require","exports","tslib","metaserver/static/js/modules/clean/redux/namespaces","metaserver/static/js/modules/clean/redux/selectors","metaserver/static/js/modules/clean/file_store/selectors","metaserver/static/js/modules/clean/previews/data/selectors","metaserver/static/js/modules/clean/react/file_viewer/constants","metaserver/static/js/modules/clean/previews/data/preview_type_util","reselect","lodash","metaserver/static/js/modules/clean/react/extensions/data/selectors","metaserver/static/js/modules/clean/react/extensions/client","typescript/libraries/file-viewer/src/core/data/modes/types"],(function(e,t,i,r,o,n,a,s,l,c,d,u,p,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDocClassificationForFile=t.getHelloSignAppActionForFile=t.isOverflowZoomMode=t.getExtensionsEnabled=t.shouldForceHideToolbar=t.getIsFlippingEnabled=t.getPreviewApiDataForCurrentFile=t.getPauseCount=t.getIsMediaPlaying=t.getRenderStatusForCurrentFile=t.getActiveUserBrandingInfo=t.getSelectedPromptCampaign=t.getActiveFile=t.getPageDimensions=t.getIsMarkupMode=t.getIsEditMode=t.getIsTrialMode=t.getAnnotationAllowed=t.getSidebar=t.getDisabledModes=t.getMode=t.getCurrentUser=t.getPastFile=t.getCurrentFile=t.getCurrentFileId=t.getAppDownloadInterstitial=t.getCurrentPageIndex=t.getIsSidebarOpen=t.getIsFullScreen=t.getFileViewerState=void 0,d=i.__importStar(d),t.getFileViewerState=e=>o.getStateAtNamespace(e,r.FILE_VIEWER_NAMESPACE_KEY),t.getIsFullScreen=e=>t.getFileViewerState(e).isFullScreen,t.getIsSidebarOpen=e=>t.getFileViewerState(e).isSidebarOpen,t.getCurrentPageIndex=e=>t.getFileViewerState(e).currentPageIndex,t.getAppDownloadInterstitial=e=>t.getFileViewerState(e).appDownloadInterstitialDismissed,t.getCurrentFileId=e=>t.getFileViewerState(e).currentFileId,t.getCurrentFile=c.createSelector(d.nthArg(0),t.getCurrentFileId,n.getFile),t.getPastFile=e=>t.getFileViewerState(e).fileRevision,t.getCurrentUser=e=>t.getFileViewerState(e).currentUser,t.getMode=e=>t.getFileViewerState(e).mode,t.getDisabledModes=e=>t.getFileViewerState(e).disabledModes,t.getSidebar=e=>t.getFileViewerState(e).sidebar,t.getAnnotationAllowed=c.createSelector(t.getMode,e=>e===g.FileViewerMode.Commenting),t.getIsTrialMode=e=>t.getFileViewerState(e).isTrialMode,t.getIsEditMode=e=>t.getIsMarkupMode(e),t.getIsMarkupMode=e=>t.getMode(e)===g.FileViewerMode.Markup,t.getPageDimensions=e=>t.getFileViewerState(e).pageDimensions,t.getActiveFile=e=>t.getPastFile(e)||t.getCurrentFile(e);t.getSelectedPromptCampaign=e=>t.getFileViewerState(e).campaign,t.getActiveUserBrandingInfo=e=>t.getFileViewerState(e).activeUserBrandingInfo,t.getRenderStatusForCurrentFile=e=>{const i=t.getCurrentFileId(e);if(i)return((e,i)=>t.getFileViewerState(e).renderStatuses[i])(e,i)},t.getIsMediaPlaying=e=>t.getFileViewerState(e).isMediaPlaying,t.getPauseCount=e=>{const i=t.getFileViewerState(e).pauseCount;return i||0},t.getPreviewApiDataForCurrentFile=e=>{const i=t.getCurrentFile(e);return a.getApiDataForFile(e,i).data},t.getIsFlippingEnabled=e=>{const i=t.getPreviewApiDataForCurrentFile(e);return!(t.getIsEditMode(e)||t.getIsMediaPlaying(e)||t.getIsFullScreen(e)&&l.isSsrDoc(i))},t.shouldForceHideToolbar=e=>t.getFileViewerState(e).forceHideToolbar,t.getExtensionsEnabled=e=>{const i=t.getActiveFile(e);return!i||!u.fileExtensionsConfigs(e)[i.file_id]||u.fileExtensionsConfigs(e)[i.file_id].displayState!==p.DisplayState.DISABLED},t.isOverflowZoomMode=e=>!0===t.getFileViewerState(e).overflowZoom,t.getHelloSignAppActionForFile=(e,t)=>u.getShareActionsForFiles(e,[t]).filter(e=>e.app_id===s.HELLOSIGN_PROD_APP_ID)[0],t.getDocClassificationForFile=(e,i)=>{const r=t.getFileViewerState(e);if(r&&r.docClassifications&&r.docClassifications[i])return r.docClassifications[i]}})),define("metaserver/static/js/modules/clean/react/file_viewer/data/types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Actions=void 0,(function(e){e.CloseFile="FileViewer/CloseFile",e.CloseFullScreen="FileViewer/CloseFullScreen",e.CloseSidebar="FileViewer/CloseSidebar",e.DismissAppDownloadInterstitial="FileViewer/DismissAppDownloadInterstitial",e.DisableForceHideToolbar="FileViewer/DisableForceHideToolbar",e.ForceHideToolbar="FileViewer/ForceHideToolbar",e.UpdateMode="FileViewer/UpdateMode",e.DisableMode="FileViewer/DisableMode",e.EnableMode="FileViewer/EnableMode",e.OpenFile="FileViewer/OpenFile",e.OpenFullScreen="FileViewer/OpenFullScreen",e.OpenSidebar="FileViewer/OpenSidebar",e.PageDown="FileViewer/PageDown",e.PageUp="FileViewer/PageUp",e.PauseMedia="FileViewer/PauseMedia",e.PlayMedia="FileViewer/PlayMedia",e.PopSidebarPane="FileViewer/PopSidebarPane",e.PushSidebarPane="FileViewer/PushSidebarPane",e.SetSelectedSidebarControlId="FileViewer/SetSelectedSidebarControlId",e.ResetSidebarPaneStack="FileViewer/ResetSidebarPaneStack",e.ResetSelectedSidebarControlId="FileViewer/ResetSelectedSidebarControlId",e.ResetStore="FileViewer/ResetStore",e.UpdateCurrentPageIndex="FileViewer/UpdateCurrentPageIndex",e.RestoreRevision="FileViewer/RestoreRevision",e.SaveForwardRevision="FileViewer/SaveForwardRevision",e.SetCurrentCalloutType="FileViewer/SetCurrentCalloutType",e.SetSidebarVisibility="FileViewer/SetSidebarVisibility",e.SetPageDimensions="FileViewer/SetPageDimensions",e.SetMarkupCanvas="FileViewer/SetMarkupCanvas",e.UpdateMarkupCanvasScale="FileViewer/UpdateMarkupCanvasScale",e.ResetMarkupState="FileViewer/ResetMarkupState",e.SetMarkupDrawingMode="FileViewer/SetMarkupDrawingMode",e.SetMarkupFill="FileViewer/SetMarkupFill",e.SetMarkupStroke="FileViewer/SetMarkupStroke",e.SetMarkupSubmenuType="FileViewer/SetMarkupSubmenuType",e.SwitchRevision="FileViewer/SwitchRevision",e.UpdateRenderStatus="FileViewer/UpdateRenderStatus",e.RegisterUser="FileViewer/RegisterUser",e.SetTrialMode="FileViewer/SetTrialMode",e.FetchControllerModeRequest="FileViewer/FetchControllerModeRequest",e.FetchControllerModeSuccess="FileViewer/FetchControllerModeSuccess",e.FetchControllerModeError="FileViewer/FetchControllerModeError",e.FetchBestCampaign="FileViewer/FetchBestCampaign",e.SetBestCampaign="FileViewer/SetBestCampaign",e.SetActiveUserBrandingInfo="FileViewer/SetActiveUserBrandingInfo",e.SetDocClassification="FileViewer/SetDocClassification",e.OverflowZoomOn="FileViewer/OverflowZoomOn",e.OverflowZoomOff="FileViewer/OverflowZoomOff"})(t.Actions||(t.Actions={}))})),define("metaserver/static/js/modules/clean/react/file_viewer/prompt/campaign_api",["require","exports","metaserver/static/js/api_v2/user_client"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchBestCampaigns=void 0,t.fetchBestCampaigns=function(e,t){const r={client_context:{platform:"web",locations:["targeted_bubble"],ref_page:["preview","file_viewer"],display_context:"fv_preview_type="+t}};return(new i.UserApiV2Client).ns("prompt").rpc("get_best_campaigns",r,{subjectUserId:e})}})),define("metaserver/static/js/modules/clean/react/location/types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Location=void 0;class i{constructor(e,t={}){this.path=e,this.query=t}static fromURI(e){return new i(e.getPath(),e.getQuery())}}t.Location=i})),define("metaserver/static/js/modules/clean/react/size_class/utils",["require","exports","metaserver/static/js/modules/clean/react/size_class/constants"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSmallerThanLarge=void 0,t.isSmallerThanLarge=function(e){return e!==i.SizeClass.Large&&e!==i.SizeClass.ExtraLarge}})),define("metaserver/static/js/modules/clean/react/workflows/markup/fabric_wrapper",["require","exports","tslib","fabric"],(function(e,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fabric=void 0;const o=(r=i.__importDefault(r)).default.fabric||r.default;t.fabric=o})),define("metaserver/static/js/modules/clean/react/workflows/markup/fabric",["require","exports","tslib","metaserver/static/js/modules/clean/react/workflows/markup/fabric_wrapper","metaserver/static/js/modules/clean/previews/constants","metaserver/static/js/modules/clean/react/workflows/markup/types","metaserver/static/js/api_v2/user_client"],(function(e,t,i,r,o,n,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFill=t.getStroke=t.setOptionsForActiveObjects=t.saveMarkup=t.disposeCanvas=t.setBaseBrushColor=t.setDrawingMode=t.addMarkupObject=void 0;r.fabric.Object&&(r.fabric.util.object.extend(r.fabric.Object.prototype,{cornerStyle:"circle",cornerColor:"#0052D9",cornerSize:10,cornerStrokeColor:"white",transparentCorners:!1,drawControls:function(e,t){t=t||{};const i=this._calculateCurrentDimensions(),r=i.x,o=i.y,n=t.cornerSize||this.cornerSize,a=-(r+n)/2,s=-(o+n)/2,l=void 0!==t.transparentCorners?t.transparentCorners:this.transparentCorners,c=void 0!==t.hasRotatingPoint?t.hasRotatingPoint:this.hasRotatingPoint,d=l?"stroke":"fill";return e.save(),e.strokeStyle=e.fillStyle=t.cornerColor||this.cornerColor,this.transparentCorners||(e.strokeStyle=t.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(e,t.cornerDashArray||this.cornerDashArray,null),this._drawControl("tl",e,d,a,s,t),this._drawControl("tr",e,d,a+r,s,t),this._drawControl("bl",e,d,a,s+o,t),this._drawControl("br",e,d,a+r,s+o,t),c&&this._drawControl("mtr",e,d,a+r/2,s-this.rotatingPointOffset,t),e.restore(),this},_findTargetCorner:function(e){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;const t=e.x,i=e.y;this.__corner=0;for(const e in this.oCoords){if(!this.isControlVisible(e))continue;if("mtr"===e&&!this.hasRotatingPoint)continue;if(this.get("lockUniScaling")&&("mt"===e||"mr"===e||"mb"===e||"ml"===e))continue;let r;switch(e){case"mt":r=this._getHorizontalImageLines(this.oCoords.tl.corner,this.oCoords.tr.corner);break;case"mr":r=this._getVerticalImageLines(this.oCoords.tr.corner,this.oCoords.br.corner);break;case"mb":r=this._getHorizontalImageLines(this.oCoords.bl.corner,this.oCoords.br.corner);break;case"ml":r=this._getVerticalImageLines(this.oCoords.tl.corner,this.oCoords.bl.corner);break;default:r=this._getImageLines(this.oCoords[e].corner)}const o=this._findCrossPoints({x:t,y:i},r);if(0!==o&&o%2==1)return this.__corner=e,e}return!1},_getHorizontalImageLines:function(e,t){return{topline:{o:e.tl,d:t.tr},rightline:{o:t.tr,d:t.br},bottomline:{o:t.br,d:e.bl},leftline:{o:e.bl,d:e.tl}}},_getVerticalImageLines:function(e,t){return{topline:{o:e.tl,d:e.tr},rightline:{o:e.tr,d:t.br},bottomline:{o:t.br,d:t.bl},leftline:{o:t.bl,d:e.tl}}}}),r.fabric.util.object.extend(r.fabric.Canvas.prototype,{uniScaleKey:null,_getActionFromCorner:function(e,t,i){if(!t||!e)return"drag";switch(t){case"mtr":return"rotate";case"ml":case"mr":return i.shiftKey?"scale":"scaleX";case"mt":case"mb":return i.shiftKey?"scale":"scaleY";default:return"scale"}}})),r.fabric.BaseBrush&&(l(n.MarkupColor.RED_CHERRY),r.fabric.BaseBrush.prototype.width=3);const s={strokeUniform:!0,strokeWidth:3,stroke:"red"};function l(e){r.fabric.BaseBrush&&(r.fabric.BaseBrush.prototype.color=e)}function c(e){return e&&"group"===e.type}function d(e){return e&&"i-text"===e.type}t.addMarkupObject=function(e,t,i){let o;switch(t){case n.MarkupType.TEXT:o=new r.fabric.IText("Text",Object.assign(Object.assign(Object.assign(Object.assign({},s),{fontSize:22}),i),{fill:i.stroke,stroke:void 0}));break;case n.MarkupType.CIRCLE:o=new r.fabric.Circle(Object.assign(Object.assign(Object.assign({},s),{radius:50,fill:void 0}),i));break;case n.MarkupType.RECT:o=new r.fabric.Rect(Object.assign(Object.assign(Object.assign({},s),{width:100,height:100,fill:void 0}),i));break;case n.MarkupType.ARROW:const{left:e,top:t,stroke:a}=i,l=100,c=[e,t+l,e+l,t],d=180*Math.atan2(l,l)/Math.PI,u=new r.fabric.Triangle(Object.assign(Object.assign({},s),{angle:d,top:c[3],left:c[2]+.03*l,height:.15*l,width:.15*l,originX:"center",originY:"center",stroke:a,fill:a})),p=new r.fabric.Line(c,Object.assign(Object.assign({},s),i));o=new r.fabric.Group([p,u],Object.assign(Object.assign(Object.assign({},s),{lockUniScaling:!0,centeredScaling:!0}),i))}o&&(e.add(o),e.setActiveObject(o))},t.setDrawingMode=function(e,t){for(const i in e)if(e.hasOwnProperty(i)&&"object"==typeof e[i]){const r=e[i].fabric;r&&(r.isDrawingMode=t)}},t.setBaseBrushColor=l,t.disposeCanvas=function(e){for(const t in e)e[t].fabric&&e[t].fabric.dispose()},t.saveMarkup=function(e,t,r,n,s){return i.__awaiter(this,void 0,void 0,(function*(){const i=new a.UserApiV2Client,l=[],c=s===o.PreviewType.SsrDoc?300/72:1;for(const e in n)if(n.hasOwnProperty(e)&&"object"==typeof n[e]){const t=n[e].scale,i=c/t,r=n[e].fabric;if(r)for(const o of r.getObjects()){const r=o.getBoundingRect();l.push({".tag":"burn_image",image:o.toDataURL({multiplier:i}).split(",",2).pop(),x:Math.round(r.left/t),y:Math.round(r.top/t),page:Number(e)})}}const d={path:t,should_overwrite:r,burn_objects:l};return i.ns("workflows").rpc("markup_file",d,{subjectUserId:e})}))},t.setOptionsForActiveObjects=function(e,t){if(!e)return;e.getActiveObjects().forEach(e=>{d(e)?e.set(Object.assign(Object.assign({},t),{stroke:void 0,fill:t.stroke||e.fill})):c(e)?e.forEachObject(e=>e.set(Object.assign(Object.assign({},t),{fill:t.stroke||e.stroke}))):!(function(e){return e&&"path"===e.type})(e)?e.set(t):e.set(Object.assign(Object.assign({},t),{fill:void 0}))}),e.renderAll()},t.getStroke=function(e){if(d(e))return e.fill;if(c(e)){return e.getObjects().filter(e=>"line"===e.type)[0].stroke}return"stroke"in e?e.stroke:void 0},t.getFill=function(e){if((function(e){return e&&"circle"===e.type})(e)||(function(e){return e&&"rect"===e.type})(e))return e.fill}})),define("metaserver/static/js/modules/clean/react/workflows/markup/selectors",["require","exports","metaserver/static/js/modules/clean/react/file_viewer/data/selectors"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMarkupState=void 0,t.getMarkupState=e=>i.getFileViewerState(e).markup})),define("metaserver/static/js/modules/clean/react/workflows/markup/types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MarkupColor=t.FormatSubmenuEntry=t.MarkupType=void 0,(function(e){e[e.TEXT=0]="TEXT",e[e.CIRCLE=1]="CIRCLE",e[e.RECT=2]="RECT",e[e.ARROW=3]="ARROW",e[e.FREEFORM=4]="FREEFORM"})(t.MarkupType||(t.MarkupType={})),(function(e){e.STROKE="stroke",e.FILL="fill"})(t.FormatSubmenuEntry||(t.FormatSubmenuEntry={})),(function(e){e.TRANSPARENT="transparent",e.RED_CHERRY="#D62C0B",e.ORANGE_TANGERINE="#FF8E21",e.GREEN="#00864C",e.DARK_BLUE="#005DD6",e.ULTRAVIOLET="#813BF6",e.WHITE="white",e.BLACK="black"})(t.MarkupColor||(t.MarkupColor={}))})),define("metaserver/static/js/modules/clean/react/branding/api",["require","exports","tslib","metaserver/static/js/modules/clean/react/premium_kit/api","metaserver/static/js/modules/clean/react/premium_kit/types","metaserver/static/js/modules/clean/react/user_metadata/api","metaserver/static/js/modules/core/uri"],(function(e,t,i,r,o,n,a){"use strict";function s(e,t){const i=new a.URI({scheme:"https",authority:"www.dropbox.com",path:`/team/${t}/${e}`,query:{suppress_default_logo:"1"}}).toString();return new Promise((e,r)=>{const o=new XMLHttpRequest;o.open("HEAD",i),o.onload=()=>{switch(o.status){case 200:return e(i);case 404:return e(void 0);default:throw new Error(`Failed to get ${t}`)}},o.onerror=()=>r(new Error(`Failed to get ${t}`)),o.send()})}Object.defineProperty(t,"__esModule",{value:!0}),t.getTeamBackgroundUrl=t.getTeamLogoUrl=t.DISALLOWED=t.saveName=t.getName=t.saveLogoFlag=t.removeLogo=t.getLogo=t.saveSelectedBackgroundAssetId=t.getSelectedBackgroundAssetId=t.getBackgroundAssets=t.USER_METADATA_BRANDING_LOGO_SET_KEY=t.USER_METADATA_BACKGROUND_KEY=t.USER_METADATA_ORG_NAME_KEY=void 0,t.USER_METADATA_ORG_NAME_KEY="PREMIUM_KIT_ORGANIZATION_NAME",t.USER_METADATA_BACKGROUND_KEY="PREMIUM_KIT_BACKGROUND_ASSET_ID",t.USER_METADATA_BRANDING_LOGO_SET_KEY="PREMIUM_KIT_BRANDING_LOGO_SET",t.getBackgroundAssets=function(e){var t,n;return i.__awaiter(this,void 0,void 0,(function*(){const i=yield r.getAssetLibraries(e,[o.AssetLibraryId.BrandingBackground]);return(null===(n=null===(t=i.asset_libraries)||void 0===t?void 0:t[0])||void 0===n?void 0:n.assets)||[]}))},t.getSelectedBackgroundAssetId=function(e){return i.__awaiter(this,void 0,void 0,(function*(){return(yield n.getUserMetadata([t.USER_METADATA_BACKGROUND_KEY],e))[t.USER_METADATA_BACKGROUND_KEY]||""}))},t.saveSelectedBackgroundAssetId=function(e,r){return i.__awaiter(this,void 0,void 0,(function*(){yield n.setUserMetadata({[t.USER_METADATA_BACKGROUND_KEY]:r||""},e)}))},t.getLogo=function(e){var t,n,a;return i.__awaiter(this,void 0,void 0,(function*(){const i=yield r.getAssetLibraries(e,[o.AssetLibraryId.BrandingLogo]);return null===(a=null===(n=null===(t=i.asset_libraries)||void 0===t?void 0:t[0])||void 0===n?void 0:n.assets)||void 0===a?void 0:a[0]}))},t.removeLogo=function(e){return i.__awaiter(this,void 0,void 0,(function*(){yield r.removeAssetLibrary(e,o.AssetLibraryId.BrandingLogo)}))},t.saveLogoFlag=function(e,r){return i.__awaiter(this,void 0,void 0,(function*(){yield n.setUserMetadata({[t.USER_METADATA_BRANDING_LOGO_SET_KEY]:r},e)}))},t.getName=function(e){return i.__awaiter(this,void 0,void 0,(function*(){return(yield n.getUserMetadata([t.USER_METADATA_ORG_NAME_KEY],e))[t.USER_METADATA_ORG_NAME_KEY]||""}))},t.saveName=function(e,r){return i.__awaiter(this,void 0,void 0,(function*(){yield n.setUserMetadata({[t.USER_METADATA_ORG_NAME_KEY]:r},e)}))},t.DISALLOWED={disallowed:!0},t.getTeamLogoUrl=function(e){return i.__awaiter(this,void 0,void 0,(function*(){return s(e,"team_logo")}))},t.getTeamBackgroundUrl=function(e){return i.__awaiter(this,void 0,void 0,(function*(){return s(e,"team_background")}))}})),define("metaserver/static/js/modules/clean/react/premium_kit/api",["require","exports","tslib","metaserver/static/js/api_v2/user_client"],(function(e,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeAssetLibrary=t.getAssetLibraries=t.addAssetByBlock=void 0,t.addAssetByBlock=function(e,t,o,n){return i.__awaiter(this,void 0,void 0,(function*(){if(0===o.length)throw new Error("blockTokens list must not be empty");const i={library_assets_to_add:[{asset_library_id:n,assets_to_add:[{asset_id:t,file_args:{".tag":"add_by_blocks",tokens:o}}]}]};return yield(new r.UserApiV2Client).ns("premium_kit").rpc("asset_libraries/add_assets",i,{subjectUserId:e}).then(e=>{var t;const i=e.added_library_assets[0].added_assets[0].result;switch(i[".tag"]){case"asset":return(null===(t=null==i?void 0:i.graphic)||void 0===t?void 0:t.fallback_image_url)?i:void 0;case"asset_error":throw new Error(i.message);default:throw new Error(`unexpected .tag value ${i[".tag"]}`)}})}))},t.getAssetLibraries=function(e,t){const i={asset_library_ids:t};return(new r.UserApiV2Client).ns("premium_kit").rpc("asset_libraries/get",i,{subjectUserId:e})},t.removeAssetLibrary=function(e,t){return i.__awaiter(this,void 0,void 0,(function*(){const i={asset_library_id:t};return yield(new r.UserApiV2Client).ns("premium_kit").rpc("asset_libraries/remove",i,{subjectUserId:e})}))}})),define("metaserver/static/js/modules/clean/react/premium_kit/types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AssetType=t.AssetId=t.AssetLibraryId=void 0,(function(e){e.BrandingBackground="branding_background",e.BrandingLogo="branding_logo",e.CustomLogo="custom_logo"})(t.AssetLibraryId||(t.AssetLibraryId={})),(function(e){e.BrandingCustomBackground="branding_custom_background",e.BrandingLogo="branding_logo",e.CustomLogo="custom_logo",e.Sapphire="sapphire",e.PinkLibrary="pink_library",e.Wheat="wheat",e.BlackCherry="black_cherry",e.Canopy="canopy",e.Turquoise="turquoise",e.Topaz="topaz",e.Pollen="pollen",e.Azalea="azalea",e.Shark="shark",e.AbstractHands="abstract_hands",e.RedMan="red_man",e.TransferAnimals="transfer_animals",e.BlueStairs="blue_stairs",e.WAVE="wave"})(t.AssetId||(t.AssetId={})),(function(e){e.Image="image",e.Video="video",e.Color="color",e.Other="other"})(t.AssetType||(t.AssetType={}))}));
//# sourceMappingURL=pkg-shared_link_core.min.js-vflQA2zn6.map